(this.webpackJsonpwebapp=this.webpackJsonpwebapp||[]).push([[0],{107:function(e,t,a){},109:function(e,t,a){e.exports=a.p+"static/media/clockinjs.9e3a6c84.png"},113:function(e,t,a){e.exports=a.p+"static/media/signUp.8527d53e.png"},114:function(e,t,a){e.exports=a.p+"static/media/newClient.ec78d5a3.png"},115:function(e,t,a){e.exports=a.p+"static/media/punchIn.075b979f.png"},116:function(e,t,a){e.exports=a.p+"static/media/listOfPunchIns.1914c2ab.png"},117:function(e,t,a){e.exports=a.p+"static/media/clockinInfo.cc8c9b89.png"},118:function(e,t,a){e.exports=a.p+"static/media/invoiceGen.3c8da29d.png"},119:function(e,t,a){e.exports=a.p+"static/media/invoice01.c3399484.png"},120:function(e,t,a){e.exports=a.p+"static/media/invoiceChange.6640bf4f.png"},123:function(e,t,a){e.exports=a(167)},128:function(e,t,a){},129:function(e,t,a){},139:function(e,t,a){},167:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),s=a(26),r=a.n(s),c=(a(128),a(17)),i=a(18),o=a(20),m=a(19),d=a(16),u=a(23),h=(a(129),a(11)),p=a(109),E=a.n(p),g=a(3),b=a(46),f=a(15),v=a(25),y=a(68),C=a.n(y),k=a(69),x=a.n(k),w=a(70),I=a.n(w),N=a(71),S=a.n(N);function L(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement(g.a,{style:{backgroundColor:e.bckColor,position:"sticky",bottom:0}},l.a.createElement(g.a.Body,{style:{paddingTop:"15px",paddingBottom:"15px"}},l.a.createElement(b.a,null,l.a.createElement(v.a,{className:"justify-content-md-center",style:{textAlign:"center"}},l.a.createElement(f.a,{style:{textAlign:"center",padding:"0 5px"},xs:!0,sm:"1"},l.a.createElement("a",{href:"mailto:tony.kieling@gmail.com",target:"_top"},l.a.createElement("img",{src:C.a,alt:"gmail",className:e.opac||"iconSettings"}))),l.a.createElement(f.a,{style:{textAlign:"center",padding:"0 5px"},xs:!0,sm:"1"},l.a.createElement("a",{href:"https://www.linkedin.com/in/tony-kieling/",target:"_blank",rel:"noopener noreferrer"},l.a.createElement("img",{src:I.a,className:e.opac||"iconSettings",alt:"linkedin"}))),l.a.createElement(f.a,{style:{textAlign:"center",padding:"0 5px"},xs:!0,sm:"1"},l.a.createElement("a",{href:"https://github.com/tonykieling",target:"_blank",rel:"noopener noreferrer"},l.a.createElement("img",{src:S.a,className:e.opac||"iconSettings",alt:"linkedin"}))),l.a.createElement(f.a,{style:{textAlign:"center",padding:"0 5px"},xs:!0,sm:"1"},l.a.createElement("a",{href:"https://resume.creddle.io/resume/hqaeq2fbnr6",target:"_blank",rel:"noopener noreferrer"},l.a.createElement("img",{src:x.a,alt:"resume",className:e.opac||"iconSettings"}))))))))}var T=window.innerHeight-56-62;function P(){var e=window.innerWidth;return l.a.createElement("div",null,l.a.createElement("div",{style:{paddingTop:"30px",height:T}},l.a.createElement("div",{style:{marginLeft:e<800?"2rem":"4rem"}},l.a.createElement("h5",null,"It is easy to track your worked hours and manage invoices with Clockin.js."),l.a.createElement("br",null),l.a.createElement("p",null,"You just need to Sign Up and enjoy."),l.a.createElement("p",null," It is free. ;)")),l.a.createElement("br",null),l.a.createElement("div",null,l.a.createElement("img",{src:E.a,alt:"Clockin.js",width:e<800?e-.08*e:e-.6*e,style:{marginLeft:e<800?(e-.92*e)/2:(e-.4*e)/2}})),l.a.createElement("div",{style:{marginTop:"2.5rem",textAlign:"center"}},"More information at"),l.a.createElement("div",{style:{textAlign:"center"}},l.a.createElement(d.b,{to:"/about"},"About"),", ",l.a.createElement(d.b,{to:"/guidance"},"Guidance")," or ",l.a.createElement(d.b,{to:"/contact"},"Contact"),".")),window.innerWidth<800&&l.a.createElement(L,{bckColor:"gainsboro",opac:"iconSettingsOpacity"}))}var A=a(13),O=a(174),j=a(175),M=a(172),D=a(27),R=a(111),B=a.n(R),F=(a(139),a(173)),_=a(79);function G(e){return l.a.createElement("div",null,l.a.createElement(F.a,{show:e.openModal,onHide:e.noMethod},l.a.createElement(F.a.Header,{closeButton:!0},l.a.createElement(F.a.Title,null,"Clockin.js")),l.a.createElement(F.a.Body,null,e.message),l.a.createElement(F.a.Footer,null,e.yesMethod?l.a.createElement(_.a,{className:"mt-3",style:{width:"50%"}},l.a.createElement(D.a,{variant:e.colorBtn1||"primary",onClick:e.yesMethod,style:{width:"50%"}},"Yes"),l.a.createElement(D.a,{variant:e.colorBtn2||"danger",onClick:e.noMethod,style:{width:"50%"}},"No")):l.a.createElement(D.a,{autoFocus:!0,variant:e.color||"primary",onClick:e.noMethod,style:{width:"50%"}},"OK"))))}var H=window.innerWidth<800;var K=Object(h.b)((function(e){return{storeEmail:e.email}}),(function(e){return{noUser:function(){return e({type:"LOGOUT"})}}}))((function(e){var t=Object(n.useState)(!1),a=Object(A.a)(t,2),s=a[0],r=a[1],c=Object(n.useState)(!1),i=Object(A.a)(c,2),o=i[0],m=i[1],h=Object(n.useState)(!1),p=Object(A.a)(h,2),E=p[0],g=p[1],b=function(e){e.preventDefault(),m(!1),r(!0)};return l.a.createElement("div",{style:{all:"unset"}},e.storeEmail?H?l.a.createElement(O.a,{bg:"info",sticky:"top",role:"navigation"},l.a.createElement(d.b,{to:"/",className:"nav-link"},"Clockin.js"),l.a.createElement(d.b,{to:"/user",className:"nav-link"},e.storeEmail),l.a.createElement("div",{className:"showHamburguer"},l.a.createElement(B.a,{right:!0,isOpen:o,onStateChange:function(e){return function(e){m(e.isOpen)}(e)}},l.a.createElement(M.a,{title:"Clients",id:"basic-nav-dropdown1",className:"menu-item"},l.a.createElement(M.a,{title:"Add a New One",id:"basic-nav-submenu",drop:"down"},l.a.createElement(M.a.Item,{href:"/clientNew"},"Kids"),l.a.createElement(M.a.Divider,null),l.a.createElement(M.a.Item,{href:"/clientGeneralNew"},"General / Company")),l.a.createElement(M.a.Divider,null),l.a.createElement(M.a.Item,{href:"/clientList"}," List & Edit")),l.a.createElement("br",null),l.a.createElement(M.a,{title:"Clockins",id:"basic-nav-dropdown2"},l.a.createElement(M.a.Item,{href:"/punchInNew"}," Punch in "),l.a.createElement(M.a.Divider,null),l.a.createElement(M.a.Item,{href:"/punchInsList"},"List them all")),l.a.createElement("br",null),l.a.createElement(M.a,{title:"Invoices",id:"basic-nav-dropdown3",className:"font-color"},l.a.createElement(M.a.Item,{href:"/invoiceNew"},"Generate a brand new one"),l.a.createElement(M.a.Divider,null),l.a.createElement(M.a.Item,{href:"/invoicesList"},"List, Check and Edit"),l.a.createElement(M.a.Divider,null),l.a.createElement(M.a.Item,{href:"/invoiceIssue"},"Issue an Invoice")),l.a.createElement("br",null),l.a.createElement(M.a,{title:"Reports",id:"basic-nav-dropdown4"},l.a.createElement(M.a.Item,{href:"/reports/clockins"},"Clockins"),l.a.createElement(M.a.Divider,null),l.a.createElement(M.a.Item,{href:"/reports/invoices"},"Invoices")),l.a.createElement("br",null),l.a.createElement("a",{id:"guidance",className:"menu-item",href:"/guidance"},"Guide"),l.a.createElement("br",null),l.a.createElement("a",{id:"about",className:"menu-item",href:"/about"},"About"),l.a.createElement("br",null),l.a.createElement("a",{id:"contact",className:"menu-item",href:"/contact"},"Contact"),l.a.createElement("br",null),l.a.createElement("a",{onClick:b,className:"menu-item--small",href:"/"},"Logout")))):l.a.createElement("div",{style:{all:"unset"}},l.a.createElement(O.a,{bg:"info",className:"showNormalMenu",sticky:"top"},l.a.createElement(O.a.Brand,null,l.a.createElement(d.b,{to:"/",className:"navbar-brand"}," Clockin.js ")),l.a.createElement(O.a.Toggle,{"aria-controls":"basic-navbar-nav"}),l.a.createElement(O.a.Collapse,{id:"basic-navbar-nav"},l.a.createElement(j.a,{className:"mr-auto"},l.a.createElement(d.b,{to:"/user",className:"nav-link"},e.storeEmail),l.a.createElement(M.a,{title:"Clients",id:"basic-nav-dropdown1"},l.a.createElement(M.a,{title:"Add a New One",id:"basic-nav-submenu",drop:"right",style:{paddingLeft:"1rem"}},l.a.createElement(M.a.Item,{href:"/clientNew"},"Kids"),l.a.createElement(M.a.Divider,null),l.a.createElement(M.a.Item,{href:"/clientGeneralNew"},"General / Company")),l.a.createElement(M.a.Divider,null),l.a.createElement(M.a.Item,{href:"/clientList"}," List & Edit")),l.a.createElement(M.a,{title:"Clockins",id:"basic-nav-dropdown2"},l.a.createElement(M.a.Item,{href:"/punchInNew"}," Punch in "),l.a.createElement(M.a.Divider,null),l.a.createElement(M.a.Item,{href:"/punchInsList"},"List them all")),l.a.createElement(M.a,{title:"Invoices",id:"basic-nav-dropdown3"},l.a.createElement(M.a.Item,{href:"/invoiceNew"},"Generate a brand new one"),l.a.createElement(M.a.Divider,null),l.a.createElement(M.a.Item,{href:"/invoicesList"},"List, Check and Edit"),l.a.createElement(M.a.Divider,null),l.a.createElement(M.a.Item,{href:"/invoiceIssue"},"Issue an Invoice")),l.a.createElement(M.a,{title:"Reports",id:"basic-nav-dropdown4"},l.a.createElement(M.a.Item,{href:"/reports/clockins"},"Clockins"),l.a.createElement(M.a.Divider,null),l.a.createElement(M.a.Item,{href:"/reports/invoices"},"Invoices")),l.a.createElement(d.b,{to:"/guidance",className:"nav-link"},"Guidance"),l.a.createElement(d.b,{to:"/about",className:"nav-link"},"About"),l.a.createElement(d.b,{to:"/contact",className:"nav-link"},"Contact")),l.a.createElement(D.a,{onClick:b,className:"logoutBtn"},"Logout")))):l.a.createElement("div",{style:{all:"unset"}},l.a.createElement(O.a,{bg:"dark",variant:"dark",sticky:"top"},l.a.createElement(O.a.Brand,{href:"/"},"Clockin.js"),l.a.createElement(j.a,null,l.a.createElement(d.b,{to:"/login",className:"nav-link"},"Login"),l.a.createElement(d.b,{to:"/signup",className:"nav-link"},"Sign Up"),l.a.createElement(d.b,{to:"/guidance",className:"nav-link"},"Guide"),l.a.createElement(d.b,{to:"/about",className:"nav-link"},"About"),H?"":l.a.createElement(d.b,{to:"/contact",className:"nav-link"},"Contact")))),s?l.a.createElement(G,{openModal:s,message:"Are you sure you want to leave?",yesMethod:function(){r(!1),e.noUser(),g(!0)},noMethod:function(e){m(!1),r(!1)}}):"",E?l.a.createElement(u.a,{to:"/land"}):"")})),U=a(7),z=a.n(U),Y=a(10),W=a(14),V=a(9),J=a(2),q=a(12),X=a.n(q),Z=a(28),$=a.n(Z),Q=a(64),ee=a(63);var te=Object(h.b)(null,(function(e){return{dispatchLogin:function(t){return e({type:"LOGIN",data:t})}}}))((function(e){var t=Object(n.useState)({name:"",email:"",city:"",address:"",phone:"",postalCode:"",password:"",confirmPassword:""}),a=Object(A.a)(t,2),r=a[0],c=a[1],i=Object(n.useRef)(null),o=Object(n.useRef)(null),m=Object(n.useRef)(null),d=Object(n.useRef)(null),u=Object(n.useRef)(null),h=Object(n.useRef)(null),p=Object(n.useRef)(null),E=Object(n.useRef)(null),b=Object(n.useRef)(null),f=Object(n.useRef)(null),v=Object(n.useRef)(null),y=Object(n.useState)(!1),C=Object(A.a)(y,2),k=C[0],x=C[1],w=Object(n.useState)(!1),I=Object(A.a)(w,2),N=I[0],S=I[1],L=Object(n.useState)({content:"",cssClass:""}),T=Object(A.a)(L,2),P=T[0],O=T[1],j=Object(n.useState)(!0),M=Object(A.a)(j,2),R=M[0],B=M[1],F=Object(n.useState)(!0),_=Object(A.a)(F,2),G=_[0],H=_[1],K=Object(n.useState)(!1),U=Object(A.a)(K,2),q=U[0],Z=U[1],te=function(e){var t=e.key,a=e.target,n=a.name,l=a.value;if("Enter"===t)switch(e.preventDefault(),n){case"name":r.name&&m.current.focus();break;case"email":r.email&&d.current.focus();break;case"city":u.current.focus();break;case"address":N?E.current.focus():p.current.focus();break;case"postalCode":h.current.focus();break;case"phone":b.current.focus();break;case"password":r.password&&f.current.focus();break;case"confirmPassword":r.confirmPassword&&v.current.click();break;default:console.log("it's default")}c(Object(V.a)(Object(V.a)({},r),{},Object(W.a)({},n,l))),"name"===n&&H(!0),"email"===n&&new RegExp(/[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,15}/g).test(l)&&B(!0)};Object(n.useEffect)((function(){if(q){N?E.current.focus():p.current.focus();for(var e=0,t=r.postalCode.length-1;t>=0&&("_"===r.postalCode[t]||" "===r.postalCode[t]);t--)e++;c(Object(V.a)(Object(V.a)({},r),{},{postalCode:r.postalCode.slice(0,r.postalCode.length-e)}))}}),[N,S]);var ae=function(){var t=Object(Y.a)(z.a.mark((function t(a){var n,l,s;return z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),""===r.email||""===r.name){t.next=34;break}if(r.password===r.confirmPassword&&""!==r.password){t.next=7;break}O({content:"Password and Confirm Password fields MUST be the same and NOT empty.",cssClass:"messageFailure"}),b.current.focus(),t.next=32;break;case 7:if(""===r.phone||Number(r.phone.substring(1,4))&&Number(r.phone.substring(6,9))&&Number(r.phone.substring(10,14))){t.next=11;break}O({content:"Phone has to have 10 numbers or empty.",cssClass:"messageFailure"}),t.next=32;break;case 11:return x(!0),"/user/signup",n={name:r.name,email:r.email,password:r.password,address:r.address,city:r.city,postalCode:r.postalCode,phone:r.phone},t.prev=14,t.next=17,X.a.post("/user/signup",n);case 17:if(!(l=t.sent).data.message){t.next=23;break}s={id:l.data.user._id,name:l.data.user.name,email:l.data.user.email,token:l.data.token,address:l.data.user.address,city:l.data.user.city,postalCode:l.data.user.postal_code,phone:l.data.user.phone},e.dispatchLogin({user:s}),t.next=26;break;case 23:if(!l.data.error){t.next=26;break}throw console.log("it THROWS an ERROR"),l.data.error;case 26:t.next=32;break;case 28:t.prev=28,t.t0=t.catch(14),O({content:t.t0,cssClass:"messageFailure"}),x(!1);case 32:t.next=38;break;case 34:O({content:"Please, entry at least Name, Email, Password and Confirm Password",cssClass:"messageFailure"}),i.current.scrollIntoView({behavior:"smooth"}),r.name?m.current.focus():o.current.focus(),x(!1);case 38:case"end":return t.stop()}}),t,null,[[14,28]])})));return function(e){return t.apply(this,arguments)}}();return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"formPosition"},l.a.createElement("br",null),l.a.createElement(g.a,{className:"card-settings"},l.a.createElement(g.a.Header,{ref:i},l.a.createElement("h2",null,"Sign Up")),l.a.createElement(J.a,{onSubmit:ae,style:{width:window.innerWidth<800||"70%",marginLeft:window.innerWidth<800||"15%"},autoComplete:"nope"},l.a.createElement("br",null),l.a.createElement(J.a.Group,{controlId:"formName"},l.a.createElement(J.a.Label,{className:"cardLabel"},"Name"),l.a.createElement(J.a.Control,{autoFocus:!0,type:"text",placeholder:"User's name",name:"name",onChange:te,value:r.name,disabled:k,onKeyPress:te,onBlur:function(){return H(!!r.name)},ref:o}),!G&&l.a.createElement(Q.a,{target:o,show:!0,placement:"bottom"},l.a.createElement(ee.a,{id:"tooltip-bottom"},l.a.createElement("strong",{style:{color:"gold"}},"Please, type a name")))),l.a.createElement(J.a.Group,{controlId:"formBasicEmail",style:{marginBottom:"5px"}},l.a.createElement(J.a.Label,{className:"cardLabel"},"Email address"),l.a.createElement(J.a.Control,{type:"email",placeholder:"User's email",name:"email",onChange:te,onKeyPress:te,value:r.email,disabled:k,onBlur:function(){return B(!!new RegExp(/[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,15}/g).test(r.email))},ref:m})),l.a.createElement(J.a.Text,{className:"text-muted",style:{marginTop:"2px"}},"We'll never share your email with anyone else."),l.a.createElement(J.a.Text,{className:"text-muted",style:{marginTop:"0px",marginBottom:"16px"}},"Set a real email so you will receive emails from Clockin.js."),!R&&l.a.createElement(Q.a,{target:m,show:!0,placement:"bottom"},l.a.createElement(ee.a,{id:"tooltip-bottom"},l.a.createElement("strong",{style:{color:"gold"}},"Please, type a valid email"))),l.a.createElement(J.a.Group,{controlId:"formCity"},l.a.createElement(J.a.Label,{className:"cardLabel"},"City"),l.a.createElement(J.a.Control,{type:"text",placeholder:"Type the user's city",name:"city",onChange:te,onKeyPress:te,value:r.city,disabled:k,ref:d})),l.a.createElement(J.a.Group,{controlId:"formAddress"},l.a.createElement(J.a.Label,{className:"cardLabel"},"Address"),l.a.createElement(J.a.Control,{type:"text",placeholder:"Type the user's address",name:"address",onChange:te,onKeyPress:te,value:r.address,disabled:k,ref:u})),l.a.createElement(J.a.Group,{controlId:"formPostalCode"},l.a.createElement(J.a.Label,{className:"cardLabel"},"Postal Code"),l.a.createElement(J.a.Check,{inline:!0,label:" outside Canada",checked:N,type:"checkbox",style:{marginLeft:"1rem"},disabled:k,onChange:function(){Z(!0),S(!N),N?E.current.focus():p.current.focus()}}),N?l.a.createElement(J.a.Control,{type:"text",placeholder:"Enter client's postal code",name:"postalCode",onChange:function(e){return te(e)},value:r.postalCode,disabled:k,onKeyPress:te,ref:E}):l.a.createElement($.a,{mask:[/[A-Z]/i,/\d/,/[A-Z]/i," ",/\d/,/[A-Z]/i,/\d/],className:"form-control",placeholder:"Enter client's postal code",name:"postalCode",value:r.postalCode,disabled:k,onChange:function(e){return function(e){var t=e.target.value;c(Object(V.a)(Object(V.a)({},r),{},{postalCode:isNaN(t)?t.toUpperCase():t}))}(e)},onKeyPress:te,ref:function(e){return p.current=Object(s.findDOMNode)(e)}})),l.a.createElement(J.a.Group,{controlId:"formPhone"},l.a.createElement(J.a.Label,{className:"cardLabel"},"Phone"),l.a.createElement($.a,{mask:["(",/[1-9]/,/\d/,/\d/,")"," ",/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,/\d/],className:"form-control",placeholder:"Enter your phone number",name:"phone",id:"phone",value:r.phone,onKeyPress:function(e){return te(e)},disabled:k,ref:function(e){return h.current=Object(s.findDOMNode)(e)}})),l.a.createElement(J.a.Group,{controlId:"formBasicPassword"},l.a.createElement(J.a.Label,{className:"cardLabel"},"Password"),l.a.createElement(J.a.Control,{type:"password",placeholder:"Password",name:"password",onChange:te,value:r.password,disabled:k,onKeyPress:te,ref:b,autoComplete:"on"})),l.a.createElement(J.a.Group,{controlId:"formConfirmPassword"},l.a.createElement(J.a.Label,{className:"cardLabel"},"Confirm Password"),l.a.createElement(J.a.Control,{type:"password",placeholder:"Confirm Password",name:"confirmPassword",onChange:te,value:r.confirmPassword,disabled:k,onKeyPress:te,ref:f,autoComplete:"off"})),l.a.createElement(g.a.Footer,{className:P.cssClass},P.content?P.content:l.a.createElement("br",null)),l.a.createElement("br",null),l.a.createElement("div",{className:"d-flex flex-column"},l.a.createElement(D.a,{variant:"primary",type:"submit",onClick:ae,disabled:k,ref:v},"Submit")))),l.a.createElement("br",null),l.a.createElement("br",null)))})),ae=a(48),ne=a.n(ae);ne.a.setAppElement("#root");var le={content:{top:"40%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)"}},se={width:"50%"},re=function(e){Object(o.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(e=t.call.apply(t,[this].concat(l))).state={emailFP:e.props.email,message:"",classNameMessage:"",disableBtnReset:!1,disableBtnCancel:!1,label2:"Cancel"},e.handleChange=function(t){e.setState(Object(W.a)({},t.target.name,t.target.value)),"Enter"===t.key&&(t.preventDefault(),""!==e.state.emailFP&&e.resetPasswordBtn.click())},e.clearMessage=function(){setTimeout((function(){e.setState({message:"",disableBtnReset:!1,disableBtnCancel:!1})}),3500)},e.closeFTModal=function(){e.props.closeModal()},e.handleResetPassword=function(){var t=Object(Y.a)(z.a.mark((function t(a){var n;return z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),e.state.emailFP){t.next=7;break}e.setState({message:"Type a valid email to have the password reseted.",classNameMessage:"messageFailure",disableBtnReset:!0,disableBtnCancel:!0}),e.resetPasswordEmail.focus(),e.clearMessage(),t.next=20;break;case 7:return"/user/forgetPassword",t.prev=8,t.next=11,X.a.post("/user/forgetPassword",{data:{email:e.state.emailFP}});case 11:n=t.sent,console.log("@@@ forgetPassword",n),n.data.message?e.setState({message:"If <".concat(e.state.emailFP,"> is a valid email, you are about to receive an email with instructions to reset the password."),classNameMessage:"messageSuccess",disableBtnReset:!0,label2:"Close"}):(e.setState({message:n.data.error,classNameMessage:"messageFailure"}),e.clearMessage()),t.next=20;break;case 16:t.prev=16,t.t0=t.catch(8),e.setState({message:t.t0.message}),e.clearMessage();case 20:case"end":return t.stop()}}),t,null,[[8,16]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return l.a.createElement(ne.a,{isOpen:this.props.openFPModal,style:le},l.a.createElement(g.a,null,l.a.createElement(g.a.Header,{as:"h3"}," Reset Password "),l.a.createElement(g.a.Body,null,l.a.createElement(J.a,null,l.a.createElement(J.a.Label,null,"This procedure is going to send an email to reset the password."),l.a.createElement(J.a.Control,{autoFocus:!0,type:"email",placeholder:"Type the Email",name:"emailFP",value:this.state.emailFP,onChange:this.handleChange,onKeyPress:this.handleChange,ref:function(t){return e.resetPasswordEmail=t}}),l.a.createElement(g.a.Text,{className:this.state.classNameMessage},this.state.message),l.a.createElement("div",{className:"d-flex flex-column"},l.a.createElement(_.a,{className:"mt-3"},this.state.disableBtnReset?"":l.a.createElement(D.a,{variant:"info",style:se,disabled:this.state.disableBtnReset,onClick:this.handleResetPassword,ref:function(t){return e.resetPasswordBtn=t}}," Reset password "),l.a.createElement(D.a,{variant:this.state.disableBtnReset?"primary":"danger",disabled:this.state.disableBtnCancel,style:se,onClick:this.closeFTModal}," ",this.state.label2,"  ")))))))}}]),a}(n.Component),ce=function(e){Object(o.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(e=t.call.apply(t,[this].concat(l))).state={email:"",password:"",errorMsg:"",forgetPasswordModal:!1},e.handleChange=function(t){e.setState(Object(W.a)({},t.target.name,t.target.value)),"Enter"===t.key&&"email"===t.target.name&&""!==e.state.email&&e.textInput2.focus()},e.handleSubmit=function(t){if(t.preventDefault(),""!==e.state.email&&""!==e.state.password){fetch("/user/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.state.email,password:e.state.password})}).then((function(e){return e.json()})).then((function(t){if("message"in t){var a=t.user;a.id=a._id,a.token=t.token,e.props.dispatchLogin({user:a})}else"error"in t&&(e.setState({errorMsg:t.error,email:"",password:""}),e.clearMsg())})).catch((function(t){console.error(t),e.setState({errorMsg:t.message}),e.clearMsg()}))}},e.clearMsg=function(){setTimeout((function(){e.setState({errorMsg:""}),e.textInput1.focus()}),3500)},e.openModal=function(t){t.preventDefault(),e.setState({forgetPasswordModal:!0})},e.closeModal=function(){e.setState({forgetPasswordModal:!1})},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"formPosition"},l.a.createElement("br",null),l.a.createElement(g.a,{className:"card-settings"},l.a.createElement(g.a.Header,null,l.a.createElement("h2",null,"Login")),l.a.createElement(J.a,{onSubmit:this.handleSubmit},l.a.createElement(J.a.Group,{controlId:"formBasicEmail"},l.a.createElement("br",null),l.a.createElement(J.a.Label,null,"User's Email"),l.a.createElement(J.a.Control,{autoFocus:!0,type:"email",placeholder:"Type the user's email",name:"email",onChange:this.handleChange,onKeyPress:this.handleChange,value:this.state.email,ref:function(t){return e.textInput1=t}}),l.a.createElement(J.a.Text,{className:"text-muted"},"We'll never share your email with anyone else.")),l.a.createElement(J.a.Group,{controlId:"formBasicPassword",style:{marginBottom:"5px"}},l.a.createElement(J.a.Label,null,"Password"),l.a.createElement(J.a.Control,{type:"password",placeholder:"Password",name:"password",value:this.state.password,onChange:this.handleChange,onKeyPress:this.handleChange,ref:function(t){return e.textInput2=t}})),l.a.createElement("p",{style:{marginBottom:"20px",fontStyle:"italic",fontSize:"0.9rem",paddingLeft:"1rem"}},l.a.createElement("a",{href:window.location.hash,onClick:this.openModal},"Forget password")),this.state.forgetPasswordModal?l.a.createElement(re,{openFPModal:this.state.forgetPasswordModal,closeModal:this.closeModal,email:this.state.email}):"",l.a.createElement(g.a.Footer,{className:"messageFailure"},this.state.errorMsg?this.state.errorMsg:l.a.createElement("br",null)),l.a.createElement("div",{className:"d-flex flex-column"},l.a.createElement(D.a,{variant:"primary",type:"submit"},"Submit")))))}}]),a}(n.Component),ie=Object(h.b)(null,(function(e){return{dispatchLogin:function(t){return e({type:"LOGIN",data:t})}}}))(ce);var oe=Object(h.b)((function(e){return{storeUser:e.name}}),null)((function(e){return l.a.createElement("div",{style:{height:window.innerHeight-56-62}},l.a.createElement(g.a,{className:"homeBack"},l.a.createElement(g.a.Body,null,l.a.createElement(g.a.Title,null,"Home Page"),l.a.createElement("br",null),"Hi ",l.a.createElement("b",null,e.storeUser),l.a.createElement("br",null)," ",l.a.createElement("br",null),"With Clockin.js you are able to have all your clients data, their clockins and invoices, in one system. It is easy to manage and track your work with them.",l.a.createElement("br",null),"More information at ",l.a.createElement(d.b,{to:"/about"},"About"),", ",l.a.createElement(d.b,{to:"/guidance"},"Guidance")," or ",l.a.createElement(d.b,{to:"/contact"},"Contact"),".",l.a.createElement("br",null),l.a.createElement("br",null),"Enjoy and good work!!",l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("p",null,"Kind regards from"),l.a.createElement("b",null,"Clockin.js Team :)"))),l.a.createElement(L,{bckColor:"gainsboro",opac:"iconSettingsOpacity"}))})),me={width:"50%",paddingLeft:"0px",paddingRight:"0px"},de=function(e){Object(o.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleSubmit=function(){var e=Object(Y.a)(z.a.mark((function e(t){var a,l,s,r;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!n.state.name||!n.state.email){e.next=17;break}return a="user/".concat(n.state.userId),l={name:n.state.name,email:n.state.email,address:n.state.address,city:n.state.city,postalCode:n.state.postalCode,phone:n.state.phone},e.prev=4,e.next=7,X.a.patch(a,l,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n.props.storeToken)}});case 7:(s=e.sent).data.message?s.data.newData?(r={id:n.props.storeId,name:s.data.newData.name,email:s.data.newData.email,city:s.data.newData.city,address:s.data.newData.address,postalCode:s.data.newData.postalCode,phone:s.data.newData.phone,token:s.data.newData.token},n.setState({message:"Info has been updated.",classNameMessage:"messageSuccess",disableEdit:!0}),n.props.dispatchLogin({user:r})):n.setState({disableEdit:!0,message:s.data.message,classNameMessage:"messageSuccess"}):s.data.error&&n.setState({disableEdit:!0,message:s.data.error,classNameMessage:"messageFailure"}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(4),console.log("catch error: ",e.t0.message),n.setState({disableEdit:!0,message:e.t0.message,classNameMessage:"messageFailure"});case 15:e.next=18;break;case 17:!n.state.name&&n.state.email?(n.setState({message:"Please, name should be filled.",classNameMessage:"messageFailure"}),n.textInput1.focus()):!n.state.email&&n.state.name?(n.setState({message:"Please, email should be filled.",classNameMessage:"messageFailure"}),n.textInput2.focus()):n.state.name||n.state.email||(n.setState({message:"Please, at least name and email should be filled.",classNameMessage:"messageFailure"}),n.textInput1.focus());case 18:n.clearMessage();case 19:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}(),n.editForm=function(){n.setState({disableEdit:!1})},n.btnCancel=function(){n.setState({disableEdit:!0,name:n.props.storeName,email:n.props.storeEmail,city:n.props.storeCity,address:n.props.storeAddress,phone:n.props.storePhone,postalCode:n.props.storePostalCode})},n.clearMessage=function(){setTimeout((function(){n.setState({message:""})}),3e3)},n.handleAskChangePassowrd=function(){n.setState({showModal:!0,modalMessage:"Are you sure you want to change your password?"})},n.handleChangePassword=Object(Y.a)(z.a.mark((function e(){var t;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/user/forgetPassword",e.prev=1,e.next=4,X.a.post("/user/forgetPassword",{data:{email:n.state.email}});case 4:(t=e.sent).data.message?n.setState({message:"Your email <".concat(n.state.email,"> is going to receive an email with instructions to change your password."),classNameMessage:"messageSuccess"}):(n.setState({message:t.data.error,classNameMessage:"messageFailure"}),n.clearMessage()),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),n.setState({message:e.t0.message});case 11:setTimeout((function(){n.clearMessage()}),2e3);case 12:case"end":return e.stop()}}),e,null,[[1,8]])}))),n.handleChange=function(e){if("Enter"===e.key)switch(e.target.name){case"name":""!==n.state.name&&n.textInput3.focus();break;case"address":""!==n.state.address&&n.textInput4.focus();break;case"city":""!==n.state.city&&n.textInput5.focus();break;case"phone":""!==n.state.phone&&n.buttonSave.click()}("postalCode"!==e.target.name||e.target.value.length<7)&&n.setState(Object(W.a)({},e.target.name,e.target.value))},n.state={disableEdit:!0,userId:n.props.storeId,name:n.props.storeName,email:n.props.storeEmail,city:n.props.storeCity,address:n.props.storeAddress,phone:n.props.storePhone,postalCode:n.props.storePostalCode,message:"",tmp_name:"",tmp_email:"",tmp_city:"",tmp_address:"",tmp_phone:"",tmp_postalCode:"",showModal:!1},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"formPosition"},l.a.createElement("br",null),l.a.createElement(g.a,{className:"card-settings"},l.a.createElement(g.a.Header,{className:"cardTitle"},"User Information"),l.a.createElement(J.a,{className:"formPosition"},l.a.createElement("br",null),l.a.createElement(J.a.Group,{as:v.a,controlId:"formName"},l.a.createElement(J.a.Label,{column:!0,sm:4,className:"cardLabel",style:{paddingLeft:"0px"}},"Name"),l.a.createElement(f.a,{sm:8,style:{paddingLeft:"0px"}},l.a.createElement(J.a.Control,{disabled:this.state.disableEdit,type:"text",name:"name",onChange:this.handleChange,placeholder:"Your name",value:this.state.name||"",onKeyPress:this.handleChange,ref:function(t){return e.textInput1=t}}))),l.a.createElement(J.a.Group,{as:v.a,controlId:"formEmail"},l.a.createElement(J.a.Label,{column:!0,sm:4,className:"cardLabel",style:{paddingLeft:"0px"}},"Email"),l.a.createElement(f.a,{sm:8,style:{paddingLeft:"0px"}},l.a.createElement(J.a.Control,{disabled:!0,type:"text",name:"email",onChange:this.handleChange,placeholder:"Your email",value:this.state.email,onKeyPress:this.handleChange,ref:function(t){return e.textInput2=t}}))),l.a.createElement(J.a.Group,{as:v.a,controlId:"formAddress"},l.a.createElement(J.a.Label,{column:!0,sm:4,className:"cardLabel",style:{paddingLeft:"0px"}},"Address"),l.a.createElement(f.a,{sm:8,style:{paddingLeft:"0px"}},l.a.createElement(J.a.Control,{disabled:this.state.disableEdit,placeholder:"Type your address",type:"text",name:"address",onChange:this.handleChange,value:this.state.address||"",onKeyPress:this.handleChange,ref:function(t){return e.textInput3=t}}))),l.a.createElement(J.a.Group,{as:v.a,controlId:"formCity"},l.a.createElement(J.a.Label,{column:!0,sm:4,className:"cardLabel",style:{paddingLeft:"0px"}},"City:"),l.a.createElement(f.a,{sm:8,style:{paddingLeft:"0px"}},l.a.createElement(J.a.Control,{disabled:this.state.disableEdit,type:"text",name:"city",onChange:this.handleChange,placeholder:"Your city, please",value:this.state.city||"",onKeyDown:this.handleChange,ref:function(t){return e.textInput4=t}}))),l.a.createElement(J.a.Group,{as:v.a,controlId:"formPostalCode"},l.a.createElement(J.a.Label,{column:!0,sm:4,className:"cardLabel",style:{paddingLeft:"0px"}},"Postal Code"),l.a.createElement(f.a,{sm:5,style:{paddingLeft:"0px"}},l.a.createElement(J.a.Control,{disabled:this.state.disableEdit,type:"text",name:"postalCode",onChange:this.handleChange,value:this.state.postalCode||"",placeholder:"Type your Postal Code",onKeyDown:this.handleChange,ref:function(t){return e.textInput5=t}}))),l.a.createElement(J.a.Group,{as:v.a,controlId:"formPhone"},l.a.createElement(J.a.Label,{column:!0,sm:4,className:"cardLabel",style:{paddingLeft:"0px"}},"Phone"),l.a.createElement(f.a,{sm:5,style:{paddingLeft:"0px"}},l.a.createElement($.a,{mask:["(",/[1-9]/,/\d/,/\d/,")"," ",/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,/\d/],className:"form-control",placeholder:"Enter your phone number",name:"phone",onBlur:function(t){return e.handleChange(t)},value:this.state.phone||"",onKeyPress:this.handleChange,disabled:this.state.disableEdit,ref:function(t){return e.textInput6=t}})))),l.a.createElement(g.a.Footer,{className:this.state.classNameMessage},this.state.message?this.state.message:l.a.createElement("br",null)),l.a.createElement("div",{className:"d-flex flex-column"},this.state.disableEdit?l.a.createElement(_.a,{className:"mt-3"},l.a.createElement(D.a,{variant:"info",style:me,onClick:this.handleAskChangePassowrd},"Change Password"),l.a.createElement(D.a,{variant:"primary",style:me,onClick:this.editForm},"Edit data")):l.a.createElement(_.a,{className:"mt-3"},l.a.createElement(D.a,{variant:"success",style:me,onClick:this.handleSubmit,ref:function(t){return e.buttonSave=t}},"Save "),l.a.createElement(D.a,{variant:"danger",style:me,onClick:this.btnCancel}," Cancel ")))),l.a.createElement("br",null),l.a.createElement("br",null),this.state.showModal?l.a.createElement(G,{openModal:!0,message:this.state.modalMessage,noMethod:function(){return e.setState({showModal:!1})},yesMethod:function(){"You are going to receive an email with the instructions to modify your password."===e.state.modalMessage?(e.handleChangePassword(),e.setState({showModal:!1})):e.setState({showModal:!0,modalMessage:"You are going to receive an email with the instructions to modify your password."})}}):"")}}]),a}(n.Component),ue=Object(h.b)((function(e){return{storeToken:e.token,storeId:e.id,storeEmail:e.email,storeName:e.name,storeCity:e.city,storeAddress:e.address,storePostalCode:e.postalCode,storePhone:e.phone}}),(function(e){return{dispatchLogin:function(t){return e({type:"LOGIN",data:t})}}}))(de),he=a(84),pe=a(31),Ee=a(112);var ge=Object(h.b)((function(e){return{storeToken:e.token}}),(function(e){return{noUser:function(){return e({type:"LOGOUT"})}}}))((function(e){var t=Object(n.useState)(""),a=Object(A.a)(t,2),s=a[0],r=a[1],c=Object(n.useState)(""),i=Object(A.a)(c,2),o=i[0],m=i[1],d=Object(n.useState)(""),h=Object(A.a)(d,2),p=h[0],E=h[1],g=Object(n.useState)(""),b=Object(A.a)(g,2),f=b[0],v=b[1];Object(n.useEffect)((function(){y()}),[e.updateButton]);var y=function(){var t=Object(Y.a)(z.a.mark((function t(){var a,n,l,s,c;return z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"/client",a=e.askInvoiceSample||!1,t.prev=2,t.next=5,X.a.get("/client",{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e.storeToken),askinvoicesample:a}});case 5:if(!(n=t.sent).data.count){t.next=16;break}return t.next=9,n.data.message.map((function(e){return e}));case 9:return l=t.sent,t.next=12,l.sort((function(e,t){return(e.nickname||e.name).toUpperCase()>(t.nickname||t.name).toUpperCase()?1:-1}));case 12:s=t.sent,e.invoiceFlag?r(n.data.message.filter((function(e){return!e.linked_company}))):e.punchinFlag?r(n.data.message.filter((function(e){return!e.isCompany}))):e.notKidFlag?(e.sureCompany&&e.sureCompany(),r(n.data.message.filter((function(e){return!e.type_kid})))):e.report?(c=[{name:"All Clients"}].concat(Object(he.a)(s)),r(c)):r(n.data.message),t.next=17;break;case 16:n.data.error&&v(!0);case 17:t.next=22;break;case 19:t.prev=19,t.t0=t.catch(2),m(t.t0.message);case 22:case"end":return t.stop()}}),t,null,[[2,19]])})));return function(){return t.apply(this,arguments)}}(),C=function(t,a){t.preventDefault(),e.clientListFlag?e.getCompanyInfo(a):e.getClientInfo(a)};return l.a.createElement(l.a.Fragment,null,p&&l.a.createElement(u.a,{to:"/land"}),f&&l.a.createElement(G,{openModal:f,message:"User needs to login again.",noMethod:function(){e.noUser(),E(!0),v(!1)}}),s.length?l.a.createElement(Ee.a,{id:"dropdown-basic",disabled:e.onlyOneClient,variant:e.invoiceFlag||e.notKidFlag?"info":"success",title:e.companyId&&s.filter((function(t){return t._id===e.companyId}))[0].name||e.client&&(e.client.nickname||e.client.name)||(e.notKidFlag?"Select Company":e.invoiceFlag?"Select Client/Company":"Select Client")},e.bringAllClients?l.a.createElement(l.a.Fragment,null,s.map((function(e,t){return l.a.createElement(pe.a.Item,{key:t,onClick:function(t){return C(t,e)},name:e.name}," ",e.nickname||e.name)}))):l.a.createElement(l.a.Fragment,null,s.map((function(e,t){return!e.inactive&&l.a.createElement(pe.a.Item,{key:t,onClick:function(t){return C(t,e)},name:e.name}," ",e.nickname||e.name)})))):o||e.notKidFlag?"No company at this time":"No clients at all")})),be=function(e){Object(o.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={name:"",nickname:"",birthday:"",mother:"",mPhone:"",mEmail:"",father:"",fPhone:"",fEmail:"",consultant:"",cPhone:"",cEmail:"",defaultRate:"",message:"",className:"",disableBtn:!1,messageControlName:"",messageControlNickname:"",messageControlDefaultRate:"",company:"",linkClientToCompany:!1,rateAsPerCompany:!1,disableRate:!1,companyRate:"",companyFree:!0},e.handleChange=function(t){if("Enter"===t.key)switch(t.target.name){case"name":""!==e.state.name&&e.textInput2.focus();break;case"nickname":""!==e.state.nickname&&e.textInput3.focus();break;case"birthday":""!==e.state.birthday&&e.textInput4.focus();break;case"mPhone":""!==e.state.mPhone&&e.textInput6.focus();break;case"mEmail":""!==e.state.mEmail&&e.textInput7.focus();break;case"fPhone":""!==e.state.fPhone&&e.textInput9.focus();break;case"fEmail":""!==e.state.fEmail&&e.textInput10.focus();break;case"cPhone":""!==e.state.cPhone&&e.textInput12.focus();break;case"cEmail":""!==e.state.cEmail&&e.textInput13.focus();break;case"defaultRate":""!==e.state.defaultRate&&e.buttonSave.click()}e.setState(Object(W.a)({},t.target.name,t.target.value)),"name"===t.target.name&&e.state.messageControlName&&e.setState({messageControlName:""}),"nickname"===t.target.name&&e.state.messageControlNickname&&e.setState({messageControlNickname:""}),"defaultRate"===t.target.name&&e.state.messageControlDefaultRate&&e.setState({messageControlDefaultRate:""})},e.handleSubmit=function(){var t=Object(Y.a)(z.a.mark((function t(a){var n,s;return z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),window.scrollTo(0,2e3),e.state.name&&e.state.nickname&&e.state.defaultRate){t.next=8;break}e.state.defaultRate||(e.setState({messageControlDefaultRate:"Please inform the default rate($) or Company."}),e.textInput13.focus()),e.state.nickname||(window.scrollTo(0,0),e.setState({messageControlNickname:"Please inform Client's nickname."}),e.textInput2.focus()),e.state.name||(window.scrollTo(0,0),e.setState({messageControlName:"Please inform Client's name."}),e.textInput1.focus()),t.next=26;break;case 8:if(!e.state.linkClientToCompany||e.state.company||e.state.companyFree){t.next=12;break}e.setState({message:"Please, select company.",className:"messageFailure"}),t.next=26;break;case 12:return e.setState({disableBtn:!0}),"/client",n={name:e.state.name,nickname:e.state.nickname,birthday:e.state.birthday||void 0,mother:e.state.mother||void 0,mPhone:e.state.mPhone||void 0,mEmail:e.state.mEmail||void 0,father:e.state.father||void 0,fPhone:e.state.fPhone||void 0,fEmail:e.state.fEmail||void 0,consultant:e.state.consultant||void 0,cPhone:e.state.cPhone||void 0,cEmail:e.state.cEmail||void 0,defaultRate:e.state.defaultRate,typeKid:!0,linkedCompany:e.state.company._id||void 0,rateAsPerCompany:e.state.companyFree?void 0:e.state.rateAsPerCompany||void 0},t.prev=15,t.next=18,X.a.post("/client",n,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e.props.storeToken)}});case 18:(s=t.sent).data.message?(e.setState({message:l.a.createElement("p",null,"Client ",l.a.createElement("b",null,e.state.nickname)," has been created."),className:"messageSuccess"}),e.clearMessage()):s.data.error&&e.setState({message:s.data.error,className:"messageFailure"}),t.next=26;break;case 22:t.prev=22,t.t0=t.catch(15),e.setState({message:t.t0.message,className:"messageFailure"}),e.clearMessage();case 26:case"end":return t.stop()}}),t,null,[[15,22]])})));return function(e){return t.apply(this,arguments)}}(),e.clearMessage=function(){setTimeout((function(){e.setState({name:"",nickname:"",birthday:"",mother:"",mPhone:"",mEmail:"",father:"",fPhone:"",fEmail:"",consultant:"",cPhone:"",cEmail:"",defaultRate:"",disableRate:!1,linkClientToCompany:!1,message:"",disableBtn:!1,company:"",companyRate:"",rateAsPerCompany:!1,companyFree:!0}),window.scrollTo(0,0),e.textInput1.focus()}),3500)},e.afterChange=function(t){e.setState(Object(W.a)({},t.target.name,t.target.value))},e.getClientInfo=function(t){e.setState({company:t,message:"",companyRate:t.default_rate,defaultRate:e.state.rateAsPerCompany?t.default_rate:e.state.defaultRate,messageControlDefaultRate:"",companyFree:!1})},e.YNComponent=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(J.a.Group,{controlId:"formLinkClient"},l.a.createElement(J.a.Label,{className:"cardLabel"}," Link Client to a Company? "),l.a.createElement(J.a.Group,{className:"form-check-inline"},l.a.createElement(J.a.Check,{style:window.innerWidth<=700?{marginLeft:"0px"}:{marginLeft:"2rem"},inline:!0,label:"Yes",checked:e.state.linkClientToCompany,type:"radio",onChange:function(){return e.setState({linkClientToCompany:!0,rateAsPerCompany:!0,disableRate:!0})}}),l.a.createElement(J.a.Check,{inline:!0,label:"No",checked:!e.state.linkClientToCompany,type:"radio",style:{marginLeft:"1rem"},onChange:function(){return e.setState({linkClientToCompany:!1,disableRate:!1,company:"",companyRate:""})}}),e.state.linkClientToCompany&&window.innerWidth<=700&&l.a.createElement("div",{className:"gridClientBtContainer"},l.a.createElement(ge,{client:e.state.company,notKidFlag:!0,getClientInfo:e.getClientInfo}))),e.state.linkClientToCompany&&window.innerWidth>700&&l.a.createElement("div",{className:"gridClientBtContainer"},l.a.createElement(ge,{client:e.state.company,notKidFlag:!0,getClientInfo:e.getClientInfo}))))},e.changeRateCheck=function(){e.setState({defaultRate:e.state.rateAsPerCompany?e.state.defaultRate:e.state.companyRate,rateAsPerCompany:!e.state.rateAsPerCompany,disableRate:!e.state.disableRate},(function(){return e.textInput13.focus()}))},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"formPosition"},l.a.createElement("br",null),l.a.createElement(g.a,{className:"card-settings"},l.a.createElement(g.a.Header,null,l.a.createElement("h2",null,"New Kid Client")),l.a.createElement(J.a,{autoComplete:"off",onSubmit:this.handleSubmit,className:"formPosition",style:{width:"30rem"}},l.a.createElement(J.a.Group,{controlId:"formName"},l.a.createElement("br",null),l.a.createElement(J.a.Label,{className:"cardLabel"},"Name"),l.a.createElement(J.a.Control,{autoFocus:!0,type:"text",placeholder:"Client's name",name:"name",onChange:this.handleChange,value:this.state.name,onKeyPress:this.handleChange,ref:function(t){return e.textInput1=t}}),l.a.createElement(J.a.Text,{className:"messageControl-user"},this.state.messageControlName)),l.a.createElement(J.a.Group,{controlId:"formNickname"},l.a.createElement(J.a.Label,{className:"cardLabel"},"Nickname"),l.a.createElement(J.a.Control,{type:"text",placeholder:"Client's nickname",name:"nickname",onChange:this.handleChange,value:this.state.nickname,onKeyPress:this.handleChange,ref:function(t){return e.textInput2=t}}),l.a.createElement(J.a.Text,{className:"messageControl-user"},this.state.messageControlNickname)),l.a.createElement(J.a.Group,{controlId:"formBirthday"},l.a.createElement(J.a.Label,{className:"cardLabel"},"Birthday"),l.a.createElement(J.a.Control,{type:"date",placeholder:"Client's birthday",name:"birthday",onChange:this.handleChange,value:this.state.birthday,onKeyPress:this.handleChange,ref:function(t){return e.textInput3=t}})),l.a.createElement(J.a.Group,{controlId:"formMother"},l.a.createElement(J.a.Label,{className:"cardLabel"},"Mother"),l.a.createElement(J.a.Control,{type:"text",placeholder:"Client's mother name",name:"mother",onChange:this.handleChange,value:this.state.mother,onKeyPress:this.handleChange,ref:function(t){return e.textInput4=t}})),l.a.createElement(J.a.Group,{controlId:"formMPhone"},l.a.createElement(J.a.Label,{className:"cardLabel"},"Mother's Phone"),l.a.createElement($.a,{mask:["(",/[1-9]/,/\d/,/\d/,")"," ",/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,/\d/],className:"form-control",placeholder:"Mother's phone number",name:"mPhone",id:"mPhone",onBlur:function(t){return e.afterChange(t)},value:this.state.mPhone,onKeyPress:this.handleChange,ref:function(t){return e.textInput5=t}})),l.a.createElement(J.a.Group,{controlId:"formBasicEmail"},l.a.createElement(J.a.Label,{className:"cardLabel"},"Mother's Email address"),l.a.createElement(J.a.Control,{type:"email",pattern:"[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$",placeholder:"Mother's email",name:"mEmail",onChange:this.handleChange,value:this.state.mEmail,onKeyPress:this.handleChange,ref:function(t){return e.textInput6=t}})),l.a.createElement(J.a.Group,{controlId:"formFather"},l.a.createElement(J.a.Label,{className:"cardLabel"},"Father"),l.a.createElement(J.a.Control,{type:"text",placeholder:"Client's father name",name:"father",onChange:this.handleChange,value:this.state.father,onKeyPress:this.handleChange,ref:function(t){return e.textInput7=t}})),l.a.createElement(J.a.Group,{controlId:"formFPhone"},l.a.createElement(J.a.Label,{className:"cardLabel"},"Father's Phone"),l.a.createElement($.a,{mask:["(",/[1-9]/,/\d/,/\d/,")"," ",/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,/\d/],className:"form-control",placeholder:"Father's phone number",name:"fPhone",id:"fPhone",onBlur:function(t){return e.afterChange(t)},value:this.state.fPhone,onKeyPress:this.handleChange,ref:function(t){return e.textInput8=t}})),l.a.createElement(J.a.Group,{controlId:"formFEmail"},l.a.createElement(J.a.Label,{className:"cardLabel"},"Father's Email address"),l.a.createElement(J.a.Control,{type:"email",pattern:"[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$",placeholder:"Father's email",name:"fEmail",onChange:this.handleChange,value:this.state.fEmail,onKeyPress:this.handleChange,ref:function(t){return e.textInput9=t}})),l.a.createElement(J.a.Group,{controlId:"formConsultant"},l.a.createElement(J.a.Label,{className:"cardLabel"},"Consultant"),l.a.createElement(J.a.Control,{type:"text",placeholder:"Consultant's name",name:"consultant",onChange:this.handleChange,value:this.state.consultant,onKeyPress:this.handleChange,ref:function(t){return e.textInput10=t}})),l.a.createElement(J.a.Group,{controlId:"formCPhone"},l.a.createElement(J.a.Label,{className:"cardLabel"},"Consultant's Phone"),l.a.createElement($.a,{mask:["(",/[1-9]/,/\d/,/\d/,")"," ",/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,/\d/],className:"form-control",placeholder:"Consultant's phone number",name:"cPhone",id:"cPhone",onBlur:function(t){return e.afterChange(t)},value:this.state.cPhone,onKeyPress:this.handleChange,ref:function(t){return e.textInput11=t}})),l.a.createElement(J.a.Group,{controlId:"formCEmail"},l.a.createElement(J.a.Label,{className:"cardLabel"},"Consultant's Email address"),l.a.createElement(J.a.Control,{type:"email",pattern:"[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$",placeholder:"Consultant's email",name:"cEmail",onChange:this.handleChange,value:this.state.cEmail,onKeyPress:this.handleChange,ref:function(t){return e.textInput12=t}})),this.state.linkClientToCompany&&this.YNComponent(),l.a.createElement(J.a.Group,{controlId:"formDefaultRate"},l.a.createElement(J.a.Label,{className:"cardLabel"},"Rate"),this.state.linkClientToCompany&&this.state.company&&l.a.createElement(J.a.Check,{inline:!0,label:"Rate as per company ?",checked:this.state.rateAsPerCompany,type:"checkbox",style:{marginLeft:"1rem"},onChange:this.changeRateCheck}),l.a.createElement(J.a.Control,{type:"number",placeholder:"Hourly rate - CAD$",name:"defaultRate",onChange:this.handleChange,value:this.state.defaultRate,onKeyPress:this.handleChange,ref:function(t){return e.textInput13=t},disabled:!!this.state.company&&this.state.disableRate}),l.a.createElement(J.a.Text,{className:"messageControl-user"},this.state.messageControlDefaultRate)),!this.state.linkClientToCompany&&this.YNComponent(),l.a.createElement(g.a.Footer,{className:this.state.className},this.state.message?this.state.message:l.a.createElement("br",null)),l.a.createElement("div",{className:"d-flex flex-column"},l.a.createElement(D.a,{disabled:this.state.disableBtn,variant:"primary",type:"submit",ref:function(t){return e.buttonSave=t}},"Save")))),l.a.createElement("br",null),l.a.createElement("br",null))}}]),a}(n.Component),fe=Object(h.b)((function(e){return{storeToken:e.token}}),null)(be),ve=(a(166),function(e){var t=new Date(e.substring(0,10)),a=t.getUTCMonth()+1;return t.getUTCFullYear()+"-"+(a<10?"0".concat(a):a)+"-"+(t.getUTCDate()<10?"0".concat(t.getUTCDate()):t.getUTCDate())}),ye=function(e){Object(o.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.setState(Object(W.a)({},e.target.name,e.target.value)),"name"===e.target.name&&n.state.messageControlName&&n.setState({messageControlName:""}),"nickname"===e.target.name&&n.state.messageControlNickname&&n.setState({messageControlNickname:""}),"defaultRate"===e.target.name&&n.state.messageControlDefaultRate&&n.setState({messageControlDefaultRate:""})},n.handlePostalCode=function(e){var t=e.target.value;n.setState({postalCode:isNaN(t)?t.toUpperCase():t})},n.handleSubmit=function(){var e=Object(Y.a)(z.a.mark((function e(t){var a,l,s,r,c,i;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=!!n.state.name&&n.state.name.trim(),l=!!n.state.nickname&&n.state.nickname.trim(),s=!!n.state.defaultRate&&n.state.defaultRate.trim(),a&&s&&(!n.state.typeKid||l)){e.next=8;break}s||(n.setState({messageControlDefaultRate:"Please inform the default rate($)."}),n.textInput13.focus()),n.state.typeKid&&(l||(window.scrollTo(0,0),n.setState({messageControlNickname:"Please inform Client's nickname."}),n.textInput2.focus())),a||(window.scrollTo(0,0),n.setState({messageControlName:"Please inform Client's name."}),n.textInput1.focus()),e.next=21;break;case 8:return r={clientId:n.state.clientId||void 0,name:a,default_rate:s,nickname:n.state.typeKid?l:void 0,birthday:n.state.birthday||void 0,mother:n.state.mother||(n.state.tmp_mother?"":void 0),mPhone:n.state.mPhone||(n.state.tmp_mPhone?"":void 0),mEmail:n.state.mEmail||(n.state.tmp_mEmail?"":void 0),father:n.state.father||(n.state.tmp_father?"":void 0),fPhone:n.state.fPhone||(n.state.tmp_fPhone?"":void 0),fEmail:n.state.fEmail||(n.state.tmp_fEmail?"":void 0),consultant:n.state.consultant||(n.state.tmp_consultant?"":void 0),cPhone:n.state.cPhone||(n.state.tmp_cPhone?"":void 0),cEmail:n.state.cEmail||(n.state.tmp_cEmail?"":void 0),typeKid:n.state.typeKid||void 0,email:n.state.email||(n.state.tmp_email?"":void 0),phone:n.state.phone||(n.state.tmp_phone?"":void 0),city:n.state.city||(n.state.tmp_city?"":void 0),address:n.state.address||(n.state.tmp_address?"":void 0),province:n.state.province||(n.state.tmp_province?"":void 0),postal_code:n.state.postalCodeChange&&!n.state.pcOutsideCanada?n.state.postalCode.substr(0,6).split(" ").join(""):n.state.postalCode||void 0,type_of_service:n.state.typeOfService||(n.state.tmp_typeOfService?"":void 0),inactive:n.state.inactive,showRate:n.state.showRate,showNotes:n.state.showNotes,linkedCompany:n.state.company?n.state.company._id:void 0,rateAsPerCompany:n.state.company?n.state.rateAsPerCompany:void 0},c="/client/".concat(r.clientId),e.prev=10,e.next=13,X.a.patch(c,r,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n.props.storeToken)}});case 13:(i=e.sent).data.message?i.data.newData?n.setState({message:"".concat(i.data.newData.nickname||i.data.newData.name," has been changed"),name:i.data.newData.name,nickname:i.data.newData.nickname,birthday:i.data.newData.birthday&&ve(i.data.newData.birthday)||"",mother:i.data.newData.mother||"",mPhone:i.data.newData.mphone||"",mEmail:i.data.newData.memail||"",father:i.data.newData.father||"",fPhone:i.data.newData.fphone||"",fEmail:i.data.newData.femail||"",cPhone:i.data.newData.cphone||"",cEmail:i.data.newData.cemail||"",consultant:i.data.newData.consultant||"",defaultRate:i.data.newData.default_rate||"",className:"messageSuccess",email:i.data.newData.email||"",phone:i.data.newData.phone||"",city:i.data.newData.city||"",address:i.data.newData.address||"",province:i.data.newData.province||"",postal_code:i.data.newData.postalCode||"",type_of_service:i.data.newData.typeOfService||"",updateButton:!n.state.updateButton,inactive:i.data.newData.inactive||"",sureCompany:!1,linkClientToCompany:n.state.company||!1}):n.setState({message:i.data.message,className:"messageSuccess",linkClientToCompany:n.state.company||!1}):i.data.error&&n.setState({message:i.data.error,className:"messageFailure"}),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(10),n.setState({message:e.t0.message,className:"messageFailure"});case 20:n.clearMessage();case 21:case"end":return e.stop()}}),e,null,[[10,17]])})));return function(t){return e.apply(this,arguments)}}(),n.clearMessage=function(){n.setState({disableEditForm:!0}),setTimeout((function(){n.setState({message:""})}),3e3)},n.getClientInfo=function(e){var t=e._id,a=e.name,l=e.nickname;n.setState({client:e,clientId:t,name:a,defaultRate:e.default_rate,pcOutsideCanada:!!(e.postal_code&&e.postal_code.length>6),nickname:l,birthday:e.birthday&&ve(e.birthday)||"",mother:e.mother||"",mPhone:e.mphone||"",mEmail:e.memail||"",father:e.father||"",fPhone:e.fphone||"",fEmail:e.femail||"",consultant:e.consultant||"",cPhone:e.cphone||"",cEmail:e.cemail||"",typeKid:e.type_kid||"",email:e.email||"",phone:e.phone||"",city:e.city||"",address:e.address||"",province:e.province||"",postalCode:e.postal_code||"",typeOfService:e.type_of_service||"",disableEditForm:!0,inactive:e.inactive||"",showRate:e.showRate||"",showNotes:e.showNotes||"",linkClientToCompany:!!e.linked_company,companyId:e.linked_company||"",rateAsPerCompany:e.rate_as_per_company||""})},n.editForm=function(){n.setState({disableEditForm:!1,tmp_name:n.state.name,tmp_nickname:n.state.nickname,tmp_birthday:n.state.birthday,tmp_mother:n.state.mother,tmp_mPhone:n.state.mPhone,tmp_mEmail:n.state.mEmail,tmp_father:n.state.father,tmp_fPhone:n.state.fPhone,tmp_fEmail:n.state.fEmail,tmp_consultant:n.state.consultant,tmp_cPhone:n.state.cPhone,tmp_cEmail:n.state.cEmail,tmp_defaultRate:n.state.defaultRate,tmp_email:n.state.email,tmp_phone:n.state.phone,tmp_city:n.state.city,tmp_address:n.state.address,tmp_province:n.state.province,tmp_postalCode:n.state.postalCode,tmp_typeOfService:n.state.typeOfService,tmp_inactive:n.state.inactive,tmp_showRate:n.state.showRate,tmp_showNotes:n.state.showNotes,tmp_linkClientToCompany:n.state.linkClientToCompany,tmp_companyId:n.state.companyId})},n.btnCancel=function(){n.setState({disableEditForm:!0,name:n.state.tmp_name,nickname:n.state.tmp_nickname,birthday:n.state.tmp_birthday,mother:n.state.tmp_mother,mPhone:n.state.tmp_mPhone,mEmail:n.state.tmp_mEmail,father:n.state.tmp_father,fPhone:n.state.tmp_fPhone,fEmail:n.state.tmp_fEmail,consultant:n.state.tmp_consultant,cPhone:n.state.tmp_cPhone,cEmail:n.state.tmp_cEmail,defaultRate:n.state.tmp_defaultRate,email:n.state.tmp_email,phone:n.state.tmp_phone,city:n.state.tmp_city,address:n.state.tmp_address,province:n.state.tmp_province,postalCode:n.state.tmp_postalCode,typeOfService:n.state.tmp_typeOfService,inactive:n.state.tmp_inactive,showRate:n.state.tmp_showRate,showNotes:n.state.tmp_showNotes,linkClientToCompany:n.state.tmp_linkClientToCompany,companyId:n.state.tmp_companyId})},n.afterChange=function(e){n.setState(Object(W.a)({},e.target.name,e.target.value))},n.handleCheckPostalCode=function(){n.setState({pcOutsideCanada:!n.state.pcOutsideCanada,postalCodeChange:!n.state.postalCodeChange})},n.YNComponent=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(J.a.Group,{controlId:"formLinkClient"},l.a.createElement(J.a.Label,{className:"cardLabel form-check-inline"}," Link Client to a Company? "),l.a.createElement(J.a.Check,{style:{marginLeft:"2rem"},inline:!0,label:"Yes",checked:n.state.linkClientToCompany,type:"radio",disabled:n.state.disableEditForm,onChange:function(){return n.setState({linkClientToCompany:!0,rateAsPerCompany:!!n.state.sureCompany||void 0,disableRate:!0})}}),l.a.createElement(J.a.Check,{inline:!0,label:"No",checked:!n.state.linkClientToCompany,type:"radio",style:{marginLeft:"1rem"},disabled:n.state.disableEditForm,onChange:function(){return n.setState({linkClientToCompany:!1,disableRate:!1,defaultRate:n.state.tmp_defaultRate,company:"",rateAsPerCompany:!1,companyId:""})}}),n.state.linkClientToCompany&&l.a.createElement("div",{className:"gridClientBtContainer"},l.a.createElement(ge,{companyId:n.state.companyId,client:n.state.company,notKidFlag:!0,clientListFlag:!0,sureCompany:n.sureCompany,getCompanyInfo:n.getCompanyInfo,onlyOneClient:n.state.disableEditForm}))))},n.sureCompany=function(e){n.setState({sureCompany:!0,rateAsPerCompany:!0,company:e})},n.changeRateCheck=function(){n.setState({defaultRate:n.state.rateAsPerCompany?n.state.defaultRate:n.state.companyRate,rateAsPerCompany:!n.state.rateAsPerCompany,disableRate:!n.state.disableRate},(function(){return n.textInput13.focus()}))},n.getCompanyInfo=function(e){n.setState({company:e,message:"",companyRate:e.default_rate,defaultRate:n.state.rateAsPerCompany?e.default_rate:n.state.defaultRate,companyId:e._id,messageControlDefaultRate:""})},n.state={message:"",disableEditForm:!0,client:"",clientId:"",name:"",nickname:"",birthday:"",mother:"",mPhone:"",mEmail:"",father:"",fPhone:"",fEmail:"",consultant:"",cPhone:"",cEmail:"",defaultRate:"",typeKid:"",tmp_name:"",tmp_nickname:"",tmp_birthday:"",tmp_mother:"",tmp_mPhone:"",tmp_mEmail:"",tmp_father:"",tmp_fPhone:"",tmp_fEmail:"",tmp_consultant:"",tmp_cPhone:"",tmp_cEmail:"",tmp_defaultRate:"",className:"",email:"",phone:"",city:"",address:"",province:"",postalCode:"",typeOfService:"",tmp_email:"",tmp_phone:"",tmp_city:"",tmp_address:"",tmp_province:"",tmp_postalCode:"",tmp_typeOfService:"",updateButton:!1,pcOutsideCanada:!1,postalCodeChange:!1,inactive:!1,showRate:!0,showNotes:!0,tmp_showRate:!0,tmp_showNotes:!0,company:"",linkClientToCompany:!1,rateAsPerCompany:!1,disableRate:!1,companyRate:"",sureCompany:!1,tmp_linkClientToCompany:"",tmp_companyId:"",linkedCompany:""},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"formPosition"},l.a.createElement("br",null),l.a.createElement(g.a,{className:"card-settings"},l.a.createElement(g.a.Header,null,"Your Client's list"),l.a.createElement(g.a.Body,null,l.a.createElement("div",{className:"gridClientBtContainer"},l.a.createElement(ge,{client:this.state.client,getClientInfo:this.getClientInfo,updateButton:this.state.updateButton,bringAllClients:!0})))),this.state.clientId?l.a.createElement("div",null,l.a.createElement(g.a,{className:"card-settings"},l.a.createElement(J.a,{autoComplete:"off",onSubmit:this.handleSubmit,className:"formPosition",style:{width:"30rem"}},l.a.createElement(J.a.Group,{controlId:"formName"},l.a.createElement(D.a,{style:{width:"50%"},onClick:function(){return e.setState({inactive:!e.state.inactive})},variant:this.state.inactive?"danger":"primary",disabled:this.state.disableEditForm},"Client is ",l.a.createElement("strong",null,this.state.inactive?"Inactive":"Active")),l.a.createElement("br",null)," ",l.a.createElement("br",null),l.a.createElement(J.a.Label,{className:"cardLabel"},"Name"),l.a.createElement(J.a.Control,{type:"text",placeholder:"Type the client's name",name:"name",onChange:this.handleChange,value:this.state.name,onKeyPress:this.handleChange,disabled:this.state.disableEditForm,ref:function(t){return e.textInput1=t}}),l.a.createElement(J.a.Text,{className:"messageControl-user"},this.state.messageControlName)),this.state.typeKid?l.a.createElement(l.a.Fragment,null,l.a.createElement(J.a.Group,{controlId:"formNickname"},l.a.createElement(J.a.Label,{className:"cardLabel"},"Nickname"),l.a.createElement(J.a.Control,{type:"text",placeholder:"Type the client's nickname",name:"nickname",onChange:this.handleChange,value:this.state.nickname,onKeyPress:this.handleChange,disabled:this.state.disableEditForm,ref:function(t){return e.textInput2=t}}),l.a.createElement(J.a.Text,{className:"messageControl-user"},this.state.messageControlNickname)),l.a.createElement(J.a.Group,{controlId:"formBirthday"},l.a.createElement(J.a.Label,{className:"cardLabel"},"Birthday"),l.a.createElement(J.a.Control,{type:"date",name:"birthday",onChange:this.handleChange,value:this.state.birthday,disabled:this.state.disableEditForm})),l.a.createElement(J.a.Group,{controlId:"formMother"},l.a.createElement(J.a.Label,{className:"cardLabel"},"Mother"),l.a.createElement(J.a.Control,{type:"text",placeholder:"Type the client's mother name",name:"mother",onChange:this.handleChange,value:this.state.mother,onKeyPress:this.handleChange,disabled:this.state.disableEditForm})),l.a.createElement(J.a.Group,{controlId:"formMPhone"},l.a.createElement(J.a.Label,{className:"cardLabel"},"Mother's Phone"),l.a.createElement($.a,{mask:["(",/[1-9]/,/\d/,/\d/,")"," ",/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,/\d/],className:"form-control",placeholder:"Enter mother's phone number",name:"mPhone",onBlur:function(t){return e.afterChange(t)},value:this.state.mPhone,onKeyPress:this.handleChange,disabled:this.state.disableEditForm})),l.a.createElement(J.a.Group,{controlId:"formMEmail"},l.a.createElement(J.a.Label,{className:"cardLabel"},"Mother's Email address"),l.a.createElement(J.a.Control,{type:"email",pattern:"[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,}$",placeholder:"Type the mother's email",name:"mEmail",onChange:this.handleChange,value:this.state.mEmail,onKeyPress:this.handleChange,disabled:this.state.disableEditForm})),l.a.createElement(J.a.Group,{controlId:"formFather"},l.a.createElement(J.a.Label,{className:"cardLabel"},"Father"),l.a.createElement(J.a.Control,{type:"text",placeholder:"Type the client's father name",name:"father",onChange:this.handleChange,value:this.state.father,onKeyPress:this.handleChange,disabled:this.state.disableEditForm})),l.a.createElement(J.a.Group,{controlId:"formFPhone"},l.a.createElement(J.a.Label,{className:"cardLabel"},"Father's Phone"),l.a.createElement($.a,{mask:["(",/[1-9]/,/\d/,/\d/,")"," ",/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,/\d/],className:"form-control",placeholder:"Enter father's phone number",name:"fPhone",id:"fPhone",onBlur:function(t){return e.afterChange(t)},value:this.state.fPhone,onKeyPress:function(){return e.handleChange},disabled:this.state.disableEditForm})),l.a.createElement(J.a.Group,{controlId:"formFEmail"},l.a.createElement(J.a.Label,{className:"cardLabel"},"Father's Email address"),l.a.createElement(J.a.Control,{type:"email",pattern:"[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,}$",placeholder:"Type father's email",name:"fEmail",onChange:this.handleChange,value:this.state.fEmail,onKeyPress:this.handleChange,disabled:this.state.disableEditForm})),l.a.createElement(J.a.Group,{controlId:"formConsultant"},l.a.createElement(J.a.Label,{className:"cardLabel"},"Consultant"),l.a.createElement(J.a.Control,{type:"text",placeholder:"Type consultant's name",name:"consultant",onChange:this.handleChange,value:this.state.consultant,onKeyPress:this.handleChange,disabled:this.state.disableEditForm})),l.a.createElement(J.a.Group,{controlId:"formCPhone"},l.a.createElement(J.a.Label,{className:"cardLabel"},"Consultant's Phone"),l.a.createElement($.a,{mask:["(",/[1-9]/,/\d/,/\d/,")"," ",/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,/\d/],className:"form-control",placeholder:"Enter consultant's phone number",name:"cPhone",id:"cPhone",onBlur:function(t){return e.afterChange(t)},value:this.state.cPhone,onKeyPress:this.handleChange,disabled:this.state.disableEditForm})),l.a.createElement(J.a.Group,{controlId:"formCEmail"},l.a.createElement(J.a.Label,{className:"cardLabel"},"Consultant's Email address"),l.a.createElement(J.a.Control,{type:"email",pattern:"[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,}$",placeholder:"Type consultant's email",name:"cEmail",onChange:this.handleChange,value:this.state.cEmail,onKeyPress:this.handleChange,disabled:this.state.disableEditForm}))):l.a.createElement(l.a.Fragment,null,l.a.createElement(J.a.Group,{controlId:"formEmail"},l.a.createElement(J.a.Label,{className:"cardLabel"},"Email"),l.a.createElement(J.a.Control,{type:"email",pattern:"[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,}$",placeholder:"Type client's email",name:"email",onChange:this.handleChange,value:this.state.email,onKeyPress:this.handleChange,disabled:this.state.disableEditForm})),l.a.createElement(J.a.Group,{controlId:"formPhone"},l.a.createElement(J.a.Label,{className:"cardLabel"},"Phone"),l.a.createElement($.a,{mask:["(",/[1-9]/,/\d/,/\d/,")"," ",/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,/\d/],className:"form-control",placeholder:"Enter client's phone number",name:"phone",onBlur:function(t){return e.afterChange(t)},value:this.state.phone,onKeyPress:this.handleChange,disabled:this.state.disableEditForm})),l.a.createElement(J.a.Group,{controlId:"formCity"},l.a.createElement(J.a.Label,{className:"cardLabel"},"City"),l.a.createElement(J.a.Control,{type:"text",placeholder:"Type client's city",name:"city",onChange:this.handleChange,value:this.state.city,onKeyPress:this.handleChange,disabled:this.state.disableEditForm})),l.a.createElement(J.a.Group,{controlId:"formAddress"},l.a.createElement(J.a.Label,{className:"cardLabel"},"Address"),l.a.createElement(J.a.Control,{type:"text",placeholder:"Type client's address",name:"address",onChange:this.handleChange,value:this.state.address,onKeyPress:this.handleChange,disabled:this.state.disableEditForm})),l.a.createElement(J.a.Group,{controlId:"formProvince"},l.a.createElement(J.a.Label,{className:"cardLabel"},"Province"),l.a.createElement(J.a.Control,{type:"text",placeholder:"Type client's province",name:"province",onChange:this.handleChange,value:this.state.province,onKeyPress:this.handleChange,disabled:this.state.disableEditForm})),l.a.createElement(J.a.Group,{controlId:"formPostalCode"},l.a.createElement(J.a.Label,{className:"cardLabel"},"Postal Code"),l.a.createElement(J.a.Check,{inline:!0,label:" outside Canada",checked:this.state.pcOutsideCanada,type:"checkbox",style:{marginLeft:"1rem"},onChange:this.handleCheckPostalCode,disabled:this.state.disableEditForm}),this.state.pcOutsideCanada?l.a.createElement(J.a.Control,{type:"text",placeholder:"Enter client's postal code",name:"postalCode",onChange:this.handleChange,value:this.state.postalCode,onKeyPress:this.handleChange,disabled:this.state.disableEditForm}):l.a.createElement($.a,{mask:[/[A-Z]/i,/\d/,/[A-Z]/i," ",/\d/,/[A-Z]/i,/\d/],className:"form-control",placeholder:"Enter client's postal code",name:"postalCode",value:this.state.postalCode,onChange:this.handlePostalCode,disabled:this.state.disableEditForm})),l.a.createElement(J.a.Group,{controlId:"formTypeOfService"},l.a.createElement(J.a.Label,{className:"cardLabel"},"Type of Service"),l.a.createElement(J.a.Control,{type:"text",placeholder:"Type the type of service your are doing",name:"typeOfService",onChange:this.handleChange,value:this.state.typeOfService,onKeyPress:this.handleChange,disabled:this.state.disableEditForm}))),this.state.linkClientToCompany&&this.YNComponent(),l.a.createElement(J.a.Group,{controlId:"formDefaultRate"},l.a.createElement(J.a.Label,{className:"cardLabel"},"Rate"),this.state.linkClientToCompany&&this.state.sureCompany&&l.a.createElement(J.a.Check,{inline:!0,label:"Rate as per company ?",checked:this.state.rateAsPerCompany,type:"checkbox",style:{marginLeft:"1rem"},onChange:this.changeRateCheck,disabled:this.state.disableEditForm}),l.a.createElement(J.a.Control,{type:"number",placeholder:"Type the hourly rate - CAD$",name:"defaultRate",onChange:this.handleChange,value:this.state.defaultRate,onKeyPress:this.handleChange,disabled:this.state.disableEditForm||this.state.disableRate,ref:function(t){return e.textInput13=t}}),l.a.createElement(J.a.Text,{className:"messageControl-user"},this.state.messageControlDefaultRate)),l.a.createElement("br",null),this.state.typeKid&&!this.state.linkClientToCompany&&this.YNComponent(),this.state.client&&!this.state.client.isCompany&&l.a.createElement(l.a.Fragment,null,l.a.createElement(J.a.Group,{controlId:"formShowRate"},l.a.createElement(J.a.Label,{className:"cardLabel"},"Show Rate on PunchIn form?"),l.a.createElement(J.a.Check,{inline:!0,label:"Yes",checked:this.state.showRate,type:"radio",style:{marginLeft:"2rem"},disabled:this.state.disableEditForm,onChange:function(){return e.setState({showRate:!0})}}),l.a.createElement(J.a.Check,{inline:!0,label:"No",checked:!this.state.showRate,type:"radio",style:{marginLeft:"1rem"},disabled:this.state.disableEditForm,onChange:function(){return e.setState({showRate:!1})}})),l.a.createElement(J.a.Group,{controlId:"formShowNotes"},l.a.createElement(J.a.Label,{className:"cardLabel"},"Show Notes on PunchIn form?"),l.a.createElement(J.a.Check,{inline:!0,label:"Yes",checked:this.state.showNotes,type:"radio",style:{marginLeft:"2rem"},disabled:this.state.disableEditForm,onChange:function(){return e.setState({showNotes:!0})}}),l.a.createElement(J.a.Check,{inline:!0,label:"No",checked:!this.state.showNotes,type:"radio",style:{marginLeft:"1rem"},disabled:this.state.disableEditForm,onChange:function(){return e.setState({showNotes:!1})}}))),l.a.createElement(g.a.Footer,{className:this.state.className},this.state.message?this.state.message:l.a.createElement("br",null)),l.a.createElement("div",{className:"d-flex flex-column"},this.state.disableEditForm?l.a.createElement(D.a,{style:{width:"100%"},onClick:this.editForm,ref:function(t){return e.textInputX=t}},"Edit"):l.a.createElement(_.a,null,l.a.createElement(D.a,{variant:"success",style:{width:"50%"},type:"submit"},"Save"),l.a.createElement(D.a,{variant:"warning",style:{width:"50%"},onClick:this.btnCancel},"Cancel"))))),l.a.createElement("br",null),l.a.createElement("br",null)):null)}}]),a}(n.Component),Ce=Object(h.b)((function(e){return{storeToken:e.token}}),null)(ye),ke=a(34),xe=function(){var e=Object(Y.a)(z.a.mark((function e(t,a){var n,l,s=arguments;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n="",e.t0=a,e.next="byDate"===e.t0?4:"toCompany"===e.t0?6:"invoiceClockins"===e.t0?8:"normal"===e.t0?10:12;break;case 4:return n="/clockin/clockins/?userToken=".concat(t,"&date=").concat(s.length<=2?void 0:s[2],"&type=").concat(a),e.abrupt("break",12);case 6:return n="/clockin/clockins/?userToken=".concat(t,"&dateStart=").concat(s.length<=2?void 0:s[2],"&dateEnd=").concat(s.length<=3?void 0:s[3],"&companyId=").concat(s.length<=4?void 0:s[4],"&queryLastInvoiceCode=").concat(s.length<=5?void 0:s[5],"&type=").concat(a),e.abrupt("break",12);case 8:return n="/clockin/clockins?userToken=".concat(t,"&invoiceId=").concat(s.length<=2?void 0:s[2],"&type=").concat(a),e.abrupt("break",12);case 10:return n="/clockin?dateStart=".concat(s.length<=2?void 0:s[2],"&dateEnd=").concat(s.length<=3?void 0:s[3],"&clientId=").concat(s.length<=4?void 0:s[4],"&queryLastInvoiceCode=").concat(s.length<=5?void 0:s[5]),e.abrupt("break",12);case 12:return e.prev=12,e.next=15,X.a.get(n,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}});case 15:if(!(l=e.sent).data.error){e.next=18;break}throw l.data.error;case 18:return e.abrupt("return",(s.length<=5?void 0:s[5])?l:l.data.allClockins);case 21:return e.prev=21,e.t1=e.catch(12),e.abrupt("return",{error:e.t1.message||e.t1});case 24:case"end":return e.stop()}}),e,null,[[12,21]])})));return function(t,a){return e.apply(this,arguments)}}(),we=function(e){var t=new Date(e),a=t.getUTCDate()>9?t.getUTCDate():"0".concat(t.getUTCDate());return"".concat(["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getUTCMonth()]," ").concat(a,", ").concat(t.getUTCFullYear())},Ie=function(){var e=new Date,t=e.getFullYear(),a=e.getMonth()>8?e.getMonth()+1:"0".concat(e.getMonth()+1),n=e.getDate()>9?e.getDate():"0".concat(e.getDate()),l=e.getHours()>9?e.getHours():"0".concat(e.getHours()),s=e.getMinutes()>9?e.getMinutes():"0".concat(e.getMinutes());return"".concat(t,"-").concat(a,"-").concat(n,"T").concat(l,":").concat(s,"Z")},Ne=function(e,t){var a=new Date(e.time_start),n=new Date(e.time_end),l=e.break_start?new Date(e.break_start):"",s=e.break_end?new Date(e.break_end):"",r=e.worked_hours?e.worked_hours/36e5:(n-a)/36e5;return{id:e._id,num:t+1,date:we(e.date),timeStart:(a.getUTCHours()<10?"0"+a.getUTCHours():a.getUTCHours())+":"+(a.getUTCMinutes()<10?"0"+a.getUTCMinutes():a.getUTCMinutes()),timeEnd:(n.getUTCHours()<10?"0"+n.getUTCHours():n.getUTCHours())+":"+(n.getUTCMinutes()<10?"0"+n.getUTCMinutes():n.getUTCMinutes()),breakStart:l?(l.getUTCHours()<10?"0"+l.getUTCHours():l.getUTCHours())+":"+(l.getUTCMinutes()<10?"0"+l.getUTCMinutes():l.getUTCMinutes()):"",breakEnd:s?(s.getUTCHours()<10?"0"+s.getUTCHours():s.getUTCHours())+":"+(s.getUTCMinutes()<10?"0"+s.getUTCMinutes():s.getUTCMinutes()):"",rate:e.rate,totalTime:r.toFixed(2),totalCad:(r*Number(e.rate)).toFixed(2),invoice:e.invoice?e.invoice.code:"not yet",client:e.client_nickname||e.client_name,workedHours:e.worked_hours?r.toFixed(2):"",notes:e.notes||" "}},Se=function(e){Object(o.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={date:"",startingTime:"",endingTime:"",rate:"",notes:"",message:"",client:{},addBreak:!1,startingBreak:"",endingBreak:"",validBreak:!0,classNameMessage:"",disabledBtn:!1,showPastClockins:!1,pastClockins:"",tablePastClockins:"",messageNoClockins:"No clockins for this day",blockedHours:[]},e.handleChange=function(t){e.setState(Object(W.a)({},t.target.name,t.target.value)),"date"===t.target.name&&window.innerWidth<=800&&e.getPastClockins(t.target.value)},e.getPastClockins=function(){var t=Object(Y.a)(z.a.mark((function t(a){var n,l,s;return z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,xe(e.props.storeToken,"byDate",a||e.state.date);case 2:if(n=t.sent,t.t0=n,!t.t0){t.next=8;break}return t.next=7,e.formatClockinsTable(n);case 7:t.t0=t.sent;case 8:if(l=t.t0,t.t1=n,!t.t1){t.next=14;break}return t.next=13,e.getBlockedHours(n);case 13:t.t1=t.sent;case 14:s=t.t1,e.setState({showPastClockins:!0,pastClockins:n,tablePastClockins:l,blockedHours:s});case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getBlockedHours=function(e){return e.map((function(e){return{timeStart:new Date(e.time_start).getTime(),timeEnd:new Date(e.time_end).getTime()}}))},e.formatClockinsTable=function(e){return e.map((function(e,t){var a=Ne(e,t);return l.a.createElement("tr",{key:a.num},l.a.createElement("td",{style:{verticalAlign:"middle"}},a.num),l.a.createElement("td",{style:{verticalAlign:"middle"}},a.client),l.a.createElement("td",{style:{verticalAlign:"middle"}},a.date),l.a.createElement("td",{style:{verticalAlign:"middle"}},a.timeStart),l.a.createElement("td",{style:{verticalAlign:"middle"}},a.timeEnd))}))},e.checkHours=function(t,a){var n=new Date("".concat(e.state.date,"T").concat(t,"Z")).getTime(),l=new Date("".concat(e.state.date,"T").concat(a,"Z")).getTime();return e.state.blockedHours.filter((function(e){return n>=e.timeStart&&n<=e.timeEnd||l>=e.timeStart&&l<=e.timeEnd})).length},e.handleSubmit=function(){var t=Object(Y.a)(z.a.mark((function t(a){var n,l;return z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.setState({disabledBtn:!0}),a.preventDefault(),(n={date:e.state.date,timeStart:e.state.startingTime,timeEnd:e.state.endingTime,rate:e.state.rate,notes:e.state.notes||void 0,clientId:e.state.client._id,startingBreak:e.state.startingBreak||void 0,endingBreak:e.state.endingBreak||void 0,companyId:e.state.client.linked_company||void 0}).clientId&&n.date&&n.timeStart&&n.timeEnd&&n.rate&&e.state.validBreak){t.next=7;break}e.state.validBreak?e.messageValidationMethod():e.checkBreakIsValid(a),t.next=23;break;case 7:if(!e.state.pastClockins||!e.checkHours(n.timeStart,n.timeEnd)){t.next=11;break}e.setState({message:"Check time, please",classNameMessage:"messageFailure",disabledBtn:!1}),t.next=23;break;case 11:return"/clockin",t.prev=12,t.next=15,X.a.post("/clockin",n,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e.props.storeToken)}});case 15:(l=t.sent).data.message?e.setState({message:"Punched in!",classNameMessage:"messageSuccess"}):l.data.error&&e.setState({message:l.data.error,classNameMessage:"messageFailure"}),t.next=22;break;case 19:t.prev=19,t.t0=t.catch(12),e.setState({message:t.t0.message,classNameMessage:"messageFailure"});case 22:e.clearForm();case 23:case"end":return t.stop()}}),t,null,[[12,19]])})));return function(e){return t.apply(this,arguments)}}(),e.messageValidationMethod=function(){e.setState({message:0===Object.entries(e.state.client).length?"Please, select client.":"Please fill or correct the fields.",classNameMessage:"messageFailure",disabledBtn:!1})},e.clearForm=function(){setTimeout((function(){e.setState({date:"",startingTime:"",endingTime:"",rate:"",notes:"",message:"",client:{},disabledBtn:!1,startingBreak:"",endingBreak:"",addBreak:!1,showPastClockins:!1}),window.scrollTo(0,0)}),3e3)},e.showTotalTime=function(){var t=Date.parse("01 Jan 1970 ".concat(e.state.startingTime,":00 GMT")),a=Date.parse("01 Jan 1970 ".concat(e.state.endingTime,":00 GMT")),n=e.state.startingBreak?Date.parse("01 Jan 1970 ".concat(e.state.startingBreak,":00 GMT")):0,s=e.state.endingBreak?Date.parse("01 Jan 1970 ".concat(e.state.endingBreak,":00 GMT")):0,r=(a-t-(n&&s&&s>n?s-n:0))/36e5,c=parseFloat(Math.round(100*r)/100).toFixed(2);return l.a.createElement("span",null,c)},e.getClientInfo=function(t){e.setState({client:t,rate:t.default_rate,message:""})},e.handleAddBreak=function(){e.setState({addBreak:!e.state.addBreak,message:e.state.message&&""})},e.checkBreakIsValid=function(t){(e.state.startingBreak||e.state.endingBreak)&&(e.state.endingBreak<=e.state.startingBreak||e.state.startingBreak<=e.state.startingTime||"startingBreak"!==t.target.name&&e.state.endingTime<=e.state.endingBreak?e.setState({message:"Break is incorrect.",classNameMessage:"messageFailure",validBreak:!1}):e.setState({message:"",validBreak:!0,disabledBtn:!1}))},e.checkOnFocusEndingBreak=function(){e.setState({message:"",validBreak:!0})},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"formPosition"},l.a.createElement("br",null),l.a.createElement(g.a,{className:"card-settings"},l.a.createElement(g.a.Header,null,"PunchIn"),l.a.createElement(g.a.Body,null,l.a.createElement("div",{className:"gridClientBtContainer"},l.a.createElement(ge,{client:this.state.client,getClientInfo:this.getClientInfo,punchinFlag:!0})),l.a.createElement("br",null),l.a.createElement(J.a,{onSubmit:this.handleSubmit},l.a.createElement(J.a.Group,{as:v.a,controlId:"formDate"},l.a.createElement(J.a.Label,{column:!0,sm:"3",className:"cardLabel"},"Worked in"),l.a.createElement(f.a,{sm:"6"},l.a.createElement(J.a.Control,{type:"date",name:"date",onChange:this.handleChange,value:this.state.date,onBlur:function(){return window.innerWidth>800&&e.getPastClockins()}}))),this.state.showPastClockins&&l.a.createElement(g.a.Footer,{style:{color:"green",fontStyle:"bold"}},this.state.tablePastClockins?l.a.createElement(ke.a,{striped:!0,bordered:!0,hover:!0,size:"sm",responsive:!0},l.a.createElement("thead",{style:{textAlign:"center"}},l.a.createElement("tr",null,l.a.createElement("th",{style:{verticalAlign:"middle"}},"#"),l.a.createElement("th",{style:{verticalAlign:"middle"}},"Client"),l.a.createElement("th",{style:{verticalAlign:"middle"}},"Date"),l.a.createElement("th",{style:{verticalAlign:"middle"}},"From"),l.a.createElement("th",{style:{verticalAlign:"middle"}},"To"))),l.a.createElement("tbody",{style:{textAlign:"center"}},this.state.tablePastClockins)):this.state.messageNoClockins),l.a.createElement(b.a,{style:{paddingLeft:0}},l.a.createElement(v.a,{style:{paddingLeft:0,textAlign:"center"}},l.a.createElement(f.a,null,l.a.createElement(J.a.Label,{className:"cardLabel"},"Starting")),l.a.createElement(f.a,null,l.a.createElement(J.a.Label,{className:"cardLabel"},"Ending")),l.a.createElement(f.a,null,l.a.createElement(J.a.Label,{className:"cardLabel"},"Total"))),l.a.createElement(v.a,{style:{paddingLeft:0}},l.a.createElement(f.a,null,l.a.createElement(J.a.Control,{style:{padding:"6px 2px"},type:"time",name:"startingTime",onChange:this.handleChange,value:this.state.startingTime,onKeyPress:this.handleChange,onBlur:this.checkBreakIsValid})),l.a.createElement(f.a,null,l.a.createElement(J.a.Control,{style:{padding:"6px 2px"},type:"time",name:"endingTime",onChange:this.handleChange,value:this.state.endingTime,onKeyPress:this.handleChange,onBlur:this.checkBreakIsValid})),l.a.createElement(f.a,null,this.state.endingTime&&this.state.startingTime?this.showTotalTime():null))),l.a.createElement(d.b,{to:window.location,onClick:this.handleAddBreak},this.state.addBreak?"Remove break":"Add Break"),this.state.addBreak&&l.a.createElement(g.a,{className:"card-settings"},l.a.createElement(b.a,{style:{paddingLeft:0}},l.a.createElement(v.a,{style:{paddingLeft:0}},l.a.createElement(f.a,null,l.a.createElement(J.a.Label,{className:"cardLabel"},"From")),l.a.createElement(f.a,null,l.a.createElement(J.a.Label,{className:"cardLabel"},"To"))),l.a.createElement(v.a,{style:{paddingLeft:0}},l.a.createElement(f.a,{style:{paddingRight:0}},l.a.createElement(J.a.Control,{style:{padding:"6px 0"},type:"time",name:"startingBreak",onChange:this.handleChange,value:this.state.startingBreak,onKeyPress:this.handleChange,onBlur:this.checkBreakIsValid})),l.a.createElement(f.a,null,l.a.createElement(J.a.Control,{style:{padding:"6px 0"},type:"time",name:"endingBreak",onChange:this.handleChange,value:this.state.endingBreak,onKeyPress:this.handleChange,onBlur:this.checkBreakIsValid,onFocus:this.checkOnFocusEndingBreak}))))),l.a.createElement("br",null),this.state.client.showRate&&l.a.createElement(J.a.Group,{as:v.a,controlId:"formRate"},l.a.createElement(J.a.Label,{column:!0,sm:"3",className:"cardLabel"},"Rate"),l.a.createElement(f.a,{sm:"3"},l.a.createElement(J.a.Control,{type:"number",placeholder:this.state.rate||"Rate ($)",name:"rate",onChange:this.handleChange,onKeyPress:this.handleChange,value:this.state.rate}))),this.state.client.showNotes&&l.a.createElement(J.a.Group,{controlId:"formBasicPassword"},l.a.createElement(J.a.Label,{className:"cardLabel"},"Notes"),l.a.createElement(J.a.Control,{as:"textarea",rows:"3",placeholder:"Session's Notes",name:"notes",onChange:this.handleChange,value:this.state.notes,onKeyPress:this.handleChange})),!this.state.client.showRate&&!this.state.showNotes&&l.a.createElement("br",null),l.a.createElement(g.a.Footer,{className:this.state.classNameMessage},this.state.message?this.state.message:l.a.createElement("br",null)),l.a.createElement("div",{className:"d-flex flex-column"},l.a.createElement(D.a,{disabled:this.state.disabledBtn,variant:"primary",type:"submit",onClick:this.handleSubmit},"Submit"))))),l.a.createElement("br",null),l.a.createElement("br",null))}}]),a}(n.Component),Le=Object(h.b)((function(e){return{storeToken:e.token}}),null)(Se);var Te=Object(h.b)((function(e){return{storeToken:e.token}}),null)((function(e){var t=Object(n.useState)(e.showModal),a=Object(A.a)(t,2),s=a[0],r=a[1],c=Object(n.useState)(!1),i=Object(A.a)(c,2),o=i[0],m=i[1],d=Object(n.useState)(!1),u=Object(A.a)(d,2),h=u[0],p=u[1],E=Object(n.useState)(""),b=Object(A.a)(E,2),y=b[0],C=b[1],k=Object(n.useState)(""),x=Object(A.a)(k,2),w=x[0],I=x[1],N=e.thinScreen?"1rem":"3rem",S=function(){r(!1),e.closeModal()},L=function(){var t=Object(Y.a)(z.a.mark((function t(){var a;return z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return m(!1),"/clockin",t.prev=2,t.next=5,X.a.delete("/clockin",{data:{clockinId:e.clockinData.id},headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e.storeToken)}});case 5:if(!(a=t.sent).data.error){t.next=10;break}throw a.data.error;case 10:I("messageSuccess"),C("Clocking has been deleted."),setTimeout((function(){e.deleteClockin(e.clockinData.id),e.closeModal()}),2500);case 13:t.next=20;break;case 15:t.prev=15,t.t0=t.catch(2),console.log(t.t0),I("messageFailure"),C(t.t0);case 20:case"end":return t.stop()}}),t,null,[[2,15]])})));return function(){return t.apply(this,arguments)}}();return l.a.createElement("div",null,l.a.createElement(F.a,{show:s,onHide:e.closeModal},l.a.createElement(F.a.Header,{closeButton:S},l.a.createElement(F.a.Title,null,"ClockIn Information")),e.thinScreen?l.a.createElement(F.a.Body,null,l.a.createElement(g.a,{className:"card-settings",style:{marginLeft:0,backgroundColor:"lightsteelblue"}},l.a.createElement(g.a.Header,{className:"cardTitle"},"Client: ",e.client),l.a.createElement(J.a,{style:{paddingLeft:N}},l.a.createElement(v.a,null,l.a.createElement(f.a,null,l.a.createElement(J.a.Label,{column:!0,className:"cardLabel",style:{paddingLeft:"0px"}},"Date")),l.a.createElement(f.a,null,l.a.createElement(J.a.Control,{disabled:!0,value:e.clockinData.date||"date"}))),l.a.createElement(v.a,null,l.a.createElement(f.a,null,l.a.createElement(J.a.Label,{column:!0,className:"cardLabel",style:{paddingLeft:"0px"}},"Time Start")),l.a.createElement(f.a,null,l.a.createElement(J.a.Control,{disabled:!0,value:e.clockinData.timeStart||"timestart"}))),l.a.createElement(v.a,null,l.a.createElement(f.a,null,l.a.createElement(J.a.Label,{column:!0,className:"cardLabel",style:{paddingLeft:"0px"}},"Time End")),l.a.createElement(f.a,null,l.a.createElement(J.a.Control,{disabled:!0,value:e.clockinData.timeEnd||"timeend"}))),e.clockinData.breakStart?l.a.createElement("div",null,l.a.createElement(v.a,null,l.a.createElement(f.a,null,l.a.createElement(J.a.Label,{column:!0,className:"cardLabel",style:{paddingLeft:"0px"}},"Break Start")),l.a.createElement(f.a,null,l.a.createElement(J.a.Control,{disabled:!0,value:e.clockinData.breakStart||"break start"}))),l.a.createElement(v.a,null,l.a.createElement(f.a,null,l.a.createElement(J.a.Label,{column:!0,className:"cardLabel",style:{paddingLeft:"0px"}},"Break End")),l.a.createElement(f.a,null,l.a.createElement(J.a.Control,{disabled:!0,value:e.clockinData.breakEnd||"break end"})))):"",l.a.createElement(v.a,null,l.a.createElement(f.a,null,l.a.createElement(J.a.Label,{column:!0,className:"cardLabel",style:{paddingLeft:"0px"}},"Total Time")),l.a.createElement(f.a,null,l.a.createElement(J.a.Control,{disabled:!0,value:e.clockinData.workedHours?e.clockinData.workedHours:e.clockinData.totalTime}))),l.a.createElement(v.a,null,l.a.createElement(f.a,null,l.a.createElement(J.a.Label,{column:!0,className:"cardLabel",style:{paddingLeft:"0px"}},"Rate")),l.a.createElement(f.a,null,l.a.createElement(J.a.Control,{disabled:!0,value:e.clockinData.rate||"rate"}))),l.a.createElement(v.a,null,l.a.createElement(f.a,null,l.a.createElement(J.a.Label,{column:!0,className:"cardLabel",style:{paddingLeft:"0px"}},"Total CAD$")),l.a.createElement(f.a,null,l.a.createElement(J.a.Control,{disabled:!0,value:e.clockinData.totalCad||"cad$"}))),l.a.createElement(v.a,null,l.a.createElement(f.a,null,l.a.createElement(J.a.Label,{column:!0,className:"cardLabel",style:{paddingLeft:"0px"}},"Invoice")),l.a.createElement(f.a,null,l.a.createElement(J.a.Control,{disabled:!0,value:e.clockinData.invoice||"invoice"}))),l.a.createElement(v.a,null,l.a.createElement(f.a,null,l.a.createElement(J.a.Label,{column:!0,className:"cardLabel",style:{paddingLeft:"0px"}},"Notes")),l.a.createElement(f.a,null,l.a.createElement(J.a.Control,{disabled:!0,value:e.clockinData.notes||" "})))))):l.a.createElement(F.a.Body,null,l.a.createElement(g.a,{className:"card-settings",style:{marginLeft:0,backgroundColor:"lightsteelblue"}},l.a.createElement(g.a.Header,{className:"cardTitle"},"Client: ",e.client),l.a.createElement(J.a,{style:{paddingLeft:N}},l.a.createElement(J.a.Group,{as:v.a,controlId:"formDate",style:{marginBottom:0}},l.a.createElement(J.a.Label,{column:!0,sm:4,className:"cardLabel",style:{paddingLeft:"0px"}},"Date"),l.a.createElement(f.a,{sm:5,style:{paddingLeft:"0px"}},l.a.createElement(J.a.Control,{disabled:!0,value:e.clockinData.date||"date"}))),l.a.createElement(J.a.Group,{as:v.a,controlId:"formTS",style:{marginBottom:0}},l.a.createElement(J.a.Label,{column:!0,sm:4,className:"cardLabel",style:{paddingLeft:"0px"}},"Time Start"),l.a.createElement(f.a,{sm:5,style:{paddingLeft:"0px"}},l.a.createElement(J.a.Control,{disabled:!0,value:e.clockinData.timeStart||"timestart"}))),l.a.createElement(J.a.Group,{as:v.a,controlId:"formTE",style:{marginBottom:0}},l.a.createElement(J.a.Label,{column:!0,sm:4,className:"cardLabel",style:{paddingLeft:"0px"}},"Time End"),l.a.createElement(f.a,{sm:5,style:{paddingLeft:"0px"}},l.a.createElement(J.a.Control,{disabled:!0,value:e.clockinData.timeEnd||"timeend"}))),e.clockinData.breakStart?l.a.createElement("div",null,l.a.createElement(J.a.Group,{as:v.a,controlId:"formTt",style:{marginBottom:0}},l.a.createElement(J.a.Label,{column:!0,sm:4,className:"cardLabel",style:{paddingLeft:"0px"}},"Break Start"),l.a.createElement(f.a,{sm:5,style:{paddingLeft:"0px"}},l.a.createElement(J.a.Control,{disabled:!0,value:e.clockinData.breakStart||"totaltime"}))),l.a.createElement(J.a.Group,{as:v.a,controlId:"formTt",style:{marginBottom:0}},l.a.createElement(J.a.Label,{column:!0,sm:4,className:"cardLabel",style:{paddingLeft:"0px"}},"Break End"),l.a.createElement(f.a,{sm:5,style:{paddingLeft:"0px"}},l.a.createElement(J.a.Control,{disabled:!0,value:e.clockinData.breakEnd||"totaltime"})))):"",l.a.createElement(J.a.Group,{as:v.a,controlId:"formTt",style:{marginBottom:0}},l.a.createElement(J.a.Label,{column:!0,sm:4,className:"cardLabel",style:{paddingLeft:"0px"}},"Total Time"),l.a.createElement(f.a,{sm:5,style:{paddingLeft:"0px"}},l.a.createElement(J.a.Control,{disabled:!0,value:e.clockinData.workedHours?e.clockinData.workedHours:e.clockinData.totalTime}))),l.a.createElement(J.a.Group,{as:v.a,controlId:"formRate",style:{marginBottom:0}},l.a.createElement(J.a.Label,{column:!0,sm:4,className:"cardLabel",style:{paddingLeft:"0px"}},"Rate"),l.a.createElement(f.a,{sm:5,style:{paddingLeft:"0px"}},l.a.createElement(J.a.Control,{disabled:!0,value:e.clockinData.rate||"rate"}))),l.a.createElement(J.a.Group,{as:v.a,controlId:"formTotalCad",style:{marginBottom:0}},l.a.createElement(J.a.Label,{column:!0,sm:4,className:"cardLabel",style:{paddingLeft:"0px"}},"Total $"),l.a.createElement(f.a,{sm:5,style:{paddingLeft:"0px"}},l.a.createElement(J.a.Control,{disabled:!0,value:e.clockinData.totalCad||"CAD$"}))),l.a.createElement(J.a.Group,{as:v.a,controlId:"formInvoice",style:{marginBottom:0}},l.a.createElement(J.a.Label,{column:!0,sm:4,className:"cardLabel",style:{paddingLeft:"0px"}},"Invoice"),l.a.createElement(f.a,{sm:5,style:{paddingLeft:"0px"}},l.a.createElement(J.a.Control,{disabled:!0,value:e.clockinData.invoice||"invoice"}))),l.a.createElement(J.a.Group,{as:v.a,controlId:"formInvoice",style:{marginBottom:0}},l.a.createElement(J.a.Label,{column:!0,sm:4,className:"cardLabel",style:{paddingLeft:"0px"}},"Notes"),l.a.createElement(f.a,{sm:5,style:{paddingLeft:"0px"}},l.a.createElement(J.a.Control,{disabled:!0,value:e.clockinData.notes||" "})))))),l.a.createElement(g.a.Footer,{className:w},y||l.a.createElement("br",null)),l.a.createElement(F.a.Footer,null,e.deleteClockin?l.a.createElement(_.a,{className:"mt-3",style:{width:"50%"}},l.a.createElement(D.a,{variant:"primary",onClick:S,style:{width:"50%"}},"Close"),l.a.createElement(D.a,{variant:"danger",onClick:function(){e.invoice?p(!0):m(!0)},style:{width:"50%"}},"Delete")):l.a.createElement(D.a,{variant:"primary",onClick:S,style:{width:"50%"}},"Close"))),o?l.a.createElement(G,{openModal:o,message:"Are you sure you want to Delete this clockin?",yesMethod:L,colorBtn1:"warning",colorBtn2:"success",noMethod:function(){return m(!1)}}):"",h?l.a.createElement(G,{openModal:h,message:l.a.createElement("div",null,l.a.createElement("p",null,"This clockin cannot be delete due there is a invoice related to it."),l.a.createElement("br",null),l.a.createElement("p",null,"You need to delete the invoice first.")),noMethod:function(){return p(!1)}}):"")})),Pe=window.innerWidth<800,Ae=function(e){Object(o.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.setState(Object(W.a)({},e.target.name,e.target.value))},n.handleSubmit=function(){var e=Object(Y.a)(z.a.mark((function e(t){var a,l,s,r,c,i;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=n.state.dateStart,l=n.state.dateEnd,!(s=n.state.clientId)){e.next=30;break}if(r=new Date(a).getTime(),c=new Date(l).getTime(),!(r>c)){e.next=9;break}n.setState({message:"Check your dates",classNameMessage:"messageFailure"}),e.next=28;break;case 9:if(e.prev=9,!n.state.company){e.next=16;break}return e.next=13,xe(n.props.storeToken,"toCompany",a,l,n.state.company._id);case 13:e.t0=e.sent,e.next=19;break;case 16:return e.next=18,xe(n.props.storeToken,"normal",a,l,s);case 18:e.t0=e.sent;case 19:if((i=e.t0)&&!i.error){e.next=22;break}throw i?i.error:"No invoices at all.";case 22:n.setState({clockinList:i,clockInListTable:n.renderDataTable(i),tableVisibility:!0,cleanButton:!0,message:""}),e.next=28;break;case 25:e.prev=25,e.t1=e.catch(9),n.setState({message:e.t1||"No invoices at all.",classNameMessage:"messageFailure",tableVisibility:!1});case 28:e.next=31;break;case 30:n.messageValidationMethod();case 31:case"end":return e.stop()}}),e,null,[[9,25]])})));return function(t){return e.apply(this,arguments)}}(),n.editClockin=function(e){n.setState({showModal:!0,clockinToModal:e})},n.closeClockinModal=function(){n.setState({showModal:!1})},n.renderDataTable=function(e){return e.map((function(e,t){var a=Ne(e,t);return Pe?n.state.company?l.a.createElement("tr",{key:a.num,onClick:function(){return n.editClockin(a)}},l.a.createElement("td",{style:{verticalAlign:"middle"}},a.num),l.a.createElement("td",{style:{verticalAlign:"middle"}},a.date),l.a.createElement("td",{style:{verticalAlign:"middle"}},a.client),l.a.createElement("td",{style:{verticalAlign:"middle"}},a.totalTime),l.a.createElement("td",{style:{verticalAlign:"middle"}},a.invoice)):l.a.createElement("tr",{key:a.num,onClick:function(){return n.editClockin(a)}},l.a.createElement("td",{style:{verticalAlign:"middle"}},a.num),l.a.createElement("td",{style:{verticalAlign:"middle"}},a.date),l.a.createElement("td",{style:{verticalAlign:"middle"}},a.timeStart),l.a.createElement("td",{style:{verticalAlign:"middle"}},a.totalTime),l.a.createElement("td",{style:{verticalAlign:"middle"}},a.invoice)):n.state.company?l.a.createElement("tr",{key:a.num,onClick:function(){return n.editClockin(a)}},l.a.createElement("td",{style:{verticalAlign:"middle"}},a.num),l.a.createElement("td",{style:{verticalAlign:"middle"}},a.date),l.a.createElement("td",{style:{verticalAlign:"middle"}},a.client),l.a.createElement("td",{style:{verticalAlign:"middle"}},a.timeStart),l.a.createElement("td",{style:{verticalAlign:"middle"}},a.totalTime),l.a.createElement("td",{style:{verticalAlign:"middle"}},a.totalCad),l.a.createElement("td",{style:{verticalAlign:"middle"}},a.invoice)):l.a.createElement("tr",{key:a.num,onClick:function(){return n.editClockin(a)}},l.a.createElement("td",{style:{verticalAlign:"middle"}},a.num),l.a.createElement("td",{style:{verticalAlign:"middle"}},a.date),l.a.createElement("td",{style:{verticalAlign:"middle"}},a.timeStart),l.a.createElement("td",{style:{verticalAlign:"middle"}},a.totalTime),l.a.createElement("td",{style:{verticalAlign:"middle"}},a.totalCad),l.a.createElement("td",{style:{verticalAlign:"middle"}},a.invoice))}))},n.clearForm=function(){n.setState({date:"",timeStart:"",timeEnd:"",rate:"",clientId:"",message:"",client:{},tableVisibility:!1,cleanButton:!1})},n.messageValidationMethod=function(){n.setState({message:"Please, select client.",classNameMessage:"messageFailure"})},n.getClientInfo=function(e){n.setState({company:!!e.isCompany&&e,client:!e.isCompany&&e,clientId:e._id,tableVisibility:!1,message:""})},n.updateClockins=function(e){var t=n.state.clockinList.filter((function(t){return t._id!==e})),a=n.renderDataTable(t);n.setState({clockinList:t,clockInListTable:a})},n.state={dateStart:"",dateEnd:"",clientId:"",clockinList:[],clockInListTable:"",tableVisibility:!1,message:"",classNameMessage:"",client:{},cleanButton:!1,showModal:!1,clockinToModal:{},company:""},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"formPosition"},l.a.createElement("br",null),l.a.createElement(g.a,{className:"card-settings"},l.a.createElement(g.a.Header,null,"List of PunchIns"),l.a.createElement(g.a.Body,null,l.a.createElement("div",{className:"gridClientBtContainer"},l.a.createElement(ge,{client:this.state.client||this.state.company,getClientInfo:this.getClientInfo})),l.a.createElement("br",null),l.a.createElement(J.a,null,l.a.createElement(J.a.Group,{as:v.a,controlId:"formST"},l.a.createElement(J.a.Label,{column:!0,sm:"3",className:"cardLabel"},"Date Start:"),l.a.createElement(f.a,{sm:"5"},l.a.createElement(J.a.Control,{type:"date",name:"dateStart",onChange:this.handleChange,value:this.state.dateStart,disabled:""===this.state.clientId}))),l.a.createElement(J.a.Group,{as:v.a,controlId:"formET"},l.a.createElement(f.a,{sm:"3"},l.a.createElement(J.a.Label,{className:"cardLabel"},"Date End:")),l.a.createElement(f.a,{sm:"5"},l.a.createElement(J.a.Control,{type:"date",name:"dateEnd",onChange:this.handleChange,value:this.state.dateEnd,disabled:""===this.state.clientId}))),l.a.createElement(g.a.Footer,{className:this.state.classNameMessage},this.state.message?this.state.message:l.a.createElement("br",null)),l.a.createElement("br",null),l.a.createElement("div",{className:"d-flex flex-column"},this.state.cleanButton?l.a.createElement(_.a,{className:"mt-3"},l.a.createElement(D.a,{variant:"primary",onClick:this.handleSubmit},"Get List"),l.a.createElement(D.a,{variant:"info",onClick:this.clearForm},"Clean")):l.a.createElement(D.a,{variant:"primary",onClick:this.handleSubmit},"Get List"))))),this.state.tableVisibility?l.a.createElement(g.a,{className:"cardInvoiceGenListofClockins card"},l.a.createElement(g.a.Header,{style:{textAlign:"center"}},"Client: ",l.a.createElement("b",null,this.state.company.name||this.state.client.nickname||this.state.client.name),", "," ",l.a.createElement("b",null,this.state.clockinList.length)," ",this.state.clockinList.length>1?"Clockins":"Clockin"),this.state.clockinList.length>0?Pe?this.state.company?l.a.createElement(ke.a,{striped:!0,bordered:!0,hover:!0,size:"sm",responsive:!0},l.a.createElement("thead",{style:{textAlign:"center"}},l.a.createElement("tr",null,l.a.createElement("th",{style:{verticalAlign:"middle"}},"#"),l.a.createElement("th",{style:{verticalAlign:"middle"}},"Date"),l.a.createElement("th",{style:{verticalAlign:"middle"}},"Kid"),l.a.createElement("th",{style:{verticalAlign:"middle"}},"Duration"),l.a.createElement("th",{style:{verticalAlign:"middle"}},"Invoice"))),l.a.createElement("tbody",{style:{textAlign:"center"}},this.state.clockInListTable)):l.a.createElement(ke.a,{striped:!0,bordered:!0,hover:!0,size:"sm",responsive:!0},l.a.createElement("thead",{style:{textAlign:"center"}},l.a.createElement("tr",null,l.a.createElement("th",{style:{verticalAlign:"middle"}},"#"),l.a.createElement("th",{style:{verticalAlign:"middle"}},"Date"),l.a.createElement("th",{style:{verticalAlign:"middle"}},"At"),l.a.createElement("th",{style:{verticalAlign:"middle"}},"Duration"),l.a.createElement("th",{style:{verticalAlign:"middle"}},"Invoice"))),l.a.createElement("tbody",{style:{textAlign:"center"}},this.state.clockInListTable)):this.state.company?l.a.createElement(ke.a,{striped:!0,bordered:!0,hover:!0,size:"sm",responsive:!0},l.a.createElement("thead",{style:{textAlign:"center"}},l.a.createElement("tr",null,l.a.createElement("th",{style:{verticalAlign:"middle"}},"#"),l.a.createElement("th",{style:{verticalAlign:"middle"}},"Date"),l.a.createElement("th",{style:{verticalAlign:"middle"}},"Kid"),l.a.createElement("th",{style:{verticalAlign:"middle"}},"Time Start"),l.a.createElement("th",{style:{verticalAlign:"middle"}},"Total Time"),l.a.createElement("th",{style:{verticalAlign:"middle"}},"CAD$"),l.a.createElement("th",{style:{verticalAlign:"middle"}},"Invoice"))),l.a.createElement("tbody",{style:{textAlign:"center"}},this.state.clockInListTable)):l.a.createElement(ke.a,{striped:!0,bordered:!0,hover:!0,size:"sm",responsive:!0},l.a.createElement("thead",{style:{textAlign:"center"}},l.a.createElement("tr",null,l.a.createElement("th",{style:{verticalAlign:"middle"}},"#"),l.a.createElement("th",{style:{verticalAlign:"middle"}},"Date"),l.a.createElement("th",{style:{verticalAlign:"middle"}},"Time Start"),l.a.createElement("th",{style:{verticalAlign:"middle"}},"Total Time"),l.a.createElement("th",{style:{verticalAlign:"middle"}},"CAD$"),l.a.createElement("th",{style:{verticalAlign:"middle"}},"Invoice"))),l.a.createElement("tbody",{style:{textAlign:"center"}},this.state.clockInListTable)):null):null,this.state.showModal&&l.a.createElement(Te,{showModal:this.state.showModal,clockinData:this.state.clockinToModal,client:this.state.company?this.state.clockinToModal.client:this.state.client.nickname||this.state.client.name,deleteClockin:function(t){return e.updateClockins(t)},closeModal:this.closeClockinModal,thinScreen:Pe}))}}]),a}(n.Component),Oe=Object(h.b)((function(e){return{storeToken:e.token}}),null)(Ae),je=window.innerWidth<800,Me=function(e){Object(o.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.setState(Object(W.a)({},e.target.name,e.target.value)),"invoiceCode"===e.target.name&&n.setState({messageInvoice:"",disableInvGenBtn:!1,codeMessage:n.state.lastUsedCode===e.target.value?"Last used code":""})},n.handleGetClockins=function(){var e=Object(Y.a)(z.a.mark((function e(t){var a,l,s,r,c,i,o;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n.state.dateStart&&n.state.dateEnd){e.next=5;break}n.setState({message:"Please, select Client and set Date Start and Date End.",classNameMessage:"messageFailure",messageInvoice:""}),e.next=25;break;case 5:if(!(n.state.dateEnd<n.state.dateStart)){e.next=9;break}n.setState({message:"Date End has to be greater or equal than Date Start.",classNameMessage:"messageFailure",messageInvoice:""}),e.next=25;break;case 9:if(!n.state.dateStart||!n.state.dateEnd||!n.state.client&&!n.state.company){e.next=24;break}if(a=n.state.dateStart,l=n.state.dateEnd,s=n.state.clientId||n.state.company._id,r=!0,!n.state.company){e.next=17;break}return e.next=14,xe(n.props.storeToken,"toCompany",a,l,s,r);case 14:e.t0=e.sent,e.next=20;break;case 17:return e.next=19,xe(n.props.storeToken,"normal",a,l,s,r);case 19:e.t0=e.sent;case 20:(c=e.t0).error?n.setState({message:c.error,classNameMessage:"messageFailure",tableVisibility:!1,messageInvoice:""}):c.data.count?(i=c.data.allClockins,o=c.data.codeSuggestion||"",n.setState({clockinList:i,clockInListTable:n.renderDataTable(i),tableVisibility:!0,clientId:s,lastClockinDate:new Date(i[i.length-1].date.substring(0,10)).getTime(),clockinWithInvoiceCode:n.checkIfThereIsInvoiceCode(i),disableInvGenBtn:n.checkIfThereIsInvoiceCode(i),message:"",invoiceCode:o.newCode||o,codeMessage:o?o.newCode?"Suggested code":"Last used code":"",lastUsedCode:o&&!o.newCode&&o,messageInvoice:""}),n.generatorBtn.scrollIntoView({behavior:"smooth"})):n.setState({message:"No clockins for this period.",classNameMessage:"messageFailure",tableVisibility:!1,messageInvoice:""}),e.next=25;break;case 24:n.setState({message:"Please, select client and set dates.",classNameMessage:"messageFailure"});case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleInvoiceGenerator=function(){var e=Object(Y.a)(z.a.mark((function e(t){var a,l,s,r;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n.state.invoiceCode&&""!==n.state.invoiceCode){e.next=6;break}n.setState({messageInvoice:"Please, provide Invoice's Code.",classNameMessage:"messageFailure"}),n.textCode.current.focus(),e.next=36;break;case 6:if("last used code"!==n.state.codeMessage&&n.state.lastUsedCode!==n.state.invoiceCode){e.next=11;break}n.setState({messageInvoice:"Please, provide a new Invoice's Code.",classNameMessage:"messageFailure"}),n.textCode.current.focus(),e.next=36;break;case 11:if(!((a=n.state.invoiceDate?new Date(n.state.invoiceDate).getTime():Ie())<n.state.lastClockinDate)){e.next=15;break}return n.setState({messageInvoice:"Date should be greater or equal to the last clockin date.",classNameMessage:"messageFailure"}),e.abrupt("return");case 15:return n.setState({disableInvGenBtn:!0}),l={date:a,dateStart:n.state.dateStart,dateEnd:n.state.dateEnd,notes:n.state.notes,clientId:n.state.clientId,code:n.state.invoiceCode.toUpperCase(),company:!!n.state.company._id||void 0,clockinArray:n.state.clockinList},console.log("@@@sending invoice data:",l),"/invoice",e.prev=19,e.next=22,X.a.post("/invoice",l,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n.props.storeToken)}});case 22:if(!(s=e.sent).data.message){e.next=29;break}r=n.state.clockinList.map((function(e){return Object(V.a)(Object(V.a)({},e),{},{invoice:{code:l.code}})})),n.setState({messageInvoice:"Invoice has been Generated!",classNameMessage:"messageSuccess",clockinWithInvoiceCode:!0,invoiceDate:"",lastUsedCode:"",codeMessage:"",clockinList:r,clockInListTable:n.renderDataTable(r)}),n.clearMessage(),e.next=30;break;case 29:throw s.data.error||"Sorry, something bad has happened.";case 30:e.next=36;break;case 32:e.prev=32,e.t0=e.catch(19),console.log("errrr",e.t0),n.setState({messageInvoice:e.t0,classNameMessage:"messageFailure"});case 36:case"end":return e.stop()}}),e,null,[[19,32]])})));return function(t){return e.apply(this,arguments)}}(),n.renderDataTable=function(e){return e.map((function(e,t){var a=Ne(e,t);return je?n.state.company?l.a.createElement("tr",{key:a.num,onClick:function(){return n.editClockin(a)}},l.a.createElement("td",{style:{verticalAlign:"middle"}},a.num),l.a.createElement("td",{style:{verticalAlign:"middle"}},a.date),l.a.createElement("td",{style:{verticalAlign:"middle"}},a.client),l.a.createElement("td",{style:{verticalAlign:"middle"}},a.totalTime),l.a.createElement("td",{style:{verticalAlign:"middle"}},a.invoice)):l.a.createElement("tr",{key:a.num,onClick:function(){return n.editClockin(a)}},l.a.createElement("td",{style:{verticalAlign:"middle"}},a.num),l.a.createElement("td",{style:{verticalAlign:"middle"}},a.date),l.a.createElement("td",{style:{verticalAlign:"middle"}},a.timeStart),l.a.createElement("td",{style:{verticalAlign:"middle"}},a.totalTime),l.a.createElement("td",{style:{verticalAlign:"middle"}},a.invoice)):n.state.company?l.a.createElement("tr",{key:a.num,onClick:function(){return n.editClockin(a)}},l.a.createElement("td",{style:{verticalAlign:"middle"}},a.num),l.a.createElement("td",{style:{verticalAlign:"middle"}},a.date),l.a.createElement("td",{style:{verticalAlign:"middle"}},a.client),l.a.createElement("td",{style:{verticalAlign:"middle"}},a.timeStart),l.a.createElement("td",{style:{verticalAlign:"middle"}},a.totalTime),l.a.createElement("td",{style:{verticalAlign:"middle"}},a.totalCad),l.a.createElement("td",{style:{verticalAlign:"middle"}},a.invoice)):l.a.createElement("tr",{key:a.num,onClick:function(){return n.editClockin(a)}},l.a.createElement("td",{style:{verticalAlign:"middle"}},a.num),l.a.createElement("td",{style:{verticalAlign:"middle"}},a.date),l.a.createElement("td",{style:{verticalAlign:"middle"}},a.timeStart),l.a.createElement("td",{style:{verticalAlign:"middle"}},a.totalTime),l.a.createElement("td",{style:{verticalAlign:"middle"}},a.totalCad),l.a.createElement("td",{style:{verticalAlign:"middle"}},a.invoice))}))},n.editClockin=function(e){n.setState({showModal:!0,clockinToModal:e,client:e.client})},n.closeClockinModal=function(){n.setState({showModal:!1})},n.updateClockins=function(e){var t=n.state.clockinList.filter((function(t){return t._id!==e})),a=n.renderDataTable(t);n.setState({clockinList:t,clockInListTable:a})},n.clearMessage=function(){setTimeout((function(){n.setState({message:"",messageInvoice:"",invoiceCode:""})}),3500)},n.getClientInfo=function(e){n.setState({client:!e.isCompany&&e,company:!!e.isCompany&&e,clientId:e._id,disabledIPBtn:!1,tableVisibility:!1,message:""})},n.handleEnter=function(e){"Enter"===e.key&&"invoiceCode"===e.target.name&&n.generatorBtn.click()},n.checkIfThereIsInvoiceCode=function(e){return e.filter((function(e){return e.invoice})).length>0},n.textCode=l.a.createRef(),n.state={dateStart:"",dateEnd:"",clientId:"",clockinList:[],client:"",clockInListTable:"",tableVisibility:!1,message:"",invoiceCode:"",invoiceDate:"",clockinWithInvoiceCode:!1,showModal:!1,clockinToModal:"",classNameMessage:"",messageInvoice:"",disableInvGenBtn:!1,codeMessage:"",lastUsedCode:"",company:""},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"formPosition"},l.a.createElement("br",null),l.a.createElement(g.a,{className:"card-settings"},l.a.createElement(g.a.Header,null,"Invoice Generator"),l.a.createElement(g.a.Body,null,l.a.createElement("div",{className:"gridClientBtContainer"},l.a.createElement(ge,{client:this.state.client||this.state.company,getClientInfo:this.getClientInfo,invoiceFlag:!0})," "),l.a.createElement("br",null),l.a.createElement(J.a,null,l.a.createElement(J.a.Group,{as:v.a,controlId:"formST"},l.a.createElement(J.a.Label,{column:!0,sm:"3",className:"cardLabel"},"Date Start:"),l.a.createElement(f.a,{sm:"5"},l.a.createElement(J.a.Control,{type:"date",name:"dateStart",onChange:this.handleChange,value:this.state.dateStart}))),l.a.createElement(J.a.Group,{as:v.a,controlId:"formET"},l.a.createElement(f.a,{sm:"3"},l.a.createElement(J.a.Label,{className:"cardLabel"},"Date End:")),l.a.createElement(f.a,{sm:"5"},l.a.createElement(J.a.Control,{type:"date",name:"dateEnd",onChange:this.handleChange,value:this.state.dateEnd}))),l.a.createElement(g.a.Footer,{className:this.state.classNameMessage},this.state.message?this.state.message:l.a.createElement("br",null)),l.a.createElement("br",null),l.a.createElement("div",{className:"d-flex flex-column"},l.a.createElement(D.a,{variant:"primary",type:"submit",onClick:this.handleGetClockins,ref:function(t){return e.getClockinsBtn=t}},"Get Clockins"))))),this.state.tableVisibility?l.a.createElement(g.a,{className:"cardInvoiceGenListofClockins card"},l.a.createElement(g.a.Header,{style:{textAlign:"center"}},"Client: ",l.a.createElement("b",null,this.state.company.name||this.state.client.nickname||this.state.client.name),", "," ",l.a.createElement("b",null,this.state.clockinList.length)," ",this.state.clockinList.length>1?"Clockins":"Clockin"),this.state.clockinList.length>0?je?this.state.company?l.a.createElement(ke.a,{striped:!0,bordered:!0,hover:!0,size:"sm",responsive:!0},l.a.createElement("thead",{style:{textAlign:"center"}},l.a.createElement("tr",null,l.a.createElement("th",{style:{verticalAlign:"middle"}},"#"),l.a.createElement("th",{style:{verticalAlign:"middle"}},"Date"),l.a.createElement("th",{style:{verticalAlign:"middle"}},"Kid"),l.a.createElement("th",{style:{verticalAlign:"middle"}},"Duration"),l.a.createElement("th",{style:{verticalAlign:"middle"}},"Invoice"))),l.a.createElement("tbody",{style:{textAlign:"center"}},this.state.clockInListTable)):l.a.createElement(ke.a,{striped:!0,bordered:!0,hover:!0,size:"sm",responsive:!0},l.a.createElement("thead",{style:{textAlign:"center"}},l.a.createElement("tr",null,l.a.createElement("th",{style:{verticalAlign:"middle"}},"#"),l.a.createElement("th",{style:{verticalAlign:"middle"}},"Date"),l.a.createElement("th",{style:{verticalAlign:"middle"}},"At"),l.a.createElement("th",{style:{verticalAlign:"middle"}},"Duration"),l.a.createElement("th",{style:{verticalAlign:"middle"}},"Invoice"))),l.a.createElement("tbody",{style:{textAlign:"center"}},this.state.clockInListTable)):this.state.company?l.a.createElement(ke.a,{striped:!0,bordered:!0,hover:!0,size:"sm",responsive:!0},l.a.createElement("thead",{style:{textAlign:"center"}},l.a.createElement("tr",null,l.a.createElement("th",{style:{verticalAlign:"middle"}},"#"),l.a.createElement("th",{style:{verticalAlign:"middle"}},"Date"),l.a.createElement("th",{style:{verticalAlign:"middle"}},"Kid"),l.a.createElement("th",{style:{verticalAlign:"middle"}},"Time Start"),l.a.createElement("th",{style:{verticalAlign:"middle"}},"Total Time"),l.a.createElement("th",{style:{verticalAlign:"middle"}},"CAD$"),l.a.createElement("th",{style:{verticalAlign:"middle"}},"Invoice"))),l.a.createElement("tbody",{style:{textAlign:"center"}},this.state.clockInListTable)):l.a.createElement(ke.a,{striped:!0,bordered:!0,hover:!0,size:"sm",responsive:!0},l.a.createElement("thead",{style:{textAlign:"center"}},l.a.createElement("tr",null,l.a.createElement("th",{style:{verticalAlign:"middle"}},"#"),l.a.createElement("th",{style:{verticalAlign:"middle"}},"Date"),l.a.createElement("th",{style:{verticalAlign:"middle"}},"Time Start"),l.a.createElement("th",{style:{verticalAlign:"middle"}},"Total Time"),l.a.createElement("th",{style:{verticalAlign:"middle"}},"CAD$"),l.a.createElement("th",{style:{verticalAlign:"middle"}},"Invoice"))),l.a.createElement("tbody",{style:{textAlign:"center"}},this.state.clockInListTable)):null,l.a.createElement(v.a,null,l.a.createElement(f.a,{xs:"6"},l.a.createElement(J.a.Label,{column:!0,style:{paddingRight:0,marginLeft:"1rem"}},l.a.createElement("strong",null,"Code: "))),l.a.createElement(f.a,{xs:"5"},l.a.createElement(J.a.Control,{autoComplete:"off",type:"text",name:"invoiceCode",placeholder:"Invoice's code",onKeyPress:this.handleEnter,onChange:this.handleChange,value:this.state.clockinWithInvoiceCode?"":this.state.invoiceCode,disabled:this.state.clockinWithInvoiceCode,ref:this.textCode}),this.state.codeMessage&&!this.state.disableInvGenBtn?l.a.createElement(Q.a,{target:this.textCode,show:!0,placement:"left"},l.a.createElement(ee.a,{id:"tooltip-left"},l.a.createElement("strong",{style:{color:"Suggested code"===this.state.codeMessage?"lime":"gold"}},this.state.codeMessage))):"")),l.a.createElement(v.a,null,l.a.createElement(f.a,{xs:"6"},l.a.createElement(J.a.Label,{column:!0,style:{paddingRight:0,marginLeft:"1rem"}},l.a.createElement("strong",null,"Date: ")," (optional)")),l.a.createElement(f.a,{xs:"5"},l.a.createElement(J.a.Control,{type:"date",name:"invoiceDate",onChange:this.handleChange,value:this.state.invoiceDate,disabled:this.state.clockinWithInvoiceCode,style:{paddingRight:"0"}}))),l.a.createElement("div",{style:{padding:"1rem",width:"100%"}},l.a.createElement(g.a.Footer,{className:this.state.classNameMessage},this.state.messageInvoice?this.state.messageInvoice:l.a.createElement("br",null))),l.a.createElement(D.a,{variant:"primary",type:"submit",disabled:this.state.clockinWithInvoiceCode||this.state.disableInvGenBtn,onClick:this.handleInvoiceGenerator,ref:function(t){return e.generatorBtn=t}},"Invoice's Generator"),l.a.createElement("br",null)):null,this.state.showModal?l.a.createElement(Te,{showModal:this.state.showModal,clockinData:this.state.clockinToModal,client:this.state.client,deleteClockin:function(t){return e.updateClockins(t)},closeModal:this.closeClockinModal,thinScreen:je}):"")}}]),a}(n.Component),De=Object(h.b)((function(e){return{storeToken:e.token}}),null)(Me),Re=window.innerWidth<800?"2rem":"3rem";function Be(){return l.a.createElement("div",null,l.a.createElement(g.a,{className:"bigCardPosition"},l.a.createElement(g.a.Header,{style:{textAlign:"center"}},l.a.createElement("h1",null,"About Page")),l.a.createElement(g.a.Body,null,l.a.createElement("br",null),l.a.createElement("p",null,l.a.createElement("b",null,"Clockin.js")," allows you to have all your clients data, their clockins and invoices, in one place. It is easy to manage and track your work with them."),l.a.createElement("p",null,"The system is aimed to be responsive, providing a good visualization in both small (mobile devices) and big screens (regular computers)."),l.a.createElement("p",null,"It also carries out some safety features, such as password encryption and Two-factor authentication for some of its procedures. Plus, some operations send email, which warranties a safe copy of them, just in case. "),l.a.createElement("p",null,"The project and its source code is kept at ",l.a.createElement("a",{href:"https://github.com/tonykieling/clockinJS",target:"_blank",rel:"noopener noreferrer"},"GitHub - Clockin.js")),l.a.createElement("h2",{className:"contents",style:{fontWeight:"bold"}},"Contents"),l.a.createElement("div",{style:{marginLeft:Re}},l.a.createElement("a",{href:"#id1",style:{paddingTop:"1.5rem"}},l.a.createElement("h5",null,"1- Functionalities")),l.a.createElement("a",{href:"#id2",style:{paddingTop:"0.9rem"}},l.a.createElement("h5",null,"2- System main actors")),l.a.createElement("a",{href:"#id3",style:{paddingTop:"0.9rem"}},l.a.createElement("h5",null,"3- Motivation")),l.a.createElement("a",{href:"#id4",style:{paddingTop:"0.9rem"}},l.a.createElement("h5",null,"4- Tech Stack")),l.a.createElement("a",{href:"#id5",style:{paddingTop:"0.9rem"},id:"id1"},l.a.createElement("h5",null,"5- Todo list and Releases")))),l.a.createElement(g.a,{className:"cardsPresentationPosition"},l.a.createElement(g.a.Header,{style:{textAlign:"center"}},l.a.createElement("h4",null,"1- Some of its Funcionalities")),l.a.createElement(g.a.Body,null,l.a.createElement("ul",null,l.a.createElement("li",null,"User\xb4s register"),l.a.createElement("li",null,"User\xb4s login"),l.a.createElement("li",null,"User modify their own data - 2FA already added and working"),l.a.createElement("li",null,"Users are able to:"),l.a.createElement("ul",null,l.a.createElement("li",null,"Register clients,"),l.a.createElement("li",null,"List, Check, and Modify client\xb4s data,"),l.a.createElement("li",null,"Punch in their work hours (clock-ins),"),l.a.createElement("li",null,"List, Check and Edit clock-ins data,"),l.a.createElement("li",null,"Generate invoice and manage their status (generated, delivered and received),"),l.a.createElement("li",null,"List and Check invoices."),l.a.createElement("div",{id:"id2"}))))),l.a.createElement(g.a,{className:"cardsPresentationPosition"},l.a.createElement(g.a.Header,{style:{textAlign:"center"}},l.a.createElement("h4",null,"2- System main actors")),l.a.createElement(g.a.Body,null,l.a.createElement("ol",null,l.a.createElement("li",null,l.a.createElement("span",{className:"strong"},"User: "),"People who have clients and want to register their worked hours."),l.a.createElement("li",null,l.a.createElement("span",{className:"strong"},"Client: "),"People or organizations which the users provide their service."),l.a.createElement("li",null,l.a.createElement("span",{className:"strong"},"Clock-in: "),"It is the start and end time in which the users worked for a client."),l.a.createElement("li",null,l.a.createElement("span",{className:"strong"},"Invoice: "),"It is a set of one or more clock-ins for a particular client and period that a user wants to generate. It will contain information about the user, the client, the description of hours worked, and the total amount of money earned for the user regarding that specific client. The invoice can be generated according to the user's necessity (weekly, monthly, etc). The invoice format is complained to the Government of Canada.",l.a.createElement("div",{id:"id3"}))))),l.a.createElement(g.a,{className:"cardsPresentationPosition"},l.a.createElement(g.a.Header,{style:{textAlign:"center"}},l.a.createElement("h4",null,"3- Motivation")),l.a.createElement(g.a.Body,null,l.a.createElement("p",null,"I have been developing the Clockin.js application to help my wife to register data and control their worked hours for her behavior intervention clients. The system facilitates the administration of the data (hours, invoice, clients) of her clients and allows a fast and reliable emission of a monthly invoice addressed to the Autism BC."),l.a.createElement("p",null,"The system will be used for my wife to help her to control her work hours plus will automate the invoice\xb4s generation. However, this is not necessary or asked for her clients or any governmental agency of any country. It is for her own control, but it can be used for anyone. The invoices that this system will generate are complained to a public format and can be reached on the internet."),l.a.createElement("p",null,"In a general view, the system has two process: Punch-in and Invoice's generation. The first one independ to the second. It means it can be used without generate invoices, only to registering the puch-ins. The second on (invoice's process) depend on the clock-ins recorded in the system."),l.a.createElement("div",{id:"id4"}))),l.a.createElement(g.a,{className:"cardsPresentationPosition"},l.a.createElement(g.a.Header,{style:{textAlign:"center"}},l.a.createElement("h4",null,"4- Tech Stack")),l.a.createElement(g.a.Body,null,l.a.createElement("p",null,"MERN - MongoDB, Express, React and Node, plus Redux, JWT, Bootstrap, Bcrypt, Axios, Mongoose and Nodemailer are the main technologies used."),l.a.createElement("div",{id:"id5"}))),l.a.createElement(g.a,{className:"cardsPresentationPosition"},l.a.createElement(g.a.Header,{style:{fontSize:"h4",textAlign:"center"}},l.a.createElement("h4",null,"5- Todo list")),l.a.createElement(g.a.Body,null,l.a.createElement("p",null,"The system is in production and being used by my wife to manage her work time to her clients and me for the same reason."),l.a.createElement("br",null),l.a.createElement("p",null,"Even though it is running, some improvements and features are being developed."),l.a.createElement("ul",null,l.a.createElement("li",null,"Edit and Delete Clockin - done"),l.a.createElement("li",null,"Edit and Delete Invoice - done"),l.a.createElement("li",null,"Img at Land and Quick Guidance - done"),l.a.createElement("li",null,"Add break to clockin - done"),l.a.createElement("li",null,"Add Guidance - done"),l.a.createElement("li",null,"Set date to the invoice's change processes (delivered and received) - done"),l.a.createElement("li",null,"Ordinary Clients (no kids) - Add and Edit - done"),l.a.createElement("li",null,"Invoice Code with suggestion or last code used plus ToolTip - done"),l.a.createElement("li",null,"Feature of inactivating user - done"),l.a.createElement("li",null,"Reports"),l.a.createElement("li",null,"Generate a Invoice's pdf file from the system for both kids and ordinary clients.")))),l.a.createElement("br",null)),l.a.createElement(L,{bckColor:window.innerWidth<800?"aliceblue":"gainsboro",opac:"iconSettingsOpacity"}))}var Fe={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)"}},_e=function(e){Object(o.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(e=t.call.apply(t,[this].concat(l))).state={message:"",newStatus:"Generated"===e.props.currentStatus?"Delivered":"Received",disableButtons:!1,classNameMessage:"",dateDelivered:e.props.invoice.date_delivered||e.props.dateDelivered||"",dateReceived:e.props.invoice.date_received||e.props.dateReceived||""},e.clearMessage=function(){setTimeout((function(){e.setState({message:"",disableButtons:!1})}),3500)},e.handleChangeInvoiceStatus=Object(Y.a)(z.a.mark((function t(){var a,n,l,s,r,c,i;return z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.state.newStatus,n=new Date(e.props.invoice.date.substring(0,10)).getTime(),l=e.state.dateDelivered?new Date(e.state.dateDelivered.substring(0,10)).getTime():null,s=e.state.dateReceived?new Date(e.state.dateReceived.substring(0,10)).getTime():null,l||s){t.next=8;break}e.setState({message:"Please, provide date.",classNameMessage:"messageFailure"}),t.next=30;break;case 8:if(!("Delivered"===a&&l<n)){t.next=13;break}return e.setState({message:"Delivered date should be greater or equal to ".concat(we(n),"."),classNameMessage:"messageFailure"}),t.abrupt("return");case 13:if(!("Received"===a&&s<l)){t.next=18;break}return e.setState({message:"Received date should be greater or equal to ".concat(we(l)),classNameMessage:"messageFailure"}),t.abrupt("return");case 18:return r={newStatus:e.state.newStatus,dateDelivered:e.state.dateReceived?null:e.state.dateDelivered,dateReceived:e.state.dateReceived},c="/invoice/".concat(e.props.invoice._id),t.prev=20,t.next=23,X.a.patch(c,r,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e.props.storeToken)}});case 23:t.sent.data.message?(e.setState({message:"Invoice's status changed to ".concat(e.state.newStatus),disableButtons:!0,classNameMessage:"messageSuccess"}),i=r.dateDelivered||r.dateReceived,e.props.updateInvoice(e.state.newStatus,i),setTimeout((function(){e.props.closeChangeModal()}),3500)):e.setState({message:"Something wrong happened.",classNameMessage:"messageFailure"}),t.next=30;break;case 27:t.prev=27,t.t0=t.catch(20),console.log("Error:",t.t0.message);case 30:e.clearMessage();case 31:case"end":return t.stop()}}),t,null,[[20,27]])}))),e.handleChange=function(t){var a;e.setState((a={},Object(W.a)(a,t.target.name,t.target.value),Object(W.a)(a,"message",""),a))},e}return Object(i.a)(a,[{key:"render",value:function(){return l.a.createElement(ne.a,{isOpen:this.props.openChangeInvoiceModal,style:Fe},l.a.createElement(g.a,null,l.a.createElement(g.a.Header,{as:"h3"}," Change Invoice Status "),l.a.createElement(g.a.Body,null,l.a.createElement(g.a.Text,null,"Do you wanna change the Invoice's Status to:"),l.a.createElement(J.a,null,l.a.createElement("div",{className:"d-flex flex-column"},l.a.createElement(_.a,{className:"mt-3"},l.a.createElement(D.a,{variant:"secondary",disabled:!0},"Generated"),l.a.createElement(D.a,{disabled:!!this.state.disableButtons||"Delivered"!==this.state.newStatus,variant:"Delivered"===this.state.newStatus?"primary":"secondary",onClick:this.handleChangeInvoiceStatus},"Delivered"),l.a.createElement(D.a,{disabled:!!this.state.disableButtons||"Received"!==this.state.newStatus,variant:"Received"===this.state.newStatus?"primary":"secondary",onClick:this.handleChangeInvoiceStatus},"Received"))),l.a.createElement("br",null),l.a.createElement(J.a.Group,{as:v.a,controlId:"formDT"},l.a.createElement(J.a.Label,{column:!0,sm:"5",className:"cardLabel"},"Date ",this.state.newStatus,":"),l.a.createElement(f.a,{sm:"7"},l.a.createElement(J.a.Control,{type:"date",name:"date".concat(this.state.newStatus),onChange:this.handleChange,value:"Delivered"===this.state.newStatus?this.state.dateDelivered:this.state.dateReceived}))),l.a.createElement(g.a.Footer,{className:this.state.classNameMessage},this.state.message?this.state.message:l.a.createElement("br",null)),l.a.createElement("div",{className:"d-flex flex-column"},l.a.createElement(_.a,{className:"mt-3"},l.a.createElement(D.a,{variant:"success",onClick:this.handleChangeInvoiceStatus,disabled:this.state.disableButtons},"Yes"),l.a.createElement(D.a,{variant:"danger",onClick:this.props.closeChangeModal,disabled:this.state.disableButtons}," No ")))))))}}]),a}(n.Component),Ge=Object(h.b)((function(e){return{storeToken:e.token}}),null)(_e);var He=Object(h.b)((function(e){return{storeToken:e.token}}),null)((function(e){var t=Object(n.useState)(e.initialState),a=Object(A.a)(t,2),s=a[0],r=a[1],c=Object(n.useState)("Deleting the invoice will set all its clockins to no invoice. Are you sure you want to delete it?"),i=Object(A.a)(c,2),o=i[0],m=i[1],d=Object(n.useState)(!1),u=Object(A.a)(d,2),h=u[0],p=u[1],E=Object(n.useState)(!1),g=Object(A.a)(E,2),b=g[0],f=g[1],v=function(){b&&e.confirmDeletion(),r(!1),e.closeDeleteModal()},y=function(){var t=Object(Y.a)(z.a.mark((function t(){var a,n;return z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="/invoice/".concat(e.invoiceId),t.prev=1,t.next=4,X.a.delete(a,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e.storeToken)}});case 4:(n=t.sent).data.message?(m("Invoice ".concat(e.invoiceCode," has been deleted")),f(!0)):(console.log("ERROR is present"),m(n.data.error+"!!!")),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),console.log(t.t0.message),m(t.t0.message);case 12:p(!0);case 13:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(){return t.apply(this,arguments)}}();return l.a.createElement("div",null,l.a.createElement(F.a,{show:s,onHide:v},l.a.createElement(F.a.Header,{closeButton:!0},l.a.createElement(F.a.Title,null,"Delete Invoice")),l.a.createElement(F.a.Body,null," ",o," "),l.a.createElement(F.a.Footer,null,h?l.a.createElement(D.a,{variant:"primary",onClick:v,style:{width:"50%"}},"Close"):l.a.createElement(_.a,{className:"mt-3",style:{width:"50%"}},l.a.createElement(D.a,{variant:"primary",onClick:y,style:{width:"50%"}},"Yes"),l.a.createElement(D.a,{variant:"danger",onClick:v,style:{width:"50%"}},"No")))))}));var Ke=Object(h.b)((function(e){return{storeToken:e.token}}),null)((function(e){var t=Object(n.useState)(e.showEditInvoiceModal),a=Object(A.a)(t,2),s=a[0],r=a[1],c=function(){r(!1);var t=e.invoice._id;G?e.closeInvoiceEditModal({invoiceId:t,newInvoiceCode:d,newReceivedAmount:b,newReason:w}):e.closeInvoiceEditModal()},i=e.invoice.code,o=Object(n.useState)(i),m=Object(A.a)(o,2),d=m[0],u=m[1],h=e.invoice.cad_adjustment||"",p=Object(n.useState)(h),E=Object(A.a)(p,2),b=E[0],y=E[1],C=e.invoice.reason_adjustment||"",k=Object(n.useState)(C),x=Object(A.a)(k,2),w=x[0],I=x[1],N=Object(n.useState)(""),S=Object(A.a)(N,2),L=S[0],T=S[1],P=Object(n.useState)(""),O=Object(A.a)(P,2),j=O[0],M=O[1],R=Object(n.useState)(!1),B=Object(A.a)(R,2),G=B[0],H=B[1],K=function(){var t=Object(Y.a)(z.a.mark((function t(){var a,n;return z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i!==d||h!==b||C!==w){t.next=6;break}M("messageFailure"),T("Nothing to be changed"),I(""),t.next=41;break;case 6:if(""!==d){t.next=11;break}M("messageFailure"),T("Missing Invoice's Code"),t.next=41;break;case 11:if(""===b||""!==w&&w.trim()){t.next=17;break}M("messageFailure"),T("Missing Reason"),I(""),t.next=41;break;case 17:if(""!==b||""===w||!w.trim()){t.next=22;break}M("messageFailure"),T("Missing Received Amount"),t.next=41;break;case 22:if(""===b||Number(b)){t.next=27;break}M("messageFailure"),T("'Received $' has to be a number."),t.next=41;break;case 27:return a={invoiceId:e.invoice._id,code:d,cad_adjustment:b,reason_adjustment:w},"/invoice/edit",t.prev=29,t.next=32,X.a.patch("/invoice/edit",a,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e.storeToken)}});case 32:(n=t.sent).data.message?(M("messageSuccess"),T("Invoice has been modified"),H(!0)):(console.log("something wrong!!"),M("messageFailure"),T(n.data.error)),t.next=41;break;case 36:t.prev=36,t.t0=t.catch(29),console.log("ERRRRRRRRRRRRRRRRR"),M("messageFailure"),T(t.t0.message);case 41:U();case 42:case"end":return t.stop()}}),t,null,[[29,36]])})));return function(){return t.apply(this,arguments)}}(),U=function(){setTimeout((function(){M(""),T("")}),3e3)};return l.a.createElement(F.a,{show:s,onHide:c},l.a.createElement(F.a.Body,null,l.a.createElement(g.a,{className:"card-settings",style:{marginLeft:0,backgroundColor:"lightsteelblue"}},l.a.createElement(g.a.Header,null,"Edit Invoice's data"),l.a.createElement("br",null),l.a.createElement(J.a,null,l.a.createElement(v.a,null,l.a.createElement(f.a,null,l.a.createElement(J.a.Label,{column:!0,className:"cardLabel",style:{paddingLeft:"0px"}},"Total CAD")),l.a.createElement(f.a,null,l.a.createElement(J.a.Control,{style:{textAlign:"right"},disabled:!0,value:"$ ".concat(e.invoice.total_cad.toFixed(2))}))),l.a.createElement(v.a,null,l.a.createElement(f.a,null,l.a.createElement(J.a.Label,{column:!0,className:"cardLabel",style:{paddingLeft:"0px"}},"Date Start")),l.a.createElement(f.a,null,l.a.createElement(J.a.Control,{style:{textAlign:"right"},disabled:!0,value:we(e.invoice.date_start)}))),l.a.createElement(v.a,null,l.a.createElement(f.a,null,l.a.createElement(J.a.Label,{column:!0,className:"cardLabel",style:{paddingLeft:"0px"}},"Date End")),l.a.createElement(f.a,null,l.a.createElement(J.a.Control,{style:{textAlign:"right"},disabled:!0,value:we(e.invoice.date_end)}))),l.a.createElement(v.a,null,l.a.createElement(f.a,null,l.a.createElement(J.a.Label,{column:!0,className:"cardLabel",style:{paddingLeft:"0px"}},"Date Generated")),l.a.createElement(f.a,null,l.a.createElement(J.a.Control,{style:{textAlign:"right"},disabled:!0,value:we(e.invoice.date)}))),e.invoice.date_delivered&&l.a.createElement("div",null,l.a.createElement(v.a,null,l.a.createElement(f.a,null,l.a.createElement(J.a.Label,{column:!0,className:"cardLabel",style:{paddingLeft:"0px"}},"Date Delivered")),l.a.createElement(f.a,null,l.a.createElement(J.a.Control,{style:{textAlign:"right"},disabled:!0,value:we(e.invoice.date_delivered)})))),e.invoice.date_received&&l.a.createElement("div",null,l.a.createElement(v.a,null,l.a.createElement(f.a,null,l.a.createElement(J.a.Label,{column:!0,className:"cardLabel",style:{paddingLeft:"0px"}},"Date Received")),l.a.createElement(f.a,null,l.a.createElement(J.a.Control,{style:{textAlign:"right"},disabled:!0,value:we(e.invoice.date_received)})))),l.a.createElement("br",null),l.a.createElement(g.a,null,l.a.createElement(g.a.Header,null,"What you can change"),l.a.createElement(g.a.Body,null,l.a.createElement(v.a,null,l.a.createElement(f.a,null,l.a.createElement(J.a.Label,{column:!0,className:"cardLabel",style:{paddingLeft:"0px"}},"Code")),l.a.createElement(f.a,null,l.a.createElement(J.a.Control,{style:{textAlign:"right"},type:"text",placeholder:d||"Invoice's Code",name:"newInvoiceCode",onChange:function(e){return u(e.target.value)},value:d}))),l.a.createElement(v.a,null,l.a.createElement(f.a,null,l.a.createElement(J.a.Label,{column:!0,className:"cardLabel",style:{paddingLeft:"0px"}},"Received $")),l.a.createElement(f.a,null,l.a.createElement(J.a.Control,{disabled:"Received"!==e.invoice.status,style:{textAlign:"right"},type:"number",placeholder:"Received"===e.invoice.status?"Actually $ received":"disabled",name:"newReceivedAmount",value:b,onChange:function(e){return y(e.target.value)}}))),l.a.createElement(J.a.Label,{column:!0,className:"cardLabel",style:{paddingLeft:"0px"}},"Reason"),l.a.createElement(J.a.Control,{disabled:"Received"!==e.invoice.status,style:{textAlign:"right"},as:"textarea",rows:"3",placeholder:"Received"===e.invoice.status?"Why the diff btw the Total CAD and Received Amount":"Only enabled when Invoice's status is 'Received'",name:"newReason",value:w,onChange:function(e){return I(e.target.value)}})))),l.a.createElement("br",null),l.a.createElement(g.a.Footer,{className:j},L||l.a.createElement("br",null)),l.a.createElement(_.a,{className:"mt-3"},l.a.createElement(D.a,{style:{width:"50%"},onClick:c},"Close"),l.a.createElement(D.a,{style:{width:"50%"},variant:"success",onClick:K},"Save Changes")))))})),Ue=window.innerWidth<800,ze=window.innerWidth<800?{content:{width:"95%",height:"85%",top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",overflow:"scroll"}}:{content:{width:"70%",maxWidth:"650px",height:"75%",top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",overflow:"scroll"}},Ye=function(e){Object(o.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={dateStart:"",dateEnd:"",clientId:"",client:"",clockInListTable:"",tableVisibility:!1,message:"",changeStatusModal:!1,currentStatus:e.props.invoice.status,updateYN:!1,showModalDeleteInvoice:!1,invoiceDeleted:!1,dateDelivered:"",dateReceived:"",showClockinModal:"",showEditInvoiceModal:""},e.handleChange=function(t){e.setState(Object(W.a)({},t.target.name,t.target.value))},e.clearMessage=function(){setTimeout((function(){e.setState({message:"",invoiceCode:""})}),3500)},e.updateInvoice=function(t,a){"Delivered"===t?e.setState({currentStatus:t,dateDelivered:"Delivered"===t?a:"",updateYN:!0}):"Received"===t&&e.setState({currentStatus:t,dateReceived:"Received"===t?a:"",updateYN:!0})},e.componentDidMount=function(){e.takeClockinData()},e.takeClockinData=Object(Y.a)(z.a.mark((function t(){var a,n,l;return z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.invoice._id,n=e.props.storeToken,"invoiceClockins",t.prev=1,t.next=4,xe(n,"invoiceClockins",a);case 4:if(!(l=t.sent).error){t.next=7;break}throw l.error;case 7:e.setState({clockinList:l,clockInListTable:e.renderDataTable(l),tableVisibility:!0}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.setState({message:t.t0||t.t0.message,tableVisibility:!1});case 13:case"end":return t.stop()}}),t,null,[[1,10]])}))),e.handleChangeInvoiceStatus=function(){e.setState({changeStatusModal:!0})},e.editClockin=function(t){e.setState({showClockinModal:!0,clockinToModal:t,client:t.client})},e.renderDataTable=function(t){var a=0,n=0,s=t.map((function(t,s){var r=Ne(t,s);return a+=Number(r.totalTime),n+=Number(r.totalCad),l.a.createElement("tr",{key:r.num,onClick:function(){return e.editClockin(r)}},l.a.createElement("td",{style:{verticalAlign:"middle"}},r.num),l.a.createElement("td",{style:{verticalAlign:"middle"}},r.date),l.a.createElement("td",{style:{verticalAlign:"middle"}},r.totalTime),l.a.createElement("td",{style:{verticalAlign:"middle"}},r.totalCad))})),r=l.a.createElement("tr",{key:s.length+1},l.a.createElement("td",null),l.a.createElement("td",{style:{verticalAlign:"middle"}},l.a.createElement("b",null,"Totals")),l.a.createElement("td",{style:{verticalAlign:"middle"}},l.a.createElement("b",null,a," ",a>1?"hours":"hour")),l.a.createElement("td",{style:{verticalAlign:"middle"}},l.a.createElement("b",null,"$",n.toFixed(2))));return[].concat(Object(he.a)(s),[r])},e.closeChangeModal=function(){e.setState({changeStatusModal:!1})},e.backToThePrevious=function(){e.state.updateYN||e.state.invoiceDeleted?e.props.updateScreen(e.state.updateYN?e.state.currentStatus:null):e.props.closeModal()},e.setShowModalDeleteInvoice=function(){e.setState({showModalDeleteInvoice:!0})},e.closeShowModalDeleteInvoice=function(){e.setState({showModalDeleteInvoice:!1})},e.confirmDeletion=function(){e.setState({invoiceDeleted:!0})},e.closeClockinModal=function(){e.setState({showClockinModal:!1})},e.closeEditModal=function(t){e.props.changeInvoiceData(t),e.setState({showEditInvoiceModal:!1})},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return l.a.createElement(ne.a,{isOpen:this.props.openInvoiceModal,style:ze},this.state.showEditInvoiceModal?l.a.createElement(Ke,{invoice:this.props.invoice,showEditInvoiceModal:this.state.showEditInvoiceModal,closeInvoiceEditModal:function(t){t?e.closeEditModal(t):e.setState({showEditInvoiceModal:!1})}}):"",this.state.changeStatusModal?l.a.createElement(Ge,{invoice:this.props.invoice,closeChangeModal:this.closeChangeModal,currentStatus:this.state.currentStatus,openChangeInvoiceModal:this.state.changeStatusModal,updateInvoice:this.updateInvoice,dateDelivered:this.state.dateDelivered,dateReceived:this.state.dateReceived}):"",this.state.showModalDeleteInvoice?l.a.createElement(He,{initialState:this.state.showModalDeleteInvoice,closeDeleteModal:this.closeShowModalDeleteInvoice,invoiceCode:this.props.invoice.code,invoiceId:this.props.invoice._id,confirmDeletion:this.confirmDeletion}):"",this.state.showClockinModal?l.a.createElement(Te,{showModal:this.state.showClockinModal,clockinData:this.state.clockinToModal,client:this.state.client,deleteClockin:!1,closeModal:this.closeClockinModal,thinScreen:Ue}):"",l.a.createElement(g.a,null,l.a.createElement(g.a.Header,{as:"h3"},"Invoice: ",this.props.invoice.code),l.a.createElement(g.a.Body,null,l.a.createElement(g.a.Title,{style:{fontWeight:"bold",fontSize:"large"}}," Client: ",this.props.client.nickname||this.props.client.name),Ue?l.a.createElement("div",null,l.a.createElement(J.a.Label,{style:{left:"2rem"}},l.a.createElement("b",null,"Total: $"),this.props.invoice.total_cad.toFixed(2)),l.a.createElement("br",null),l.a.createElement(J.a.Label,{style:{left:"2rem"}},l.a.createElement("b",null,"Date Start: ")," ",we(this.props.invoice.date_start)),l.a.createElement("br",null),l.a.createElement(J.a.Label,null,l.a.createElement("b",null,"Date End: ")," ",we(this.props.invoice.date_end)),l.a.createElement("br",null),l.a.createElement(J.a.Label,{style:{left:"2rem"}},l.a.createElement("b",null,"Date Generated:")," ",we(this.props.invoice.date)),(this.props.invoice.date_delivered||this.state.dateDelivered)&&l.a.createElement("div",null,l.a.createElement(J.a.Label,{style:{left:"2rem"}},l.a.createElement("b",null,"Date Delivered:")," ",we(this.props.invoice.date_delivered||this.state.dateDelivered))),(this.props.invoice.date_received||this.state.dateReceived)&&l.a.createElement("div",null,l.a.createElement(J.a.Label,{style:{left:"2rem"}},l.a.createElement("b",null,"Date Received:")," ",we(this.props.invoice.date_received||this.state.dateReceived))),this.props.invoice.cad_adjustment&&l.a.createElement("div",null,l.a.createElement(J.a.Label,{style:{left:"2rem"}},l.a.createElement("b",null,"Received $:")," ",this.props.invoice.cad_adjustment),l.a.createElement("br",null),l.a.createElement(J.a.Label,{style:{left:"2rem"}},l.a.createElement("b",null,"Reason:")," ",this.props.invoice.reason_adjustment))):l.a.createElement("div",null,l.a.createElement(v.a,null,l.a.createElement(f.a,{style:{width:"50%"}},l.a.createElement(J.a.Label,{style:{left:"2rem"}},l.a.createElement("b",null,"Total: $"),this.props.invoice.total_cad.toFixed(2)),l.a.createElement("br",null),l.a.createElement(J.a.Label,{style:{left:"2rem"}},l.a.createElement("b",null,"Date Start: ")," ",we(this.props.invoice.date_start)),l.a.createElement("br",null),l.a.createElement(J.a.Label,null,l.a.createElement("b",null,"Date End: ")," ",we(this.props.invoice.date_end)),l.a.createElement("br",null),l.a.createElement(J.a.Label,{style:{left:"2rem"}},l.a.createElement("b",null,"Date Generated:")," ",we(this.props.invoice.date)),(this.props.invoice.date_delivered||this.state.dateDelivered)&&l.a.createElement("div",null,l.a.createElement(J.a.Label,{style:{left:"2rem"}},l.a.createElement("b",null,"Date Delivered:")," ",we(this.props.invoice.date_delivered||this.state.dateDelivered))),(this.props.invoice.date_received||this.state.dateReceived)&&l.a.createElement("div",null,l.a.createElement(J.a.Label,{style:{left:"2rem"}},l.a.createElement("b",null,"Date Received:")," ",we(this.props.invoice.date_received||this.state.dateReceived)))),this.props.invoice.cad_adjustment&&l.a.createElement(f.a,{style:{width:"50%"}},l.a.createElement(J.a.Label,{style:{left:"2rem"}},l.a.createElement("b",null,"Received $:")," ",this.props.invoice.cad_adjustment),l.a.createElement("br",null),l.a.createElement(J.a.Label,{style:{left:"2rem"}},l.a.createElement("b",null,"Reason:")," ",this.props.invoice.reason_adjustment)))),"Received"===this.state.currentStatus?l.a.createElement(D.a,{onClick:function(){return e.setState({showEditInvoiceModal:!0})}},"Edit Invoice"):l.a.createElement(D.a,{onClick:function(){return e.setState({showEditInvoiceModal:!0})}},"Edit Invoice's Code"),l.a.createElement("div",{className:"d-flex flex-column"},this.state.invoiceDeleted?l.a.createElement(D.a,{style:{width:"100%"},variant:"warning",disabled:!0},"Invoice has already been deleted."):l.a.createElement(_.a,{className:"mt-3"},l.a.createElement(D.a,{style:{width:"50%"},variant:"info",disabled:"Received"===this.state.currentStatus,onClick:this.handleChangeInvoiceStatus},this.state.currentStatus),l.a.createElement(D.a,{style:{width:"50%"},variant:"danger",disabled:"Received"===this.state.currentStatus,onClick:this.setShowModalDeleteInvoice}," Delete "))))),this.state.tableVisibility?l.a.createElement(g.a,{className:"cardInvoiceGenListofClockinsModal card"},l.a.createElement(g.a.Footer,{style:{fontSize:"x-large",textAlign:"center",fontWeight:"bold"}},"Invoice's Clockins List"),l.a.createElement(ke.a,{striped:!0,bordered:!0,hover:!0,size:"sm",responsive:!0},l.a.createElement("thead",null,l.a.createElement("tr",{style:{textAlign:"center"}},l.a.createElement("th",{style:{verticalAlign:"middle"}},"#"),l.a.createElement("th",{style:{verticalAlign:"middle"}},"Date"),l.a.createElement("th",{style:{verticalAlign:"middle"}},"Total Time"),l.a.createElement("th",{style:{verticalAlign:"middle"}},"CAD$"))),l.a.createElement("tbody",{style:{textAlign:"center"}},this.state.clockInListTable))):l.a.createElement(g.a,null,l.a.createElement(g.a.Title,null,this.state.message)),l.a.createElement(D.a,{variant:"primary",onClick:this.backToThePrevious},"Close Window"))}}]),a}(n.Component),We=function(e){Object(o.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={dateStart:"",dateEnd:"",clientId:"",invoiceList:[],client:"",invoiceListTable:"",tableVisibility:!1,message:"",openInvoiceModal:!1,invoice:""},e.handleChange=function(t){e.setState(Object(W.a)({},t.target.name,t.target.value))},e.handleGetInvoices=function(){var t=Object(Y.a)(z.a.mark((function t(a){var n,l,s,r,c;return z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),n=e.state.dateStart,l=e.state.dateEnd,s=e.state.clientId,e.state.clientId){t.next=6;break}e.setState({message:"Select a client.",classNameMessage:"messageFailure"}),t.next=17;break;case 6:return r="/invoice?dateStart=".concat(n,"&dateEnd=").concat(l,"&clientId=").concat(s),t.prev=7,t.next=10,X.a.get(r,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e.props.storeToken)}});case 10:(c=t.sent).data.allInvoices?e.setState({invoiceList:c.data.allInvoices,invoiceListTable:e.renderDataTable(c.data.allInvoices),tableVisibility:!0,clientId:s}):e.setState({message:"No Invoices for this period.",classNameMessage:"messageFailure",tableVisibility:!1}),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(7),e.setState({message:t.t0.message,classNameMessage:"messageFailure"});case 17:e.clearMessage();case 18:case"end":return t.stop()}}),t,null,[[7,14]])})));return function(e){return t.apply(this,arguments)}}(),e.renderDataTable=function(t){return t.map((function(t,a){var n={num:a+1,date:we(t.date),totalCad:Number(t.cad_adjustment)||Number(t.total_cad),code:t.code,status:t.status};return l.a.createElement("tr",{key:n.num,onClick:function(){return e.invoiceEdit(t)}},l.a.createElement("td",null,n.num),l.a.createElement("td",null,n.date),l.a.createElement("td",null,n.totalCad.toFixed(2)),l.a.createElement("td",null,n.code),l.a.createElement("td",null,n.status))}))},e.clearMessage=function(){setTimeout((function(){e.setState({message:"",invoiceCode:""})}),3500)},e.getClientInfo=function(t){e.setState({client:t,clientId:t._id,disabledIPBtn:!1,tableVisibility:!1})},e.invoiceEdit=function(t){e.setState({openInvoiceModal:!0,invoice:t})},e.closeModal=function(){e.setState({openInvoiceModal:!1})},e.updateScreen=function(t){var a;if(t)a=e.state.invoiceList.map((function(a){return a._id===e.state.invoice._id&&(a.status=t),a}));else{var n=e.state.invoice._id;a=e.state.invoiceList.filter((function(e){return e._id!==n}))}var l=e.renderDataTable(a);e.setState({invoiceList:a,invoiceListTable:l,openInvoiceModal:!1})},e.updateInvoiceData=function(t){var a=Object(V.a)({},e.state.invoice);a.code=t.newInvoiceCode,a.cad_adjustment=t.newReceivedAmount,a.reason_adjustment=t.newReason;var n=e.state.invoiceList.map((function(e){return e._id===t.invoiceId?e=a:e}));e.setState({invoice:a,invoiceList:n,invoiceListTable:e.renderDataTable(n)})},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"formPosition"},l.a.createElement("br",null),this.state.openInvoiceModal?l.a.createElement(Ye,{invoice:this.state.invoice,client:this.state.client,closeModal:this.closeModal,updateScreen:this.updateScreen,openInvoiceModal:this.state.openInvoiceModal,storeToken:this.props.storeToken}):"",l.a.createElement(g.a,{className:"card-settings"},l.a.createElement(g.a.Header,null,"Invoice's List and Edit"),l.a.createElement(g.a.Body,null,l.a.createElement("div",{className:"gridClientBtContainer"},l.a.createElement(ge,{client:this.state.client,getClientInfo:this.getClientInfo,invoiceFlag:!0})," "),l.a.createElement("br",null),l.a.createElement(J.a,{onSubmit:this.handleGetInvoices},l.a.createElement(J.a.Group,{as:v.a,controlId:"formST"},l.a.createElement(J.a.Label,{column:!0,sm:"3",className:"cardLabel"},"Date Start:"),l.a.createElement(f.a,{sm:"5"},l.a.createElement(J.a.Control,{type:"date",name:"dateStart",onChange:this.handleChange,value:this.state.dateStart}))),l.a.createElement(J.a.Group,{as:v.a,controlId:"formET"},l.a.createElement(f.a,{sm:"3"},l.a.createElement(J.a.Label,{className:"cardLabel"},"Date End:")),l.a.createElement(f.a,{sm:"5"},l.a.createElement(J.a.Control,{type:"date",name:"dateEnd",onChange:this.handleChange,value:this.state.dateEnd}))),l.a.createElement(g.a.Footer,{className:this.state.classNameMessage},this.state.message?this.state.message:l.a.createElement("br",null)),l.a.createElement("br",null),l.a.createElement("div",{className:"d-flex flex-column"},l.a.createElement(D.a,{variant:"primary",type:"submit",onClick:this.handleGetInvoices,ref:function(t){return e.getInvoicesBtn=t}},"Get Invoices"))))),this.state.tableVisibility?l.a.createElement(g.a,{className:"cardInvoiceGenListofInvoices"},l.a.createElement(g.a.Header,{style:{textAlign:"center"}},"Client: ",l.a.createElement("b",null,this.state.client.nickname||this.state.client.name),", "," ",l.a.createElement("b",null,this.state.invoiceList.length)," ",this.state.invoiceList.length>1?"Invoices":"Invoice"),this.state.invoiceList.length>0?l.a.createElement("div",null,l.a.createElement(ke.a,{striped:!0,bordered:!0,hover:!0,size:"sm",responsive:!0},l.a.createElement("thead",null,l.a.createElement("tr",{style:{textAlign:"center",verticalAlign:"middle"}},l.a.createElement("th",null,"#"),l.a.createElement("th",null,"Date"),l.a.createElement("th",null,"CAD$"),l.a.createElement("th",null,"Code"),l.a.createElement("th",null,"Status"))),l.a.createElement("tbody",{style:{textAlign:"center"}},this.state.invoiceListTable))):null):null)}}]),a}(n.Component),Ve=Object(h.b)((function(e){return{storeToken:e.token}}),null)(We),Je=function(e){Object(o.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(e=t.call.apply(t,[this].concat(l))).state={newPassword:"",confirmPassword:"",code:"",url:"",user:"",cancel:!1,logged:!1,newResetPassword:!1,message:""},e.handleChange=function(t){e.setState(Object(W.a)({},t.target.name,t.target.value)),"Enter"===t.key&&"newPassword"===t.target.name&&""!==t.target.value?(e.textInput2.focus(),t.preventDefault()):"Enter"===t.key&&"confirmPassword"===t.target.name&&""!==t.target.value&&(e.handleSubmit(t),t.preventDefault())},e.handleSubmit=function(){var t=Object(Y.a)(z.a.mark((function t(a){var n,l,s;return z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),""!==e.state.newPassword){t.next=5;break}alert("New Password and Confirm Password have to be the same and not empty!"),t.next=21;break;case 5:if(e.state.newPassword===e.state.confirmPassword){t.next=9;break}alert("New Password and Confirm Password have to be the same."),t.next=21;break;case 9:return n="/user".concat(e.state.url),t.prev=10,t.next=13,X.a.post(n,{data:{userId:e.state.user._id,newPassword:e.state.newPassword}});case 13:(l=t.sent).data.message?((s=l.data.user).id=l.data.user._id,s.token=l.data.token,e.props.dispatchLogin({user:s}),e.setState({logged:!0})):e.setState({message:l.data.error,classNameMessage:"messageFailure"}),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(10),e.setState({message:t.t0.message,classNameMessage:"messageFailure"});case 20:e.clearMsg();case 21:case"end":return t.stop()}}),t,null,[[10,17]])})));return function(e){return t.apply(this,arguments)}}(),e.clearMsg=function(){setTimeout((function(){e.setState({message:""})}),3500)},e.cancelResetPassword=function(){e.setState({cancel:!0})},e.componentDidMount=Object(Y.a)(z.a.mark((function t(){var a,n,l,s;return z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=Object(u.f)(window.location.pathname,{path:"/reset_password/:param",exact:!0,strict:!1}),t.prev=1,n="/user/get_by_code/".concat(a.params.param),t.next=5,X.a.get(n,{data:{code:e.state.code}});case 5:(l=t.sent).data.message?e.setState({user:l.data.user,code:a.params.param,url:a.url}):(s={name:"<code is invaild>"},e.setState({user:l.data.code?l.data.user.name:s,message:l.data.error,classNameMessage:"messageFailure"}),setTimeout((function(){e.setState({newResetPassword:!0})}),5e3)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),e.setState({message:t.t0.message,classNameMessage:"messageFailure"});case 12:e.clearMsg();case 13:case"end":return t.stop()}}),t,null,[[1,9]])}))),e}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return this.state.cancel||this.state.newResetPassword?l.a.createElement(u.a,{to:"/login"}):this.state.logged?l.a.createElement(u.a,{to:"/"}):l.a.createElement("div",null,l.a.createElement("div",{className:"formPosition"},l.a.createElement("br",null),l.a.createElement("h3",null,"Reset Password"),l.a.createElement("br",null),l.a.createElement("p",null,"Hi ",l.a.createElement("b",null,this.state.user?this.state.user.name.split(" ")[0]:"")),l.a.createElement("br",null),l.a.createElement(g.a,{className:"card-settings"},l.a.createElement(J.a,{onSubmit:this.handleSubmit},l.a.createElement(J.a.Group,{controlId:"formBasicEmail"},l.a.createElement(J.a.Label,null,"New password"),l.a.createElement(J.a.Control,{autoFocus:!0,type:"password",placeholder:"Type new password",name:"newPassword",onChange:this.handleChange,onKeyPress:this.handleChange,value:this.state.newPassword,ref:function(t){return e.textInput1=t}}),l.a.createElement(J.a.Text,{className:"text-muted"},"Never share your password. ;)")),l.a.createElement(J.a.Group,{controlId:"formBasicPassword"},l.a.createElement(J.a.Label,null,"Confirm New Password"),l.a.createElement(J.a.Control,{type:"password",placeholder:"Confirm New Password",name:"confirmPassword",value:this.state.confirmPassword,onChange:this.handleChange,onKeyPress:this.handleChange,ref:function(t){return e.textInput2=t}})),l.a.createElement(b.a,{className:this.state.classNameMessage},this.state.message),l.a.createElement("br",null),l.a.createElement("div",{className:"d-flex flex-column"},l.a.createElement(_.a,{className:"mt-3"},l.a.createElement(D.a,{variant:"primary",type:"submit"},"Submit"),l.a.createElement(D.a,{variant:"danger",onClick:this.cancelResetPassword},"Cancel")))))))}}]),a}(n.Component),qe=Object(h.b)(null,(function(e){return{dispatchLogin:function(t){return e({type:"LOGIN",data:t})}}}))(Je),Xe=a(113),Ze=a.n(Xe),$e=a(114),Qe=a.n($e),et=a(115),tt=a.n(et),at=a(116),nt=a.n(at),lt=a(117),st=a.n(lt),rt=a(118),ct=a.n(rt),it=a(119),ot=a.n(it),mt=a(120),dt=a.n(mt);function ut(){var e=window.innerWidth;return l.a.createElement("div",{style:{all:"unset"},className:"formPosition"},l.a.createElement(g.a,{className:"bigCardPosition"},l.a.createElement(g.a.Header,{style:{textAlign:"center"}},l.a.createElement("h1",null,"Quick Guidance")),l.a.createElement(g.a.Body,null,l.a.createElement(g.a.Title,null,"With Clockin.js you are able to manage your clients data, work hours and invoices."),l.a.createElement("br",null),"You can access the functions described below on the menu bar (computer) or menu icon on top right side (mobile).",l.a.createElement(g.a,{style:{marginTop:"1rem"}},l.a.createElement(g.a.Header,{style:{fontSize:"h4"}},"1- Sign Up"),l.a.createElement(g.a.Body,null,"Here you enter you info"),l.a.createElement(g.a.Body,{style:{paddingTop:"0px"}},"If you set a real email you are going to receive emails when you punch in and set more security to your account - change data and password only occurs by receiving a code in your email."),l.a.createElement("div",null,l.a.createElement("img",{src:Ze.a,alt:"Clockin.js",width:e<800?.65*e:.3*e,style:{marginLeft:e<800?.25*e/2:"8rem"}})),l.a.createElement("br",null)),l.a.createElement(g.a,{style:{marginTop:"1rem"}},l.a.createElement(g.a.Header,{style:{fontSize:"h4"}},"2- Input your Clients' data"),l.a.createElement(g.a.Body,null,"The system also allows you to have client's contact info stored."),l.a.createElement(g.a.Body,{style:{paddingTop:"0px"}},"You can have one or multiples clients. (none also but it would not be the point :D)"),l.a.createElement("div",null,l.a.createElement("img",{src:Qe.a,alt:"Clockin.js",width:e<800?.65*e:.3*e,style:{marginLeft:e<800?.25*e/2:"8rem"}})),l.a.createElement("br",null)),l.a.createElement(g.a,{style:{marginTop:"1rem"}},l.a.createElement(g.a.Header,{style:{fontSize:"h4"}},"3- PunchIn"),l.a.createElement(g.a.Body,null,"Each time you work to a client you register the time about it - punch in."),l.a.createElement(g.a.Body,{style:{paddingTop:"0px"}},"For every Punch in, Clockin.js will send you an email with all info you registered. It is a way to double register."),l.a.createElement(g.a.Body,{style:{paddingTop:"0px"}},"You can also delete punchins."),l.a.createElement("div",null,l.a.createElement("img",{src:tt.a,alt:"Clockin.js",width:e<800?.65*e:.3*e,style:{marginLeft:e<800?.25*e/2:"8rem"}})),l.a.createElement("br",null),l.a.createElement("div",null,l.a.createElement("img",{src:nt.a,alt:"Clockin.js",width:e<800?.65*e:.3*e,style:{marginLeft:e<800?.25*e/2:"8rem"}})),l.a.createElement("br",null),l.a.createElement("div",null,l.a.createElement("img",{src:st.a,alt:"Clockin.js",width:e<800?.65*e:.3*e,style:{marginLeft:e<800?.25*e/2:"8rem"}})),l.a.createElement("br",null)),l.a.createElement(g.a,{style:{marginTop:"1rem"}},l.a.createElement(g.a.Header,{style:{fontSize:"h4"}},"4- Generate invoices"),l.a.createElement(g.a.Body,null,"At the end of a period we need to invoice a client."),l.a.createElement(g.a.Body,{style:{paddingTop:"0px"}},"For that, you go to Invoices menu, select the client, specify the period, set a code for the invoice and generate it."),l.a.createElement("br",null),l.a.createElement("div",null,l.a.createElement("img",{src:ct.a,alt:"Clockin.js",width:e<800?.65*e:.3*e,style:{marginLeft:e<800?.25*e/2:"8rem"}})),l.a.createElement("br",null),l.a.createElement(g.a.Body,{style:{paddingTop:"0px"}},"Afterwars, you can check the invoice and its clockins."),l.a.createElement("div",null,l.a.createElement("img",{src:ot.a,alt:"Clockin.js",width:e<800?.65*e:.3*e,style:{marginLeft:e<800?.25*e/2:"8rem"}})),l.a.createElement("br",null),l.a.createElement(g.a.Body,{style:{paddingTop:"0px"}},"Also, you can delete the invoice and manage their status wich are:"),l.a.createElement(g.a.Body,{style:{paddingTop:"0px",paddingLeft:"2rem"}},l.a.createElement("b",null,"1) Generated"),", after steps above,"),l.a.createElement(g.a.Body,{style:{paddingTop:"0px",paddingLeft:"2rem"}},l.a.createElement("b",null,"2) Delivered"),", when you handle the invoice to your client, and"),l.a.createElement(g.a.Body,{style:{paddingTop:"0px",paddingLeft:"2rem"}},l.a.createElement("b",null,"3) Received"),", when you get the earning$ in your pockets."),l.a.createElement("div",null,l.a.createElement("img",{src:dt.a,alt:"Clockin.js",width:e<800?.65*e:.3*e,style:{marginLeft:e<800?.25*e/2:"8rem"}})),l.a.createElement("br",null)),l.a.createElement(g.a.Body,{style:{marginTop:"1rem"}},"It is easy and helpful."),l.a.createElement(g.a.Body,{style:{paddingTop:"0px"}},"Let's get started!"),l.a.createElement(g.a.Body,{style:{paddingTop:"0px"}},"More info, motivation and tech topics at ",l.a.createElement(d.b,{to:"/about"},"About")," or ",l.a.createElement(d.b,{to:"/contact"},"Contact")),l.a.createElement(g.a.Body,{style:{paddingTop:"0px",paddingBottom:"0px"}},"Kind regards from"),l.a.createElement(g.a.Body,{style:{paddingTop:"0px",paddingLeft:"2rem",fontWeight:"bold"}},"Clockin.js Team :)")),l.a.createElement("br",null)),l.a.createElement(L,{bckColor:window.innerWidth<800?"aliceblue":"gainsboro",opac:"iconSettingsOpacity"}))}function ht(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(g.a,{className:"bigCardPosition"},l.a.createElement(g.a.Header,{style:{textAlign:"center"}},l.a.createElement("h1",null,"Contact")),l.a.createElement(g.a.Body,null,l.a.createElement("h4",{style:{marginTop:"1rem"}},"Clockin.js creator is Tony Kieling."),l.a.createElement("br",null),l.a.createElement("p",null,"Curious and self-taught passionate about data handling and process automation. He has a background as an IT system analyst, which has made him an excellent problem solver, always committed to finding ways to automate solutions using the right tools and best practices. He holds experience and maturity in dealing with customers and users' demands in a complex context and he is eager to face challenges and deliver a reliable and first-class code.")),l.a.createElement(g.a,{className:"cardsPresentationPosition"},l.a.createElement(g.a.Header,{style:{textAlign:"center"}},l.a.createElement("h4",null,"Tony Kieling's Contacts")),l.a.createElement(g.a.Body,null,l.a.createElement(b.a,{style:{maxWidth:"250px"}},l.a.createElement(v.a,null,l.a.createElement(f.a,{style:{textAlign:"center",padding:"0 5px"}},l.a.createElement("a",{href:"mailto:tony.kieling@gmail.com",target:"_top"},l.a.createElement("img",{src:C.a,alt:"gmail",className:"iconSettings"}))),l.a.createElement(f.a,{style:{textAlign:"center",padding:"0 5px"}},l.a.createElement("a",{href:"https://www.linkedin.com/in/tony-kieling/",target:"_blank",rel:"noopener noreferrer"},l.a.createElement("img",{src:I.a,className:"iconSettings",alt:"linkedin"}))),l.a.createElement(f.a,{style:{textAlign:"center",padding:"0 5px"}},l.a.createElement("a",{href:"https://github.com/tonykieling",target:"_blank",rel:"noopener noreferrer"},l.a.createElement("img",{src:S.a,className:"iconSettings",alt:"linkedin"}))),l.a.createElement(f.a,{style:{textAlign:"center",padding:"0 5px"}},l.a.createElement("a",{href:"https://resume.creddle.io/resume/hqaeq2fbnr6",target:"_blank",rel:"noopener noreferrer"},l.a.createElement("img",{src:x.a,alt:"resume",className:"iconSettings"}))))))),l.a.createElement("br",null),l.a.createElement("br",null)))}var pt=a(121),Et=a.n(pt),gt=function(){var e=Object(Y.a)(z.a.mark((function e(t,a,n,l){var s,r;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s="/clockin?dateStart=".concat(n,"&dateEnd=").concat(l,"&clientId=").concat(a),e.prev=1,e.next=4,X.a.get(s,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}});case 4:return r=e.sent,e.abrupt("return",r.data.allClockins);case 8:e.prev=8,e.t0=e.catch(1),console.log("Error: ",e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,a,n,l){return e.apply(this,arguments)}}(),bt=function(){var e=Object(Y.a)(z.a.mark((function e(t){var a,n,l,s,r,c,i,o,m,d,u,h;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gt(t.user.token,t.client._id,t.invoice.date_start.substring(0,10),t.invoice.date_end.substring(0,10));case 2:a=e.sent,n=Math.ceil(a.length/14),l=1,s={invoiceDate:t.invoice.date,invoiceNumber:t.invoice.code,serviceProviderName:t.user.name,mailingAddres:t.user.address,city:t.user.city,postalCode:"".concat(t.user.postalCode.substring(0,3),"\u2013").concat(t.user.postalCode.substring(3,6)),phoneNumber1:t.user.phone.substring(1,4),phoneNumber2:t.user.phone.substring(6,9),phoneNumber3:t.user.phone.substring(10,14),client:t.client.name,typeOfService:"Behaviour Intervention",totalCad:t.invoice.total_cad,invoiceSample:t.client.invoice_sample},r=new Et.a;case 7:if(l>1&&r.addPage(),r.addImage(s.invoiceSample,"JPEG",0,0,210,297),r.setTextColor(92,76,76),r.setFontSize(12),r.text(we(s.invoiceDate),131,30),r.text(s.invoiceNumber,168,30),r.text(s.serviceProviderName,77,41),r.text(s.mailingAddres,65,51.5),r.text(s.city,42,61.5),r.text(s.postalCode,154,61.5),r.text(s.phoneNumber1,63,71.5),r.text(s.phoneNumber2,80,71.5),r.text(s.phoneNumber3,91.5,71.5),r.text(s.client,72,164),r.setFontSize(11),r.text(s.typeOfService,30,190),n<2?(a.forEach((function(e,t){return r.text(we(e.date),78,4.25*t+190)})),a.forEach((function(e,t){return r.text("".concat((e.worked_hours/36e5).toFixed(2)),120,4.25*t+190,{align:"right"})})),a.forEach((function(e,t){return r.text("".concat(e.rate.toFixed(2)),150,4.25*t+190,{align:"right"})})),a.forEach((function(e,t){return r.text("".concat((e.worked_hours/36e5*e.rate).toFixed(2)),189.5,4.25*t+190,{align:"right"})}))):((c=a.slice(14*(l-1),14*l)).forEach((function(e,t){return r.text(we(e.date),78,4.25*t+190)})),c.forEach((function(e,t){return r.text("".concat((e.worked_hours/36e5).toFixed(2)),120,4.25*t+190,{align:"right"})})),c.forEach((function(e,t){return r.text("".concat(e.rate.toFixed(2)),150,4.25*t+190,{align:"right"})})),c.forEach((function(e,t){return r.text("".concat((e.worked_hours/36e5*e.rate).toFixed(2)),189.5,4.25*t+190,{align:"right"})}))),i=a.map((function(e){return Number((e.worked_hours/36e5).toFixed(2))})),o=i.reduce((function(e,t){return e+t})),m=(a[0].rate*o).toFixed(2),d="",u="",!(n>1)){e.next=45;break}r.setFontSize(9),e.t0=n,e.next=2===e.t0?33:3===e.t0?37:41;break;case 33:return d="Page ".concat(l," of 2"),r.setFontType("italic"),u="see 2nd page",e.abrupt("break",45);case 37:return d="Page ".concat(l," of 3"),r.setFontType("italic"),u="see 3rd page",e.abrupt("break",45);case 41:return d="Page ".concat(l," of ").concat(n),r.setFontType("italic"),u="see ".concat(n,"th page"),e.abrupt("break",45);case 45:!(h=n>1&&l<n)&&r.setFontSize(12),r.text(h?u:m,h?191:189.5,250.4,{align:"right"}),r.text("---",179,255.5),r.text(h?u:m,h?191:189.5,261,{align:"right"}),r.setFontSize(12),r.setFontType("normal"),r.text(d,191,289,{align:"right"}),l++;case 54:if(l<=n){e.next=7;break}case 55:r.save("".concat(s.invoiceNumber,".pdf"));case 56:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function ft(e){return l.a.createElement("div",null,l.a.createElement(F.a,{show:e.openModal,onHide:e.closeInvoicePdfModal},l.a.createElement(F.a.Header,null,"I am: ",e.user.name),l.a.createElement(F.a.Body,null,"This is body. Client is: ",e.client.name),l.a.createElement(F.a.Footer,null,"Footer"),l.a.createElement(_.a,null,l.a.createElement(D.a,{variant:"success",onClick:function(){return console.log("PDF is coming soon")}},"Generate a PDF file"),l.a.createElement(D.a,{variant:"danger",onClick:e.closeModal},"Close"))))}var vt=function(e){Object(o.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={dateStart:"",dateEnd:"",clientId:"",invoiceList:[],client:"",invoiceListTable:"",tableVisibility:!1,message:"",invoice:"",openInvoicePdfModal:!1},e.handleChange=function(t){e.setState(Object(W.a)({},t.target.name,t.target.value))},e.handleGetInvoices=function(){var t=Object(Y.a)(z.a.mark((function t(a){var n,l,s,r,c,i;return z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),n=e.state.dateStart,l=e.state.dateEnd,s=e.state.clientId,e.state.clientId){t.next=6;break}e.setState({message:"Select a client.",classNameMessage:"messageFailure"}),t.next=23;break;case 6:return r="/invoice?dateStart=".concat(n,"&dateEnd=").concat(l,"&clientId=").concat(s),t.prev=7,t.next=10,X.a.get(r,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e.props.storeToken)}});case 10:if(!(c=t.sent).data.allInvoices){t.next=16;break}i=!!e.state.client.invoice_sample,e.setState({invoiceList:c.data.allInvoices,invoiceListTable:e.renderDataTable(c.data.allInvoices),tableVisibility:!0,clientId:s,classNameMessage:"".concat(i?"messageSuccess":"messageFailure"),message:"".concat(i?"Click on the invoice to generate a pdf document and check your download folder.":"Click in the invoice to a general pdf invoice. Please, contact tony.kieling@gmail.com for any format changes.")}),t.next=17;break;case 16:throw c.data.message;case 17:t.next=23;break;case 19:t.prev=19,t.t0=t.catch(7),e.setState({message:t.t0,classNameMessage:"messageFailure"}),e.clearMessage();case 23:case"end":return t.stop()}}),t,null,[[7,19]])})));return function(e){return t.apply(this,arguments)}}(),e.renderDataTable=function(t){return t.map((function(t,a){var n={num:a+1,date:we(t.date),totalCad:Number(t.cad_adjustment)||Number(t.total_cad),code:t.code,status:t.status};return l.a.createElement("tr",{key:n.num,onClick:e.state.client.invoice_sample?function(){return e.issuePdf(t)}:function(){return e.setState({openInvoicePdfModal:!0})}},l.a.createElement("td",null,n.num),l.a.createElement("td",null,n.date),l.a.createElement("td",null,n.totalCad.toFixed(2)),l.a.createElement("td",null,n.code),l.a.createElement("td",null,n.status))}))},e.clearMessage=function(){setTimeout((function(){e.setState({message:"",invoiceCode:""})}),3500)},e.getClientInfo=function(t){e.setState({client:t,clientId:t._id,disabledIPBtn:!1,tableVisibility:!1,message:""})},e.issuePdf=function(t){if(e.state.client.invoice_sample){var a={invoice:t,user:e.props.user,client:e.state.client};bt(a)}else console.log("NO INVOICESAMPLE!")},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"formPosition"},this.state.openInvoicePdfModal&&l.a.createElement(ft,{user:this.props.user,client:this.state.client,openModal:this.state.openInvoicePdfModal,closeModal:function(){return e.setState({openInvoicePdfModal:!1})}}),l.a.createElement("br",null),l.a.createElement(g.a,{className:"card-settings"},l.a.createElement(g.a.Header,null,"Generate a Pdf file"),l.a.createElement(g.a.Body,null,l.a.createElement("div",{className:"gridClientBtContainer"},l.a.createElement(ge,{client:this.state.client,getClientInfo:this.getClientInfo,askInvoiceSample:!0,company:!0})),l.a.createElement("br",null),l.a.createElement(J.a,{onSubmit:this.handleGetInvoices},l.a.createElement(J.a.Group,{as:v.a,controlId:"formST"},l.a.createElement(J.a.Label,{column:!0,sm:"3",className:"cardLabel"},"Date Start:"),l.a.createElement(f.a,{sm:"5"},l.a.createElement(J.a.Control,{type:"date",name:"dateStart",onChange:this.handleChange,value:this.state.dateStart}))),l.a.createElement(J.a.Group,{as:v.a,controlId:"formET"},l.a.createElement(f.a,{sm:"3"},l.a.createElement(J.a.Label,{className:"cardLabel"},"Date End:")),l.a.createElement(f.a,{sm:"5"},l.a.createElement(J.a.Control,{type:"date",name:"dateEnd",onChange:this.handleChange,value:this.state.dateEnd}))),l.a.createElement(g.a.Footer,{className:this.state.classNameMessage},this.state.message?this.state.message:l.a.createElement("br",null)),l.a.createElement("br",null),l.a.createElement("div",{className:"d-flex flex-column"},l.a.createElement(D.a,{variant:"primary",type:"submit",onClick:this.handleGetInvoices,ref:function(t){return e.getInvoicesBtn=t}},"Get Invoices"))))),this.state.tableVisibility?l.a.createElement(g.a,{className:"cardInvoiceGenListofInvoices"},l.a.createElement(g.a.Header,{style:{textAlign:"center"}},"Client: ",l.a.createElement("b",null,this.state.client.nickname||this.state.client.name),", "," ",l.a.createElement("b",null,this.state.invoiceList.length)," ",this.state.invoiceList.length>1?"Invoices":"Invoice"),this.state.invoiceList.length>0?l.a.createElement("div",null,l.a.createElement(ke.a,{striped:!0,bordered:!0,hover:!0,size:"sm",responsive:!0},l.a.createElement("thead",null,l.a.createElement("tr",{style:{textAlign:"center",verticalAlign:"middle"}},l.a.createElement("th",null,"#"),l.a.createElement("th",null,"Date"),l.a.createElement("th",null,"CAD$"),l.a.createElement("th",null,"Code"),l.a.createElement("th",null,"Status"))),l.a.createElement("tbody",{style:{textAlign:"center"}},this.state.invoiceListTable))):null):null)}}]),a}(n.Component),yt=Object(h.b)((function(e){return{storeToken:e.token,user:e}}),null)(vt),Ct=function(e){Object(o.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={name:"",defaultRate:"",message:"",className:"",disableBtn:!1,email:"",typeOfService:"",address:"",city:"",province:"",postalCode:"",phone:"",messageControlName:"",messageControlDefaultRate:"",pcOutsideCanada:!1},e.handleChange=function(t){e.setState(Object(W.a)({},t.target.name,t.target.value)),"name"===t.target.name&&e.state.messageControlName&&e.setState({messageControlName:""}),"defaultRate"===t.target.name&&e.state.messageControlDefaultRate&&e.setState({messageControlDefaultRate:""})},e.handlePostalCode=function(t){var a=t.target.value;e.setState({postalCode:isNaN(a)?a.toUpperCase():a})},e.handleCheckPostalCode=function(){e.setState({pcOutsideCanada:!e.state.pcOutsideCanada})},e.handleSubmit=function(){var t=Object(Y.a)(z.a.mark((function t(a){var n,s,r;return z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),window.scrollTo(0,2e3),e.state.name&&e.state.defaultRate){t.next=7;break}e.state.defaultRate||(e.setState({messageControlDefaultRate:"Please inform the default rate($)."}),e.textInput9.focus()),e.state.name||(window.scrollTo(0,0),e.setState({messageControlName:"Please inform client's name."}),e.textInput1.focus()),t.next=28;break;case 7:return e.setState({disableBtn:!0}),"/client",n=e.state.postalCode?e.state.pcOutsideCanada?e.state.postalCode:e.state.postalCode.substr(0,7).split(" ").join(""):void 0,s={name:e.state.name,defaultRate:e.state.defaultRate,email:e.state.email||void 0,address:e.state.address||void 0,city:e.state.city||void 0,province:e.state.province||void 0,phone:e.state.phone||void 0,postalCode:n,typeOfService:e.state.typeOfService||void 0},t.prev=11,t.next=14,X.a.post("/client",s,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e.props.storeToken)}});case 14:if(!(r=t.sent).data.message){t.next=19;break}e.setState({message:l.a.createElement("p",null,"Client ",l.a.createElement("b",null,e.state.name)," has been created."),className:"messageSuccess",name:"",email:"",phone:"",address:"",city:"",province:"",postalCode:"",typeOfService:"",defaultRate:""}),t.next=21;break;case 19:if(!r.data.error){t.next=21;break}throw r.data.error;case 21:t.next=27;break;case 23:t.prev=23,t.t0=t.catch(11),window.scrollTo(0,2e4),e.setState({message:t.t0.message||t.t0,className:"messageFailure"});case 27:e.clearMessage();case 28:case"end":return t.stop()}}),t,null,[[11,23]])})));return function(e){return t.apply(this,arguments)}}(),e.clearMessage=function(){setTimeout((function(){e.setState({message:"",disableBtn:!1,pcOutsideCanada:!1}),window.scrollTo(0,0),e.textInput1.focus()}),3500)},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"formPosition"},l.a.createElement("br",null),l.a.createElement(g.a,{className:"card-settings"},l.a.createElement(g.a.Header,null,l.a.createElement("h2",null,"New Client")),l.a.createElement(J.a,{autoComplete:"off",className:"formPosition",style:{width:"30rem"},onSubmit:this.handleSubmit},l.a.createElement(J.a.Group,{controlId:"formName"},l.a.createElement("br",null),l.a.createElement(J.a.Label,{className:"cardLabel"},"Name"),l.a.createElement(J.a.Control,{autoFocus:!0,type:"text",placeholder:"Client's name",name:"name",onChange:this.handleChange,value:this.state.name,onKeyPress:this.handleChange,disabled:this.state.disableBtn,ref:function(t){return e.textInput1=t}}),l.a.createElement(J.a.Text,{className:"messageControl-user"},this.state.messageControlName)),l.a.createElement(J.a.Group,{controlId:"formEmail"},l.a.createElement(J.a.Label,{className:"cardLabel"},"Email"),l.a.createElement(J.a.Control,{type:"email",pattern:"[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,}$",placeholder:"Client's email",name:"email",onChange:this.handleChange,value:this.state.email,onKeyPress:this.handleChange,disabled:this.state.disableBtn,ref:function(t){return e.textInput2=t}})),l.a.createElement(J.a.Group,{controlId:"formPhone"},l.a.createElement(J.a.Label,{className:"cardLabel"},"Phone"),l.a.createElement($.a,{mask:["(",/[1-9]/,/\d/,/\d/,")"," ",/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,/\d/],className:"form-control",placeholder:"Client's phone number",name:"phone",value:this.state.phone,onKeyPress:this.handleChange,disabled:this.state.disableBtn})),l.a.createElement(J.a.Group,{controlId:"formAddress"},l.a.createElement(J.a.Label,{className:"cardLabel"},"Address"),l.a.createElement(J.a.Control,{type:"text",placeholder:"street, place..",name:"address",onChange:this.handleChange,value:this.state.address,disabled:this.state.disableBtn,onKeyPress:this.handleChange,ref:function(t){return e.textInput4=t}})),l.a.createElement(J.a.Group,{controlId:"formCity"},l.a.createElement(J.a.Label,{className:"cardLabel"},"City"),l.a.createElement(J.a.Control,{type:"text",placeholder:"city",name:"city",onChange:this.handleChange,value:this.state.city,disabled:this.state.disableBtn,onKeyPress:this.handleChange,ref:function(t){return e.textInput5=t}})),l.a.createElement(J.a.Group,{controlId:"formProvince"},l.a.createElement(J.a.Label,{className:"cardLabel"},"Province"),l.a.createElement(J.a.Control,{type:"text",placeholder:"province",name:"province",onChange:this.handleChange,value:this.state.province,disabled:this.state.disableBtn,onKeyPress:this.handleChange,ref:function(t){return e.textInput6=t}})),l.a.createElement(J.a.Group,{controlId:"formPostalCode"},l.a.createElement(J.a.Label,{className:"cardLabel"},"Postal Code"),l.a.createElement(J.a.Check,{inline:!0,label:" outside Canada",checked:this.state.pcOutsideCanada,type:"checkbox",style:{marginLeft:"1rem"},onChange:this.handleCheckPostalCode,disabled:this.state.disableBtn}),this.state.pcOutsideCanada?l.a.createElement(J.a.Control,{type:"text",placeholder:"Enter client's postal code",name:"postalCode",onChange:this.handleChange,value:this.state.postalCode,disabled:this.state.disableBtn,onKeyPress:this.handleChange,ref:function(t){return e.textInput7=t}}):l.a.createElement($.a,{mask:[/[A-Z]/i,/\d/,/[A-Z]/i," ",/\d/,/[A-Z]/i,/\d/],className:"form-control",placeholder:"Enter client's postal code",name:"postalCode",value:this.state.postalCode,onChange:this.handlePostalCode,disabled:this.state.disableBtn})),l.a.createElement(J.a.Group,{controlId:"formTypeOfService"},l.a.createElement(J.a.Label,{className:"cardLabel"},"Type of service"),l.a.createElement(J.a.Control,{type:"text",placeholder:"Categorize the service provided by you",name:"typeOfService",onChange:this.handleChange,value:this.state.typeOfService,disabled:this.state.disableBtn,onKeyPress:this.handleChange,ref:function(t){return e.textInput8=t}})),l.a.createElement(J.a.Group,{controlId:"formDefaultRate"},l.a.createElement(J.a.Label,{className:"cardLabel"},"Rate"),l.a.createElement(J.a.Control,{type:"number",placeholder:"Hourly rate - CAD$",name:"defaultRate",onChange:this.handleChange,value:this.state.defaultRate,disabled:this.state.disableBtn,onKeyPress:this.handleChange,ref:function(t){return e.textInput9=t}}),l.a.createElement(J.a.Text,{className:"messageControl-user"},this.state.messageControlDefaultRate)),l.a.createElement(g.a.Footer,{className:this.state.className},this.state.message?this.state.message:l.a.createElement("br",null)),l.a.createElement("div",{className:"d-flex flex-column"},l.a.createElement(D.a,{disabled:this.state.disableBtn,variant:"primary",type:"submit",ref:function(t){return e.buttonSave=t}},"Save")))),l.a.createElement("br",null),l.a.createElement("br",null))}}]),a}(n.Component),kt=Object(h.b)((function(e){return{storeToken:e.token}}),null)(Ct);a(107);var xt=Object(h.b)((function(e){return{storeUser:e.name,storeToken:e.token}}),null)((function(e){var t=Object(n.useState)({client:{id:"",name:""},period:{dateStart:"",dateEnd:""},message:{descripition:"",classNameMessage:""},showOutput:!1,checkAllClients:!1}),a=Object(A.a)(t,2),s=a[0],r=a[1],c=function(e){var t=e.target,a=t.name,n=t.value;r(Object(V.a)(Object(V.a)({},s),{},{period:Object(V.a)(Object(V.a)({},s.period),{},Object(W.a)({},a,n)),message:{descripition:""}}))},i=Object(n.useState)({period:{dateStart:"",dateEnd:""},summary:{totalClockins:"",totalHours:"",totalClockinsInvoiced:"",totalHoursInvoiced:"",totalClockinsNoInvoice:"",totalHoursNoInvoice:"",client:""},clockinsByClient:[],message:""}),o=Object(A.a)(i,2),m=o[0],d=o[1],u=function(){var t=Object(Y.a)(z.a.mark((function t(a){var n,l,c,i,o,u,h;return z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r(Object(V.a)(Object(V.a)({},s),{},{message:{descripition:""}})),a.preventDefault(),n=s.client,l=s.period.dateStart,c=s.period.dateEnd,console.log("dates:",c,l),l&&c){t.next=8;break}r(Object(V.a)(Object(V.a)({},s),{},{message:{descripition:n._id||s.checkAllClients?"Please, set period.":"Please, select client and set period.",classNameMessage:"messageFailure"}})),t.next=31;break;case 8:if(!n._id&&!s.checkAllClients){t.next=30;break}if(i=new Date(l).getTime(),o=new Date(c).getTime(),!(i>o)){t.next=15;break}r(Object(V.a)(Object(V.a)({},s),{},{message:{descripition:"Check you dates.",classNameMessage:"messageFailure"}})),t.next=28;break;case 15:return t.prev=15,u="/report/clockins?dateStart=".concat(l,"&dateEnd=").concat(c,"&clientId=").concat(s.client._id,"&checkAllClients=").concat(s.checkAllClients),t.next=19,X.a.get(u,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e.storeToken)}});case 19:h=t.sent,console.log("getClockinsReport",h),"summary"in h.data?("message"in h.data.summary?d({message:"There is no clockins for this period.",summary:{client:h.data.summary.client},period:h.data.period}):d(Object(V.a)(Object(V.a)({},m),{},{message:"",period:h.data.period,summary:h.data.summary,clockinsByClient:h.data.clockinsByClient})),r(Object(V.a)(Object(V.a)({},s),{},{showOutput:!0,message:""}))):(console.log("ERROR:",h.data.error),r(Object(V.a)(Object(V.a)({},s),{},{message:{classNameMessage:"messageFailure",descripition:h.data.error.search("ECA01")?"Token expired - User needs to login again.":h.data.error}}))),t.next=28;break;case 24:t.prev=24,t.t0=t.catch(15),console.log("Another ERRRRRRR",t.t0.message||t.t0),r(Object(V.a)(Object(V.a)({},s),{},{message:{descripition:t.t0.message,classNameMessage:"messageFailure"}}));case 28:t.next=31;break;case 30:r(Object(V.a)(Object(V.a)({},s),{},{message:{descripition:"Please, choose a client option.",classNameMessage:"messageFailure"}}));case 31:case"end":return t.stop()}}),t,null,[[15,24]])})));return function(e){return t.apply(this,arguments)}}();return l.a.createElement("div",{className:"formPosition"},l.a.createElement("br",null),l.a.createElement(g.a,{className:"card-settings"},l.a.createElement(g.a.Header,null,"Reports - Clockins"),l.a.createElement(g.a.Body,null,l.a.createElement("div",{className:"gridClientBtContainer"},l.a.createElement(ge,{client:s.client,getClientInfo:function(e){r(Object(V.a)(Object(V.a)({},s),{},{client:e,message:{descripition:""},checkAllClients:!e._id,showOutput:!1}))},report:!0})),l.a.createElement("br",null),l.a.createElement(J.a,null,l.a.createElement(J.a.Group,{as:v.a,controlId:"formST"},l.a.createElement(J.a.Label,{column:!0,sm:"3",className:"cardLabel"},"Date Start:"),l.a.createElement(f.a,{sm:"5"},l.a.createElement(J.a.Control,{type:"date",name:"dateStart",onChange:c,value:s.period.dateStart}))),l.a.createElement(J.a.Group,{as:v.a,controlId:"formET"},l.a.createElement(f.a,{sm:"3"},l.a.createElement(J.a.Label,{className:"cardLabel"},"Date End:")),l.a.createElement(f.a,{sm:"5"},l.a.createElement(J.a.Control,{type:"date",name:"dateEnd",onChange:c,value:s.period.dateEnd}))),l.a.createElement(g.a.Footer,{className:s.message.classNameMessage},s.message&&s.message.descripition?s.message.descripition:l.a.createElement("br",null)),l.a.createElement("br",null),l.a.createElement("div",{className:"d-flex flex-column"},l.a.createElement(D.a,{variant:"primary",onClick:u},"Get List"))))),s.showOutput&&l.a.createElement("div",null,l.a.createElement(g.a,{className:"report-card"},l.a.createElement(g.a.Header,{className:"report-header"},"Clockins' Report"),s.checkAllClients?l.a.createElement(g.a.Text,{className:"report-main-title"},e.storeUser,"'s clients report"):l.a.createElement(g.a.Text,{className:"report-main-title"},e.storeUser,"'s Client: ",m.summary.client),l.a.createElement(g.a.Text,{className:"report-period"},l.a.createElement("b",null,"Period:")," ",we(m.period.dateStart)," to ",we(m.period.dateEnd)),l.a.createElement(g.a.Text,{className:"report-general-subtitle"},"Summary:"),m.message?l.a.createElement(g.a.Text,{className:"report-items"},m.message):l.a.createElement(l.a.Fragment,null,l.a.createElement(ke.a,{bordered:!0,size:"sm",style:{width:"15rem",marginLeft:"3rem"}},l.a.createElement("thead",{style:{textAlign:"center"}},l.a.createElement("tr",null,l.a.createElement("td",{colSpan:"2"},"Total of ",l.a.createElement("b",null,m.summary.totalHours," hour",m.summary.totalHours>1&&"s")," in ",l.a.createElement("b",null,m.summary.totalClockins," clockin",m.summary.totalClockins>1&&"s")))),l.a.createElement("tr",{style:{verticalAlign:"middle"}},l.a.createElement("td",null,"Clockins Invoiced"),l.a.createElement("td",{style:{textAlign:"center",width:"4rem"}}," ",m.summary.totalClockinsInvoiced," ")),l.a.createElement("tr",{style:{verticalAlign:"middle"}},l.a.createElement("td",null,"Clockins no Invoice"),l.a.createElement("td",{style:{textAlign:"center"}}," ",m.summary.totalClockinsNoInvoice," ")),l.a.createElement("tr",{style:{verticalAlign:"middle"}},l.a.createElement("td",null,"Hours Invoiced"),l.a.createElement("td",{style:{textAlign:"center"}}," ",m.summary.totalHoursInvoiced," ")),l.a.createElement("tr",{style:{verticalAlign:"middle"}},l.a.createElement("td",null,"Hours no Invoice"),l.a.createElement("td",{style:{textAlign:"center"}}," ",m.summary.totalHoursNoInvoice," ")))),s.checkAllClients&&l.a.createElement("div",null,l.a.createElement("br",null),l.a.createElement(g.a.Text,{className:"report-general-subtitle"},"Clockins by Client:"),m.clockinsByClient.map((function(e,t){return e.message?l.a.createElement("div",{key:t},l.a.createElement(g.a.Text,{className:"report-items-by-client-first"},l.a.createElement("b",null,t+1,"- Client: ",e.client)),l.a.createElement(g.a.Text,{className:"report-items-by-client"},e.message)):l.a.createElement("div",{key:t},l.a.createElement(g.a.Text,{className:"report-items-by-client-first"},l.a.createElement("b",null,t+1,"- Client: ",e.client)),l.a.createElement(ke.a,{bordered:!0,size:"sm",style:{width:"15rem",marginLeft:"3rem"}},l.a.createElement("thead",{style:{textAlign:"center"}},l.a.createElement("tr",null,l.a.createElement("td",{colSpan:"2"},"Total of ",l.a.createElement("b",null,e.totalHours," hour",e.totalHours>1&&"s")," in ",l.a.createElement("b",null,e.totalClockins," clockin",e.totalClockins>1&&"s")))),l.a.createElement("tr",{style:{verticalAlign:"middle"}},l.a.createElement("td",null,"Clockins Invoiced"),l.a.createElement("td",{style:{textAlign:"center",width:"4rem"}}," ",e.totalClockinsInvoiced," ")),l.a.createElement("tr",{style:{verticalAlign:"middle"}},l.a.createElement("td",null,"Clockins no Invoice"),l.a.createElement("td",{style:{textAlign:"center"}}," ",e.totalClockinsNoInvoice," ")),l.a.createElement("tr",{style:{verticalAlign:"middle"}},l.a.createElement("td",null,"Hours Invoiced"),l.a.createElement("td",{style:{textAlign:"center"}}," ",e.totalHoursInvoiced," ")),l.a.createElement("tr",{style:{verticalAlign:"middle"}},l.a.createElement("td",null,"Hours no Invoice"),l.a.createElement("td",{style:{textAlign:"center"}}," ",e.totalHoursNoInvoice," "))))}))),l.a.createElement("br",null)),l.a.createElement("br",null)))}));var wt=Object(h.b)((function(e){return{storeUser:e.name,storeToken:e.token}}),null)((function(e){var t=Object(n.useState)({client:{id:"",name:""},period:{dateStart:"2020-01-01",dateEnd:"2020-12-30"},message:{descripition:"",classNameMessage:""},showOutput:!1,checkAllClients:!1}),a=Object(A.a)(t,2),s=a[0],r=a[1],c=function(e){var t=e.target,a=t.name,n=t.value;r(Object(V.a)(Object(V.a)({},s),{},{period:Object(V.a)(Object(V.a)({},s.period),{},Object(W.a)({},a,n)),message:{descripition:""}}))},i=Object(n.useState)({period:{dateStart:"",dateEnd:""},summary:{totalClockins:"",totalHours:"",totalClockinsInvoiced:"",totalHoursInvoiced:"",totalClockinsNoInvoice:"",totalHoursNoInvoice:"",client:""},clockinsByClient:[],message:""}),o=Object(A.a)(i,2),m=o[0],d=o[1],u=function(){var t=Object(Y.a)(z.a.mark((function t(a){var n,l,c,i,o,u,h;return z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r(Object(V.a)(Object(V.a)({},s),{},{message:{descripition:""}})),a.preventDefault(),n=s.client,l=s.period.dateStart,c=s.period.dateEnd,console.log("dates:",c,l),l&&c){t.next=8;break}r(Object(V.a)(Object(V.a)({},s),{},{message:{descripition:n._id||s.checkAllClients?"Please, set period.":"Please, select client and set period.",classNameMessage:"messageFailure"}})),t.next=31;break;case 8:if(!n._id&&!s.checkAllClients){t.next=30;break}if(i=new Date(l).getTime(),o=new Date(c).getTime(),!(i>o)){t.next=15;break}r(Object(V.a)(Object(V.a)({},s),{},{message:{descripition:"Check you dates.",classNameMessage:"messageFailure"}})),t.next=28;break;case 15:return t.prev=15,u="/report/clockins?dateStart=".concat(l,"&dateEnd=").concat(c,"&clientId=").concat(s.client._id,"&checkAllClients=").concat(s.checkAllClients),t.next=19,X.a.get(u,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e.storeToken)}});case 19:h=t.sent,console.log("getClockinsReport",h),"summary"in h.data?("message"in h.data.summary?d({message:"There is no clockins for this period.",summary:{client:h.data.summary.client},period:h.data.period}):d(Object(V.a)(Object(V.a)({},m),{},{message:"",period:h.data.period,summary:h.data.summary,clockinsByClient:h.data.clockinsByClient})),r(Object(V.a)(Object(V.a)({},s),{},{showOutput:!0,message:""}))):(console.log("ERROR:",h.data.error),r(Object(V.a)(Object(V.a)({},s),{},{message:{classNameMessage:"messageFailure",descripition:h.data.error.search("ECA01")?"Token expired - User needs to login again.":h.data.error}}))),t.next=28;break;case 24:t.prev=24,t.t0=t.catch(15),console.log("Another ERRRRRRR",t.t0.message||t.t0),r(Object(V.a)(Object(V.a)({},s),{},{message:{descripition:t.t0.message,classNameMessage:"messageFailure"}}));case 28:t.next=31;break;case 30:r(Object(V.a)(Object(V.a)({},s),{},{message:{descripition:"Please, choose a client option.",classNameMessage:"messageFailure"}}));case 31:case"end":return t.stop()}}),t,null,[[15,24]])})));return function(e){return t.apply(this,arguments)}}();return l.a.createElement("div",{className:"formPosition"},l.a.createElement("br",null),l.a.createElement(g.a,{className:"card-settings"},l.a.createElement(g.a.Header,null,"Report - Invoices - Coming soon"),l.a.createElement(g.a.Body,null,l.a.createElement("div",{className:"gridClientBtContainer"}),l.a.createElement("br",null),l.a.createElement(J.a,null,l.a.createElement(J.a.Group,{as:v.a,controlId:"formST"},l.a.createElement(J.a.Label,{column:!0,sm:"3",className:"cardLabel"},"Date Start:"),l.a.createElement(f.a,{sm:"5"},l.a.createElement(J.a.Control,{type:"date",name:"dateStart",onChange:c,value:s.period.dateStart,disabled:!0}))),l.a.createElement(J.a.Group,{as:v.a,controlId:"formET"},l.a.createElement(f.a,{sm:"3"},l.a.createElement(J.a.Label,{className:"cardLabel"},"Date End:")),l.a.createElement(f.a,{sm:"5"},l.a.createElement(J.a.Control,{type:"date",name:"dateEnd",onChange:c,value:s.period.dateEnd,disabled:!0}))),l.a.createElement(g.a.Footer,{className:s.message.classNameMessage},s.message&&s.message.descripition?s.message.descripition:l.a.createElement("br",null)),l.a.createElement("br",null),l.a.createElement("div",{className:"d-flex flex-column"},l.a.createElement(D.a,{variant:"primary",onClick:u,disabled:!0},"Get List"))))),s.showOutput&&l.a.createElement("div",null,l.a.createElement(g.a,{className:"report-card"},l.a.createElement(g.a.Header,{className:"report-header"},"Clockins' Report"),s.checkAllClients?l.a.createElement(g.a.Text,{className:"report-main-title"},e.storeUser,"'s clients report"):l.a.createElement(g.a.Text,{className:"report-main-title"},e.storeUser,"'s Client: ",m.summary.client),l.a.createElement(g.a.Text,{className:"report-period"},l.a.createElement("b",null,"Period:")," ",we(m.period.dateStart)," to ",we(m.period.dateEnd)),l.a.createElement(g.a.Text,{className:"report-general-subtitle"},"Summary:"),m.message?l.a.createElement(g.a.Text,{className:"report-items"},m.message):l.a.createElement(l.a.Fragment,null,l.a.createElement(ke.a,{bordered:!0,size:"sm",style:{width:"15rem",marginLeft:"3rem"}},l.a.createElement("thead",{style:{textAlign:"center"}},l.a.createElement("tr",null,l.a.createElement("td",{colSpan:"2"},"Total of ",l.a.createElement("b",null,m.summary.totalHours," hour",m.summary.totalHours>1&&"s")," in ",l.a.createElement("b",null,m.summary.totalClockins," clockin",m.summary.totalClockins>1&&"s")))),l.a.createElement("tr",{style:{verticalAlign:"middle"}},l.a.createElement("td",null,"Clockins Invoiced"),l.a.createElement("td",{style:{textAlign:"center",width:"4rem"}}," ",m.summary.totalClockinsInvoiced," ")),l.a.createElement("tr",{style:{verticalAlign:"middle"}},l.a.createElement("td",null,"Clockins no Invoice"),l.a.createElement("td",{style:{textAlign:"center"}}," ",m.summary.totalClockinsNoInvoice," ")),l.a.createElement("tr",{style:{verticalAlign:"middle"}},l.a.createElement("td",null,"Hours Invoiced"),l.a.createElement("td",{style:{textAlign:"center"}}," ",m.summary.totalHoursInvoiced," ")),l.a.createElement("tr",{style:{verticalAlign:"middle"}},l.a.createElement("td",null,"Hours no Invoice"),l.a.createElement("td",{style:{textAlign:"center"}}," ",m.summary.totalHoursNoInvoice," ")))),s.checkAllClients&&l.a.createElement("div",null,l.a.createElement("br",null),l.a.createElement(g.a.Text,{className:"report-general-subtitle"},"Clockins by Client:"),m.clockinsByClient.map((function(e,t){return e.message?l.a.createElement("div",{key:t},l.a.createElement(g.a.Text,{className:"report-items-by-client-first"},l.a.createElement("b",null,t+1,"- Client: ",e.client)),l.a.createElement(g.a.Text,{className:"report-items-by-client"},e.message)):l.a.createElement("div",{key:t},l.a.createElement(g.a.Text,{className:"report-items-by-client-first"},l.a.createElement("b",null,t+1,"- Client: ",e.client)),l.a.createElement(ke.a,{bordered:!0,size:"sm",style:{width:"15rem",marginLeft:"3rem"}},l.a.createElement("thead",{style:{textAlign:"center"}},l.a.createElement("tr",null,l.a.createElement("td",{colSpan:"2"},"Total of ",l.a.createElement("b",null,e.totalHours," hour",e.totalHours>1&&"s")," in ",l.a.createElement("b",null,e.totalClockins," clockin",e.totalClockins>1&&"s")))),l.a.createElement("tr",{style:{verticalAlign:"middle"}},l.a.createElement("td",null,"Clockins Invoiced"),l.a.createElement("td",{style:{textAlign:"center",width:"4rem"}}," ",e.totalClockinsInvoiced," ")),l.a.createElement("tr",{style:{verticalAlign:"middle"}},l.a.createElement("td",null,"Clockins no Invoice"),l.a.createElement("td",{style:{textAlign:"center"}}," ",e.totalClockinsNoInvoice," ")),l.a.createElement("tr",{style:{verticalAlign:"middle"}},l.a.createElement("td",null,"Hours Invoiced"),l.a.createElement("td",{style:{textAlign:"center"}}," ",e.totalHoursInvoiced," ")),l.a.createElement("tr",{style:{verticalAlign:"middle"}},l.a.createElement("td",null,"Hours no Invoice"),l.a.createElement("td",{style:{textAlign:"center"}}," ",e.totalHoursNoInvoice," "))))}))),l.a.createElement("br",null)),l.a.createElement("br",null)))})),It=function(e){Object(o.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return l.a.createElement(d.a,null,l.a.createElement(K,null),l.a.createElement(u.d,null,l.a.createElement(u.b,{exact:!0,path:"/",render:function(){return e.props.storeEmail?l.a.createElement(oe,null):l.a.createElement(u.a,{to:"/land"})}}),l.a.createElement(u.b,{exact:!0,path:"/user",render:function(){return e.props.storeEmail?l.a.createElement(ue,null):l.a.createElement(u.a,{to:"/land"})}}),l.a.createElement(u.b,{exact:!0,path:"/land",render:function(){return e.props.storeEmail?l.a.createElement(u.a,{to:"/"}):l.a.createElement(P,null)}}),l.a.createElement(u.b,{exact:!0,path:"/signup",render:function(){return e.props.storeEmail?l.a.createElement(u.a,{to:"/"}):l.a.createElement(te,null)}}),l.a.createElement(u.b,{exact:!0,path:"/login",render:function(){return e.props.storeEmail?l.a.createElement(u.a,{to:"/"}):l.a.createElement(ie,null)}}),l.a.createElement(u.b,{exact:!0,path:"/clientNew",render:function(){return e.props.storeEmail?l.a.createElement(fe,null):l.a.createElement(ie,null)}}),l.a.createElement(u.b,{exact:!0,path:"/clientGeneralNew",render:function(){return e.props.storeEmail?l.a.createElement(kt,null):l.a.createElement(ie,null)}}),l.a.createElement(u.b,{exact:!0,path:"/clientList",render:function(){return e.props.storeEmail?l.a.createElement(Ce,null):l.a.createElement(ie,null)}}),l.a.createElement(u.b,{exact:!0,path:"/punchInNew",render:function(){return e.props.storeEmail?l.a.createElement(Le,null):l.a.createElement(ie,null)}}),l.a.createElement(u.b,{exact:!0,path:"/punchInsList",render:function(){return e.props.storeEmail?l.a.createElement(Oe,null):l.a.createElement(ie,null)}}),l.a.createElement(u.b,{exact:!0,path:"/invoiceNew",render:function(){return e.props.storeEmail?l.a.createElement(De,null):l.a.createElement(ie,null)}}),l.a.createElement(u.b,{exact:!0,path:"/invoicesList",render:function(){return e.props.storeEmail?l.a.createElement(Ve,null):l.a.createElement(ie,null)}}),l.a.createElement(u.b,{exact:!0,path:"/invoiceIssue",render:function(){return e.props.storeEmail?l.a.createElement(yt,null):l.a.createElement(ie,null)}}),l.a.createElement(u.b,{exact:!0,path:"/reset_password"},l.a.createElement(qe,null)),l.a.createElement(u.b,{exact:!0,path:"/about"},l.a.createElement(Be,null)),l.a.createElement(u.b,{exact:!0,path:"/guidance"},l.a.createElement(ut,null)),l.a.createElement(u.b,{exact:!0,path:"/contact"},l.a.createElement(ht,null)),l.a.createElement(u.b,{exact:!0,path:"/reports/clockins"},l.a.createElement(xt,null)),l.a.createElement(u.b,{exact:!0,path:"/reports/invoices"},l.a.createElement(wt,null)),l.a.createElement(u.b,{component:P})))}}]),a}(n.Component),Nt=Object(h.b)((function(e){return{storeEmail:e.email}}),null)(It),St=a(67),Lt=function(){try{var e={id:localStorage.getItem("id"),name:localStorage.getItem("name"),email:localStorage.getItem("email"),token:localStorage.getItem("token"),address:localStorage.getItem("address"),city:localStorage.getItem("city"),postalCode:localStorage.getItem("postalCode"),phone:localStorage.getItem("phone")};return e||void 0}catch(t){return}},Tt=function(e){try{localStorage.setItem("id",e.id),localStorage.setItem("email",e.email),localStorage.setItem("name",e.name),localStorage.setItem("token",e.token),localStorage.setItem("city",e.city),localStorage.setItem("address",e.address),localStorage.setItem("postalCode",e.postalCode),localStorage.setItem("phone",e.phone)}catch(t){return t.message}},Pt=function(){localStorage.removeItem("id"),localStorage.removeItem("name"),localStorage.removeItem("email"),localStorage.removeItem("token"),localStorage.removeItem("address"),localStorage.removeItem("city"),localStorage.removeItem("postalCode"),localStorage.removeItem("phone")},At={},Ot=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:At,t=arguments.length>1?arguments[1]:void 0,a=Object(V.a)({},e);return"LOGIN"===t.type?(a=Object(V.a)(Object(V.a)({},e),{},{id:t.data.user.id,email:t.data.user.email,name:t.data.user.name,token:t.data.user.token,address:t.data.user.address,city:t.data.user.city,postalCode:t.data.user.postalCode,phone:t.data.user.phone}),Tt(a)):"LOGOUT"===t.type?(a={id:void 0,email:void 0,name:void 0,token:void 0,address:void 0,city:void 0,postalCode:void 0,phone:void 0},Pt()):"SETCLIENT"===t.type&&console.log("error on SETCLIENT in reducer.js"),a},jt={id:Lt().id,email:Lt().email,name:Lt().name,token:Lt().token,address:Lt().address,city:Lt().city,postalCode:Lt().postalCode,phone:Lt().phone},Mt=Object(St.b)(Ot,jt);Mt.subscribe((function(){}));var Dt=Mt;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(l.a.createElement(h.a,{store:Dt},l.a.createElement(Nt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},68:function(e,t,a){e.exports=a.p+"static/media/gmail.96cdc794.svg"},69:function(e,t,a){e.exports=a.p+"static/media/resume.1f84e97a.svg"},70:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAGq0lEQVR4Xt2XW2xcRxnHfzNndtcXNnEbxzHGNYnTJKRcGhRQQ1HVVFxTqiIuUkGorYSQqAQSd4k+hCLBA0VCSPCCKh5paVUEotxUSMhDEVCkNA0JxUlMnUIcx46dEK/X3ss582F90hGxzxkdqUplb37SaOX1/9sz//0uM2sAGH3XB7o/9Lnv79i2dXfFCsL6xgCLCXLq9Jmj8TPf+3z/wsTzhptvf//oA488/el379ww2BPRERhA4Ox8zGNH/j7T+OV33mN6vvjUxJc/uHfrTVXHUtvTSfSWI07MtXj813/4hbtpaHBr1cHcYptOYyn2bC7DltFde12EZzH2eC9g6CiMgXYiRJGLXOxFS8qLEAZEBNFgMJh1YkRoJ5B4Ly7xwmKcBI14D83EU4kMkTU0Yg9Axdl1kxERcInAUluNZFTtxNNdirjnlgH2DFXpchEXak0Oj89xbPIKXc6uCyMewYx8+5Dcsb0fWWUk8dBVsjx813Z2be5lNT/+23/47dhFNQqyZlO47YVj5/57TktrKfarjWiW7rt1RE3k8cDeYY5OzjN5pYGLzJoa8VpaCM04WWHEC7q520b6CFGOjJbbP2dqOs/X0oiI4LyHlmaEFBIRKpGjp2CDGyqOZiyUrLBWxF4QwHkRWn6lERGYW2pxcaFFX5cjxMTlJdre0/JmTY14ETWi41WEFdRbCT87OcXD+7eTx/RCi8PjsxiDxq9pRgSc1zrLGilFhp8eP89IXzef2jO0ykSTr/1ujKnl1+6Sxfv1Ulpx1ggGEi9889BpDo1f5M7RTdoTZ2br/GZshslag55SpLFrSZw2uwi09A+yGLAWDr88x+/HZzGAgB6EpcjSSq5FJgQBDADm1WdERPCJIORkJBFaiV/xCAM0Y6+Z0JMdg6KnrNdU5+GsUfOANmej7TXjLjJExuh7ab2XndUrUbEx8P83krrKCvp7ywxv7CIHzcbp2QXdAKCbesOydmA5Jo+ZhRbnaw0a+gVY9o9u4s5tN3Lzpl6qlUjfX9ZwYrrGcxOXOHmhpn1ajixCmPbVpZX4rLTWiLnvbUN89+43kcf5+SZ3PfYX6nFCZIzqH9w/zEP7Rsjjh38+y5d+9RJ37xrg4Ht38M7hjeTxsbcMahX8/OQFvnV4nNl6U69BEs4IAE4QLaHQfA4hoHEaa4r1Vxox996yhSc++faiy6Zm4RO3DvHWwSof/8kLzNXblJ0hx40mwUpaWiJZgYiuEFrTugQp1rPn9Rv47G0jOSbCvHlLlUcP7Ob+p17EGpvXMvr8Utojks2IvieeMJJq1AgSC4T13LN7gFfBchYHuH2kjz9NXNJxvxrxAtbgQJslK1CHQhiNQ40Y1SMIrwUfXe6bI2dmEWdz92mMwQkEjBRvSwTUiE2NkyE0KMama3p+7ezvZXRTD2Fg3xtv0Bu29oPJ7iGOYxyBL169FTS7yKpFMY8e+Rc/eG6Cy4st1feWHV+4YxsH37eDAHpN2txbZmq+qSP5aqwx1BfquHSE5U0DkcLDSJcBfS0KeOKFSb6+PIJf1+XSpqcVJzzy7CneMbyRA/l9pFejG7tL/PvyEpGxXI0H0pOdJDC1PEKGvMkmqT6MCPzor68QOYO1qgfAWBCEJ4+fDxoxBjXf9p6SGK4mQcF53RBZPCQFUytJY3WBF4JcWGgyNlPHWbvycwUdradm6kj4UqLXm9hn9xqj4CCwgYJmF43ThZFUH4zQH2m1ZpvQ86402nqiVyILEJqimVg1L4JLRRmEIjROlxTrG3FCnAiRMTmGBb1wJkIlCg8X1ItkjaQHYoLkhnop6BFEl0LBcEifk1M+Pv2cMHiAHF2SGglOWYHicyRdxXqVhDTFAw+RfJ2gYLlOcKGSKCp8yfRISF88QLKpCqYtt0ckLS1PLsXpRsFn9GF8YMT6ojgJ6K6/0pJwJou7fcUq5Bo9K4PINc2IsCaIUCo5HIoUbawwbcV6eW1S4oVqX/V66pHwgagXtRDVioOrDymBShQRoqes+vzcCRiM/ngK4azJPzgFxRGiFPHH8Vk+8/TxTLABas2YZuLBmFTP48fO8Y/pefxqvYGZWlO1GLJYw9xiiweffJGSNQjZ552YqoGzhDB85RkJ/AdiD20fioSKW6FXbRzQWwPliCACNGNCaKw1ZEiEgRt6zqkROpjUiKXzQcBYhI7HGZPYDRV7FjF0LLFnz3DfUfuR6tRDDr9AVKKzMECEM/HsV/cNfsPurVx+9l770oeZfvl5jG13jIkkafTHl47cv/GVAzu7Gif/B1VhQDg89RGeAAAAAElFTkSuQmCC"},71:function(e,t,a){e.exports=a.p+"static/media/github.0ba2aa20.png"}},[[123,1,2]]]);
//# sourceMappingURL=main.572ccb89.chunk.js.map